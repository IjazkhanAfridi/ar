import{r as e,j as t,R as a,u as n,T as s,V as i,C as r,P as o,b as l,c,O as d,d as u,e as p,f as m,g as h,L as f,h as g,F as x,M as v,i as b,k as y,S as w,l as j,m as k,D as N,n as E,o as C,I as S,Q as R,p as A,q as _,s as T,B as z,t as M,v as O,N as I,w as P,x as D,y as F,z as L,A as U,E as $,G as V,H as B,J as H,K as q,U as G,W as K,X as Z,Y as Q,Z as W,_ as Y,$ as X,a0 as J,a1 as ee,a2 as te,a3 as ae,a4 as ne,a5 as se,a6 as ie,a7 as re,a8 as oe,a9 as le,aa as ce,ab as de,ac as ue,ad as pe,ae as me,af as he,ag as fe,ah as ge,ai as xe,aj as ve,ak as be,al as ye,am as we,an as je,ao as ke,ap as Ne,aq as Ee,ar as Ce}from"./three-C4XgB5sc.js";import{R as Se,S as Re,a as Ae,c as _e,b as Te,u as ze,P as Me,d as Oe,e as Ie,f as Pe,g as De,h as Fe,i as Le,j as Ue,k as $e,l as Ve,T as Be,m as He,n as qe,o as Ge,C as Ke,p as Ze,q as Qe,D as We,r as Ye,O as Xe,s as Je,_ as et}from"./ui-Dd2tekxz.js";import{g as tt}from"./vendor-dQk0gtQ5.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var at=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},nt="undefined"==typeof window||"Deno"in globalThis;function st(){}function it(e){return"number"==typeof e&&e>=0&&e!==1/0}function rt(e,t){return Math.max(e+(t||0)-Date.now(),0)}function ot(e,t){return"function"==typeof e?e(t):e}function lt(e,t){return"function"==typeof e?e(t):e}function ct(e,t){const{type:a="all",exact:n,fetchStatus:s,predicate:i,queryKey:r,stale:o}=e;if(r)if(n){if(t.queryHash!==ut(r,t.options))return!1}else if(!mt(t.queryKey,r))return!1;if("all"!==a){const e=t.isActive();if("active"===a&&!e)return!1;if("inactive"===a&&e)return!1}return("boolean"!=typeof o||t.isStale()===o)&&((!s||s===t.state.fetchStatus)&&!(i&&!i(t)))}function dt(e,t){const{exact:a,status:n,predicate:s,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(a){if(pt(t.options.mutationKey)!==pt(i))return!1}else if(!mt(t.options.mutationKey,i))return!1}return(!n||t.state.status===n)&&!(s&&!s(t))}function ut(e,t){return(t?.queryKeyHashFn||pt)(e)}function pt(e){return JSON.stringify(e,(e,t)=>xt(t)?Object.keys(t).sort().reduce((e,a)=>(e[a]=t[a],e),{}):t)}function mt(e,t){return e===t||typeof e==typeof t&&(!(!e||!t||"object"!=typeof e||"object"!=typeof t)&&Object.keys(t).every(a=>mt(e[a],t[a])))}function ht(e,t){if(e===t)return e;const a=gt(e)&&gt(t);if(a||xt(e)&&xt(t)){const n=a?e:Object.keys(e),s=n.length,i=a?t:Object.keys(t),r=i.length,o=a?[]:{},l=new Set(n);let c=0;for(let d=0;d<r;d++){const n=a?d:i[d];(!a&&l.has(n)||a)&&void 0===e[n]&&void 0===t[n]?(o[n]=void 0,c++):(o[n]=ht(e[n],t[n]),o[n]===e[n]&&void 0!==e[n]&&c++)}return s===r&&c===s?e:o}return t}function ft(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const a in e)if(e[a]!==t[a])return!1;return!0}function gt(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function xt(e){if(!vt(e))return!1;const t=e.constructor;if(void 0===t)return!0;const a=t.prototype;return!!vt(a)&&(!!a.hasOwnProperty("isPrototypeOf")&&Object.getPrototypeOf(e)===Object.prototype)}function vt(e){return"[object Object]"===Object.prototype.toString.call(e)}function bt(e,t,a){return"function"==typeof a.structuralSharing?a.structuralSharing(e,t):!1!==a.structuralSharing?ht(e,t):t}function yt(e,t,a=0){const n=[...e,t];return a&&n.length>a?n.slice(1):n}function wt(e,t,a=0){const n=[t,...e];return a&&n.length>a?n.slice(0,-1):n}var jt=Symbol();function kt(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:e.queryFn&&e.queryFn!==jt?e.queryFn:()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`))}function Nt(e,t){return"function"==typeof e?e(...t):!!e}var Et=new class extends at{#e;#t;#a;constructor(){super(),this.#a=e=>{if(!nt&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#a)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#a=e,this.#t?.(),this.#t=e(e=>{"boolean"==typeof e?this.setFocused(e):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){return"boolean"==typeof this.#e?this.#e:"hidden"!==globalThis.document?.visibilityState}},Ct=new class extends at{#n=!0;#t;#a;constructor(){super(),this.#a=e=>{if(!nt&&window.addEventListener){const t=()=>e(!0),a=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",a,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",a)}}}}onSubscribe(){this.#t||this.setEventListener(this.#a)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#a=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#n!==e&&(this.#n=e,this.listeners.forEach(t=>{t(e)}))}isOnline(){return this.#n}};function St(){let e,t;const a=new Promise((a,n)=>{e=a,t=n});function n(e){Object.assign(a,e),delete a.resolve,delete a.reject}return a.status="pending",a.catch(()=>{}),a.resolve=t=>{n({status:"fulfilled",value:t}),e(t)},a.reject=e=>{n({status:"rejected",reason:e}),t(e)},a}function Rt(e){return Math.min(1e3*2**e,3e4)}function At(e){return"online"!==(e??"online")||Ct.isOnline()}var _t=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function Tt(e){return e instanceof _t}function zt(e){let t,a=!1,n=0,s=!1;const i=St(),r=()=>Et.isFocused()&&("always"===e.networkMode||Ct.isOnline())&&e.canRun(),o=()=>At(e.networkMode)&&e.canRun(),l=a=>{s||(s=!0,e.onSuccess?.(a),t?.(),i.resolve(a))},c=a=>{s||(s=!0,e.onError?.(a),t?.(),i.reject(a))},d=()=>new Promise(a=>{t=e=>{(s||r())&&a(e)},e.onPause?.()}).then(()=>{t=void 0,s||e.onContinue?.()}),u=()=>{if(s)return;let t;const i=0===n?e.initialPromise:void 0;try{t=i??e.fn()}catch(o){t=Promise.reject(o)}Promise.resolve(t).then(l).catch(t=>{if(s)return;const i=e.retry??(nt?0:3),o=e.retryDelay??Rt,l="function"==typeof o?o(n,t):o,p=!0===i||"number"==typeof i&&n<i||"function"==typeof i&&i(n,t);var m;!a&&p?(n++,e.onFail?.(n,t),(m=l,new Promise(e=>{setTimeout(e,m)})).then(()=>r()?void 0:d()).then(()=>{a?c(t):u()})):c(t)})};return{promise:i,cancel:t=>{s||(c(new _t(t)),e.abort?.())},continue:()=>(t?.(),i),cancelRetry:()=>{a=!0},continueRetry:()=>{a=!1},canStart:o,start:()=>(o()?u():d().then(u),i)}}var Mt=e=>setTimeout(e,0);var Ot=function(){let e=[],t=0,a=e=>{e()},n=e=>{e()},s=Mt;const i=n=>{t?e.push(n):s(()=>{a(n)})};return{batch:i=>{let r;t++;try{r=i()}finally{t--,t||(()=>{const t=e;e=[],t.length&&s(()=>{n(()=>{t.forEach(e=>{a(e)})})})})()}return r},batchCalls:e=>(...t)=>{i(()=>{e(...t)})},schedule:i,setNotifyFunction:e=>{a=e},setBatchNotifyFunction:e=>{n=e},setScheduler:e=>{s=e}}}(),It=class{#s;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),it(this.gcTime)&&(this.#s=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(nt?1/0:3e5))}clearGcTimeout(){this.#s&&(clearTimeout(this.#s),this.#s=void 0)}},Pt=class extends It{#i;#r;#o;#l;#c;#d;#u;constructor(e){super(),this.#u=!1,this.#d=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#l=e.client,this.#o=this.#l.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#i=function(e){const t="function"==typeof e.initialData?e.initialData():e.initialData,a=void 0!==t,n=a?"function"==typeof e.initialDataUpdatedAt?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:a?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:a?"success":"pending",fetchStatus:"idle"}}(this.options),this.state=e.state??this.#i,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#c?.promise}setOptions(e){this.options={...this.#d,...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){this.observers.length||"idle"!==this.state.fetchStatus||this.#o.remove(this)}setData(e,t){const a=bt(this.state.data,e,this.options);return this.#p({data:a,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),a}setState(e,t){this.#p({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#c?.promise;return this.#c?.cancel(e),t?t.then(st).catch(st):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#i)}isActive(){return this.observers.some(e=>!1!==lt(e.options.enabled,this))}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===jt||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0&&this.observers.some(e=>"static"===ot(e.options.staleTime,this))}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):void 0===this.state.data||this.state.isInvalidated}isStaleByTime(e=0){return void 0===this.state.data||"static"!==e&&(!!this.state.isInvalidated||!rt(this.state.dataUpdatedAt,e))}onFocus(){const e=this.observers.find(e=>e.shouldFetchOnWindowFocus());e?.refetch({cancelRefetch:!1}),this.#c?.continue()}onOnline(){const e=this.observers.find(e=>e.shouldFetchOnReconnect());e?.refetch({cancelRefetch:!1}),this.#c?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#o.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#c&&(this.#u?this.#c.cancel({revert:!0}):this.#c.cancelRetry()),this.scheduleGc()),this.#o.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#p({type:"invalidate"})}fetch(e,t){if("idle"!==this.state.fetchStatus)if(void 0!==this.state.data&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#c)return this.#c.continueRetry(),this.#c.promise;if(e&&this.setOptions(e),!this.options.queryFn){const e=this.observers.find(e=>e.options.queryFn);e&&this.setOptions(e.options)}const a=new AbortController,n=e=>{Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(this.#u=!0,a.signal)})},s=()=>{const e=kt(this.options,t),a=(()=>{const e={client:this.#l,queryKey:this.queryKey,meta:this.meta};return n(e),e})();return this.#u=!1,this.options.persister?this.options.persister(e,a,this):e(a)},i=(()=>{const e={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#l,state:this.state,fetchFn:s};return n(e),e})();this.options.behavior?.onFetch(i,this),this.#r=this.state,"idle"!==this.state.fetchStatus&&this.state.fetchMeta===i.fetchOptions?.meta||this.#p({type:"fetch",meta:i.fetchOptions?.meta});const r=e=>{Tt(e)&&e.silent||this.#p({type:"error",error:e}),Tt(e)||(this.#o.config.onError?.(e,this),this.#o.config.onSettled?.(this.state.data,e,this)),this.scheduleGc()};return this.#c=zt({initialPromise:t?.initialPromise,fn:i.fetchFn,abort:a.abort.bind(a),onSuccess:e=>{if(void 0!==e){try{this.setData(e)}catch(t){return void r(t)}this.#o.config.onSuccess?.(e,this),this.#o.config.onSettled?.(e,this.state.error,this),this.scheduleGc()}else r(new Error(`${this.queryHash} data is undefined`))},onError:r,onFail:(e,t)=>{this.#p({type:"failed",failureCount:e,error:t})},onPause:()=>{this.#p({type:"pause"})},onContinue:()=>{this.#p({type:"continue"})},retry:i.options.retry,retryDelay:i.options.retryDelay,networkMode:i.options.networkMode,canRun:()=>!0}),this.#c.start()}#p(e){this.state=(t=>{switch(e.type){case"failed":return{...t,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...t,fetchStatus:"paused"};case"continue":return{...t,fetchStatus:"fetching"};case"fetch":return{...t,...Dt(t.data,this.options),fetchMeta:e.meta??null};case"success":return this.#r=void 0,{...t,data:e.data,dataUpdateCount:t.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=e.error;return Tt(a)&&a.revert&&this.#r?{...this.#r,fetchStatus:"idle"}:{...t,error:a,errorUpdateCount:t.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:t.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...t,isInvalidated:!0};case"setState":return{...t,...e.state}}})(this.state),Ot.batch(()=>{this.observers.forEach(e=>{e.onQueryUpdate()}),this.#o.notify({query:this,type:"updated",action:e})})}};function Dt(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:At(t.networkMode)?"fetching":"paused",...void 0===e&&{error:null,status:"pending"}}}var Ft=class extends at{constructor(e={}){super(),this.config=e,this.#m=new Map}#m;build(e,t,a){const n=t.queryKey,s=t.queryHash??ut(n,t);let i=this.get(s);return i||(i=new Pt({client:e,queryKey:n,queryHash:s,options:e.defaultQueryOptions(t),state:a,defaultOptions:e.getQueryDefaults(n)}),this.add(i)),i}add(e){this.#m.has(e.queryHash)||(this.#m.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=this.#m.get(e.queryHash);t&&(e.destroy(),t===e&&this.#m.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Ot.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#m.get(e)}getAll(){return[...this.#m.values()]}find(e){const t={exact:!0,...e};return this.getAll().find(e=>ct(t,e))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(t=>ct(e,t)):t}notify(e){Ot.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){Ot.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Ot.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Lt=class extends It{#h;#f;#c;constructor(e){super(),this.mutationId=e.mutationId,this.#f=e.mutationCache,this.#h=[],this.state=e.state||{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0},this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#h.includes(e)||(this.#h.push(e),this.clearGcTimeout(),this.#f.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#h=this.#h.filter(t=>t!==e),this.scheduleGc(),this.#f.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#h.length||("pending"===this.state.status?this.scheduleGc():this.#f.remove(this))}continue(){return this.#c?.continue()??this.execute(this.state.variables)}async execute(e){const t=()=>{this.#p({type:"continue"})};this.#c=zt({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(e,t)=>{this.#p({type:"failed",failureCount:e,error:t})},onPause:()=>{this.#p({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#f.canRun(this)});const a="pending"===this.state.status,n=!this.#c.canStart();try{if(a)t();else{this.#p({type:"pending",variables:e,isPaused:n}),await(this.#f.config.onMutate?.(e,this));const t=await(this.options.onMutate?.(e));t!==this.state.context&&this.#p({type:"pending",context:t,variables:e,isPaused:n})}const s=await this.#c.start();return await(this.#f.config.onSuccess?.(s,e,this.state.context,this)),await(this.options.onSuccess?.(s,e,this.state.context)),await(this.#f.config.onSettled?.(s,null,this.state.variables,this.state.context,this)),await(this.options.onSettled?.(s,null,e,this.state.context)),this.#p({type:"success",data:s}),s}catch(s){try{throw await(this.#f.config.onError?.(s,e,this.state.context,this)),await(this.options.onError?.(s,e,this.state.context)),await(this.#f.config.onSettled?.(void 0,s,this.state.variables,this.state.context,this)),await(this.options.onSettled?.(void 0,s,e,this.state.context)),s}finally{this.#p({type:"error",error:s})}}finally{this.#f.runNext(this)}}#p(e){this.state=(t=>{switch(e.type){case"failed":return{...t,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"pending":return{...t,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...t,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:e.error,failureCount:t.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}})(this.state),Ot.batch(()=>{this.#h.forEach(t=>{t.onMutationUpdate(e)}),this.#f.notify({mutation:this,type:"updated",action:e})})}};var Ut=class extends at{constructor(e={}){super(),this.config=e,this.#g=new Set,this.#x=new Map,this.#v=0}#g;#x;#v;build(e,t,a){const n=new Lt({mutationCache:this,mutationId:++this.#v,options:e.defaultMutationOptions(t),state:a});return this.add(n),n}add(e){this.#g.add(e);const t=$t(e);if("string"==typeof t){const a=this.#x.get(t);a?a.push(e):this.#x.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#g.delete(e)){const t=$t(e);if("string"==typeof t){const a=this.#x.get(t);if(a)if(a.length>1){const t=a.indexOf(e);-1!==t&&a.splice(t,1)}else a[0]===e&&this.#x.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=$t(e);if("string"==typeof t){const a=this.#x.get(t),n=a?.find(e=>"pending"===e.state.status);return!n||n===e}return!0}runNext(e){const t=$t(e);if("string"==typeof t){const a=this.#x.get(t)?.find(t=>t!==e&&t.state.isPaused);return a?.continue()??Promise.resolve()}return Promise.resolve()}clear(){Ot.batch(()=>{this.#g.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#g.clear(),this.#x.clear()})}getAll(){return Array.from(this.#g)}find(e){const t={exact:!0,...e};return this.getAll().find(e=>dt(t,e))}findAll(e={}){return this.getAll().filter(t=>dt(e,t))}notify(e){Ot.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(e=>e.state.isPaused);return Ot.batch(()=>Promise.all(e.map(e=>e.continue().catch(st))))}};function $t(e){return e.options.scope?.id}function Vt(e){return{onFetch:(t,a)=>{const n=t.options,s=t.fetchOptions?.meta?.fetchMore?.direction,i=t.state.data?.pages||[],r=t.state.data?.pageParams||[];let o={pages:[],pageParams:[]},l=0;const c=async()=>{let a=!1;const c=kt(t.options,t.fetchOptions),d=async(e,n,s)=>{if(a)return Promise.reject();if(null==n&&e.pages.length)return Promise.resolve(e);const i=(()=>{const e={client:t.client,queryKey:t.queryKey,pageParam:n,direction:s?"backward":"forward",meta:t.options.meta};var i;return i=e,Object.defineProperty(i,"signal",{enumerable:!0,get:()=>(t.signal.aborted?a=!0:t.signal.addEventListener("abort",()=>{a=!0}),t.signal)}),e})(),r=await c(i),{maxPages:o}=t.options,l=s?wt:yt;return{pages:l(e.pages,r,o),pageParams:l(e.pageParams,n,o)}};if(s&&i.length){const e="backward"===s,t={pages:i,pageParams:r},a=(e?Ht:Bt)(n,t);o=await d(t,a,e)}else{const t=e??i.length;do{const e=0===l?r[0]??n.initialPageParam:Bt(n,o);if(l>0&&null==e)break;o=await d(o,e),l++}while(l<t)}return o};t.options.persister?t.fetchFn=()=>t.options.persister?.(c,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},a):t.fetchFn=c}}}function Bt(e,{pages:t,pageParams:a}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,a[n],a):void 0}function Ht(e,{pages:t,pageParams:a}){return t.length>0?e.getPreviousPageParam?.(t[0],t,a[0],a):void 0}var qt=class extends at{constructor(e,t){super(),this.options=t,this.#l=e,this.#b=null,this.#y=St(),this.options.experimental_prefetchInRender||this.#y.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(t)}#l;#w=void 0;#j=void 0;#k=void 0;#N;#E;#y;#b;#C;#S;#R;#A;#_;#T;#z=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(this.#w.addObserver(this),Gt(this.#w,this.options)?this.#M():this.updateResult(),this.#O())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Kt(this.#w,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Kt(this.#w,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#I(),this.#P(),this.#w.removeObserver(this)}setOptions(e){const t=this.options,a=this.#w;if(this.options=this.#l.defaultQueryOptions(e),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled&&"function"!=typeof this.options.enabled&&"boolean"!=typeof lt(this.options.enabled,this.#w))throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#D(),this.#w.setOptions(this.options),t._defaulted&&!ft(this.options,t)&&this.#l.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#w,observer:this});const n=this.hasListeners();n&&Zt(this.#w,a,this.options,t)&&this.#M(),this.updateResult(),!n||this.#w===a&&lt(this.options.enabled,this.#w)===lt(t.enabled,this.#w)&&ot(this.options.staleTime,this.#w)===ot(t.staleTime,this.#w)||this.#F();const s=this.#L();!n||this.#w===a&&lt(this.options.enabled,this.#w)===lt(t.enabled,this.#w)&&s===this.#T||this.#U(s)}getOptimisticResult(e){const t=this.#l.getQueryCache().build(this.#l,e),a=this.createResult(t,e);return function(e,t){if(!ft(e.getCurrentResult(),t))return!0;return!1}(this,a)&&(this.#k=a,this.#E=this.options,this.#N=this.#w.state),a}getCurrentResult(){return this.#k}trackResult(e,t){return new Proxy(e,{get:(e,a)=>(this.trackProp(a),t?.(a),Reflect.get(e,a))})}trackProp(e){this.#z.add(e)}getCurrentQuery(){return this.#w}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=this.#l.defaultQueryOptions(e),a=this.#l.getQueryCache().build(this.#l,t);return a.fetch().then(()=>this.createResult(a,t))}fetch(e){return this.#M({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#k))}#M(e){this.#D();let t=this.#w.fetch(this.options,e);return e?.throwOnError||(t=t.catch(st)),t}#F(){this.#I();const e=ot(this.options.staleTime,this.#w);if(nt||this.#k.isStale||!it(e))return;const t=rt(this.#k.dataUpdatedAt,e)+1;this.#A=setTimeout(()=>{this.#k.isStale||this.updateResult()},t)}#L(){return("function"==typeof this.options.refetchInterval?this.options.refetchInterval(this.#w):this.options.refetchInterval)??!1}#U(e){this.#P(),this.#T=e,!nt&&!1!==lt(this.options.enabled,this.#w)&&it(this.#T)&&0!==this.#T&&(this.#_=setInterval(()=>{(this.options.refetchIntervalInBackground||Et.isFocused())&&this.#M()},this.#T))}#O(){this.#F(),this.#U(this.#L())}#I(){this.#A&&(clearTimeout(this.#A),this.#A=void 0)}#P(){this.#_&&(clearInterval(this.#_),this.#_=void 0)}createResult(e,t){const a=this.#w,n=this.options,s=this.#k,i=this.#N,r=this.#E,o=e!==a?e.state:this.#j,{state:l}=e;let c,d={...l},u=!1;if(t._optimisticResults){const s=this.hasListeners(),i=!s&&Gt(e,t),r=s&&Zt(e,a,t,n);(i||r)&&(d={...d,...Dt(l.data,e.options)}),"isRestoring"===t._optimisticResults&&(d.fetchStatus="idle")}let{error:p,errorUpdatedAt:m,status:h}=d;c=d.data;let f=!1;if(void 0!==t.placeholderData&&void 0===c&&"pending"===h){let e;s?.isPlaceholderData&&t.placeholderData===r?.placeholderData?(e=s.data,f=!0):e="function"==typeof t.placeholderData?t.placeholderData(this.#R?.state.data,this.#R):t.placeholderData,void 0!==e&&(h="success",c=bt(s?.data,e,t),u=!0)}if(t.select&&void 0!==c&&!f)if(s&&c===i?.data&&t.select===this.#C)c=this.#S;else try{this.#C=t.select,c=t.select(c),c=bt(s?.data,c,t),this.#S=c,this.#b=null}catch(j){this.#b=j}this.#b&&(p=this.#b,c=this.#S,m=Date.now(),h="error");const g="fetching"===d.fetchStatus,x="pending"===h,v="error"===h,b=x&&g,y=void 0!==c,w={status:h,fetchStatus:d.fetchStatus,isPending:x,isSuccess:"success"===h,isError:v,isInitialLoading:b,isLoading:b,data:c,dataUpdatedAt:d.dataUpdatedAt,error:p,errorUpdatedAt:m,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>o.dataUpdateCount||d.errorUpdateCount>o.errorUpdateCount,isFetching:g,isRefetching:g&&!x,isLoadingError:v&&!y,isPaused:"paused"===d.fetchStatus,isPlaceholderData:u,isRefetchError:v&&y,isStale:Qt(e,t),refetch:this.refetch,promise:this.#y,isEnabled:!1!==lt(t.enabled,e)};if(this.options.experimental_prefetchInRender){const t=e=>{"error"===w.status?e.reject(w.error):void 0!==w.data&&e.resolve(w.data)},n=()=>{const e=this.#y=w.promise=St();t(e)},s=this.#y;switch(s.status){case"pending":e.queryHash===a.queryHash&&t(s);break;case"fulfilled":"error"!==w.status&&w.data===s.value||n();break;case"rejected":"error"===w.status&&w.error===s.reason||n()}}return w}updateResult(){const e=this.#k,t=this.createResult(this.#w,this.options);if(this.#N=this.#w.state,this.#E=this.options,void 0!==this.#N.data&&(this.#R=this.#w),ft(t,e))return;this.#k=t;this.#$({listeners:(()=>{if(!e)return!0;const{notifyOnChangeProps:t}=this.options,a="function"==typeof t?t():t;if("all"===a||!a&&!this.#z.size)return!0;const n=new Set(a??this.#z);return this.options.throwOnError&&n.add("error"),Object.keys(this.#k).some(t=>{const a=t;return this.#k[a]!==e[a]&&n.has(a)})})()})}#D(){const e=this.#l.getQueryCache().build(this.#l,this.options);if(e===this.#w)return;const t=this.#w;this.#w=e,this.#j=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#O()}#$(e){Ot.batch(()=>{e.listeners&&this.listeners.forEach(e=>{e(this.#k)}),this.#l.getQueryCache().notify({query:this.#w,type:"observerResultsUpdated"})})}};function Gt(e,t){return function(e,t){return!1!==lt(t.enabled,e)&&void 0===e.state.data&&!("error"===e.state.status&&!1===t.retryOnMount)}(e,t)||void 0!==e.state.data&&Kt(e,t,t.refetchOnMount)}function Kt(e,t,a){if(!1!==lt(t.enabled,e)&&"static"!==ot(t.staleTime,e)){const n="function"==typeof a?a(e):a;return"always"===n||!1!==n&&Qt(e,t)}return!1}function Zt(e,t,a,n){return(e!==t||!1===lt(n.enabled,e))&&(!a.suspense||"error"!==e.state.status)&&Qt(e,a)}function Qt(e,t){return!1!==lt(t.enabled,e)&&e.isStaleByTime(ot(t.staleTime,e))}var Wt=class extends at{#l;#k=void 0;#V;#B;constructor(e,t){super(),this.#l=e,this.setOptions(t),this.bindMethods(),this.#H()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){const t=this.options;this.options=this.#l.defaultMutationOptions(e),ft(this.options,t)||this.#l.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#V,observer:this}),t?.mutationKey&&this.options.mutationKey&&pt(t.mutationKey)!==pt(this.options.mutationKey)?this.reset():"pending"===this.#V?.state.status&&this.#V.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#V?.removeObserver(this)}onMutationUpdate(e){this.#H(),this.#$(e)}getCurrentResult(){return this.#k}reset(){this.#V?.removeObserver(this),this.#V=void 0,this.#H(),this.#$()}mutate(e,t){return this.#B=t,this.#V?.removeObserver(this),this.#V=this.#l.getMutationCache().build(this.#l,this.options),this.#V.addObserver(this),this.#V.execute(e)}#H(){const e=this.#V?.state??{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0};this.#k={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#$(e){Ot.batch(()=>{if(this.#B&&this.hasListeners()){const t=this.#k.variables,a=this.#k.context;"success"===e?.type?(this.#B.onSuccess?.(e.data,t,a),this.#B.onSettled?.(e.data,null,t,a)):"error"===e?.type&&(this.#B.onError?.(e.error,t,a),this.#B.onSettled?.(void 0,e.error,t,a))}this.listeners.forEach(e=>{e(this.#k)})})}},Yt=e.createContext(void 0),Xt=t=>{const a=e.useContext(Yt);if(!a)throw new Error("No QueryClient set, use QueryClientProvider to set one");return a},Jt=({client:a,children:n})=>(e.useEffect(()=>(a.mount(),()=>{a.unmount()}),[a]),t.jsx(Yt.Provider,{value:a,children:n})),ea=e.createContext(!1);ea.Provider;var ta=e.createContext(function(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}()),aa=(e,t,a)=>t.fetchOptimistic(e).catch(()=>{a.clearReset()});function na(t,a,n){const s=e.useContext(ea),i=e.useContext(ta),r=Xt(),o=r.defaultQueryOptions(t);r.getDefaultOptions().queries?._experimental_beforeQuery?.(o),o._optimisticResults=s?"isRestoring":"optimistic",(e=>{if(e.suspense){const t=e=>"static"===e?e:Math.max(e??1e3,1e3),a=e.staleTime;e.staleTime="function"==typeof a?(...e)=>t(a(...e)):t(a),"number"==typeof e.gcTime&&(e.gcTime=Math.max(e.gcTime,1e3))}})(o),((e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))})(o,i),(t=>{e.useEffect(()=>{t.clearReset()},[t])})(i);const l=!r.getQueryCache().get(o.queryHash),[c]=e.useState(()=>new a(r,o)),d=c.getOptimisticResult(o),u=!s&&!1!==t.subscribed;if(e.useSyncExternalStore(e.useCallback(e=>{const t=u?c.subscribe(Ot.batchCalls(e)):st;return c.updateResult(),t},[c,u]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),e.useEffect(()=>{c.setOptions(o)},[o,c]),((e,t)=>e?.suspense&&t.isPending)(o,d))throw aa(o,c,i);if((({result:e,errorResetBoundary:t,throwOnError:a,query:n,suspense:s})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(s&&void 0===e.data||Nt(a,[e.error,n])))({result:d,errorResetBoundary:i,throwOnError:o.throwOnError,query:r.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw d.error;if(r.getDefaultOptions().queries?._experimental_afterQuery?.(o,d),o.experimental_prefetchInRender&&!nt&&((e,t)=>e.isLoading&&e.isFetching&&!t)(d,s)){const e=l?aa(o,c,i):r.getQueryCache().get(o.queryHash)?.promise;e?.catch(st).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?d:c.trackResult(d)}function sa(e,t){return na(e,qt)}function ia(t,a){const n=Xt(),[s]=e.useState(()=>new Wt(n,t));e.useEffect(()=>{s.setOptions(t)},[s,t]);const i=e.useSyncExternalStore(e.useCallback(e=>s.subscribe(Ot.batchCalls(e)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),r=e.useCallback((e,t)=>{s.mutate(e,t).catch(st)},[s]);if(i.error&&Nt(s.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:r,mutateAsync:i.mutate}}var ra,oa=function(){return null},la={};!function(){if(ra)return la;ra=1,Object.defineProperty(la,"__esModule",{value:!0}),la.parse=function(e,t){const a=new i,n=e.length;if(n<2)return a;const s=t?.decode||l;let c=0;do{const t=e.indexOf("=",c);if(-1===t)break;const i=e.indexOf(";",c),l=-1===i?n:i;if(t>l){c=e.lastIndexOf(";",t-1)+1;continue}const d=r(e,c,t),u=o(e,t,d),p=e.slice(d,u);if(void 0===a[p]){let n=r(e,t+1,l),i=o(e,l,n);const c=s(e.slice(n,i));a[p]=c}c=l+1}while(c<n);return a},la.serialize=function(i,r,o){const l=o?.encode||encodeURIComponent;if(!e.test(i))throw new TypeError(`argument name is invalid: ${i}`);const c=l(r);if(!t.test(c))throw new TypeError(`argument val is invalid: ${r}`);let d=i+"="+c;if(!o)return d;if(void 0!==o.maxAge){if(!Number.isInteger(o.maxAge))throw new TypeError(`option maxAge is invalid: ${o.maxAge}`);d+="; Max-Age="+o.maxAge}if(o.domain){if(!a.test(o.domain))throw new TypeError(`option domain is invalid: ${o.domain}`);d+="; Domain="+o.domain}if(o.path){if(!n.test(o.path))throw new TypeError(`option path is invalid: ${o.path}`);d+="; Path="+o.path}if(o.expires){if(!function(e){return"[object Date]"===s.call(e)}(o.expires)||!Number.isFinite(o.expires.valueOf()))throw new TypeError(`option expires is invalid: ${o.expires}`);d+="; Expires="+o.expires.toUTCString()}o.httpOnly&&(d+="; HttpOnly");o.secure&&(d+="; Secure");o.partitioned&&(d+="; Partitioned");if(o.priority){switch("string"==typeof o.priority?o.priority.toLowerCase():void 0){case"low":d+="; Priority=Low";break;case"medium":d+="; Priority=Medium";break;case"high":d+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${o.priority}`)}}if(o.sameSite){switch("string"==typeof o.sameSite?o.sameSite.toLowerCase():o.sameSite){case!0:case"strict":d+="; SameSite=Strict";break;case"lax":d+="; SameSite=Lax";break;case"none":d+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${o.sameSite}`)}}return d};const e=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,a=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,n=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,i=(()=>{const e=function(){};return e.prototype=Object.create(null),e})();function r(e,t,a){do{const a=e.charCodeAt(t);if(32!==a&&9!==a)return t}while(++t<a);return a}function o(e,t,a){for(;t>a;){const a=e.charCodeAt(--t);if(32!==a&&9!==a)return t+1}return a}function l(e){if(-1===e.indexOf("%"))return e;try{return decodeURIComponent(e)}catch(t){return e}}}();var ca="popstate";function da(e={}){return function(e,t,a,n={}){let{window:s=document.defaultView,v5Compat:i=!1}=n,r=s.history,o="POP",l=null,c=d();null==c&&(c=0,r.replaceState({...r.state,idx:c},""));function d(){return(r.state||{idx:null}).idx}function u(){o="POP";let e=d(),t=null==e?null:e-c;c=e,l&&l({action:o,location:f.location,delta:t})}function p(e,t){o="PUSH";let a=ha(f.location,e,t);c=d()+1;let n=ma(a,c),u=f.createHref(a);try{r.pushState(n,"",u)}catch(p){if(p instanceof DOMException&&"DataCloneError"===p.name)throw p;s.location.assign(u)}i&&l&&l({action:o,location:f.location,delta:1})}function m(e,t){o="REPLACE";let a=ha(f.location,e,t);c=d();let n=ma(a,c),s=f.createHref(a);r.replaceState(n,"",s),i&&l&&l({action:o,location:f.location,delta:0})}function h(e){return function(e,t=!1){let a="http://localhost";"undefined"!=typeof window&&(a="null"!==window.location.origin?window.location.origin:window.location.href);ua(a,"No window.location.(origin|href) available to create URL");let n="string"==typeof e?e:fa(e);n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=a+n);return new URL(n,a)}(e)}let f={get action(){return o},get location(){return e(s,r)},listen(e){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(ca,u),l=e,()=>{s.removeEventListener(ca,u),l=null}},createHref:e=>t(s,e),createURL:h,encodeLocation(e){let t=h(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:p,replace:m,go:e=>r.go(e)};return f}(function(e,t){let{pathname:a,search:n,hash:s}=e.location;return ha("",{pathname:a,search:n,hash:s},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"==typeof t?t:fa(t)},0,e)}function ua(e,t){if(!1===e||null==e)throw new Error(t)}function pa(e,t){if(!e){"undefined"!=typeof console&&console.warn(t);try{throw new Error(t)}catch(a){}}}function ma(e,t){return{usr:e.state,key:e.key,idx:t}}function ha(e,t,a=null,n){return{pathname:"string"==typeof e?e:e.pathname,search:"",hash:"",..."string"==typeof t?ga(t):t,state:a,key:t&&t.key||n||Math.random().toString(36).substring(2,10)}}function fa({pathname:e="/",search:t="",hash:a=""}){return t&&"?"!==t&&(e+="?"===t.charAt(0)?t:"?"+t),a&&"#"!==a&&(e+="#"===a.charAt(0)?a:"#"+a),e}function ga(e){let t={};if(e){let a=e.indexOf("#");a>=0&&(t.hash=e.substring(a),e=e.substring(0,a));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function xa(e,t,a="/"){return function(e,t,a,n){let s="string"==typeof t?ga(t):t,i=Ta(s.pathname||"/",a);if(null==i)return null;let r=va(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let a=e.length===t.length&&e.slice(0,-1).every((e,a)=>e===t[a]);return a?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(r);let o=null;for(let l=0;null==o&&l<r.length;++l){let e=_a(i);o=Ra(r[l],e,n)}return o}(e,t,a,!1)}function va(e,t=[],a=[],n=""){let s=(e,s,i)=>{let r={relativePath:void 0===i?e.path||"":i,caseSensitive:!0===e.caseSensitive,childrenIndex:s,route:e};r.relativePath.startsWith("/")&&(ua(r.relativePath.startsWith(n),`Absolute route path "${r.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),r.relativePath=r.relativePath.slice(n.length));let o=Ia([n,r.relativePath]),l=a.concat(r);e.children&&e.children.length>0&&(ua(!0!==e.index,`Index routes must not have child routes. Please remove all child routes from route path "${o}".`),va(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:Sa(o,e.index),routesMeta:l})};return e.forEach((e,t)=>{if(""!==e.path&&e.path?.includes("?"))for(let a of ba(e.path))s(e,t,a);else s(e,t)}),t}function ba(e){let t=e.split("/");if(0===t.length)return[];let[a,...n]=t,s=a.endsWith("?"),i=a.replace(/\?$/,"");if(0===n.length)return s?[i,""]:[i];let r=ba(n.join("/")),o=[];return o.push(...r.map(e=>""===e?i:[i,e].join("/"))),s&&o.push(...r),o.map(t=>e.startsWith("/")&&""===t?"/":t)}var ya=/^:[\w-]+$/,wa=3,ja=2,ka=1,Na=10,Ea=-2,Ca=e=>"*"===e;function Sa(e,t){let a=e.split("/"),n=a.length;return a.some(Ca)&&(n+=Ea),t&&(n+=ja),a.filter(e=>!Ca(e)).reduce((e,t)=>e+(ya.test(t)?wa:""===t?ka:Na),n)}function Ra(e,t,a=!1){let{routesMeta:n}=e,s={},i="/",r=[];for(let o=0;o<n.length;++o){let e=n[o],l=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",d=Aa({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),u=e.route;if(!d&&l&&a&&!n[n.length-1].route.index&&(d=Aa({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!d)return null;Object.assign(s,d.params),r.push({params:s,pathname:Ia([i,d.pathname]),pathnameBase:Pa(Ia([i,d.pathnameBase])),route:u}),"/"!==d.pathnameBase&&(i=Ia([i,d.pathnameBase]))}return r}function Aa(e,t){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[a,n]=function(e,t=!1,a=!0){pa("*"===e||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,a)=>(n.push({paramName:t,isOptional:null!=a}),a?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(n.push({paramName:"*"}),s+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?s+="\\/*$":""!==e&&"/"!==e&&(s+="(?:(?=\\/|$))");let i=new RegExp(s,t?void 0:"i");return[i,n]}(e.path,e.caseSensitive,e.end),s=t.match(a);if(!s)return null;let i=s[0],r=i.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:n.reduce((e,{paramName:t,isOptional:a},n)=>{if("*"===t){let e=o[n]||"";r=i.slice(0,i.length-e.length).replace(/(.)\/+$/,"$1")}const s=o[n];return e[t]=a&&!s?void 0:(s||"").replace(/%2F/g,"/"),e},{}),pathname:i,pathnameBase:r,pattern:e}}function _a(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return pa(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Ta(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let a=t.endsWith("/")?t.length-1:t.length,n=e.charAt(a);return n&&"/"!==n?null:e.slice(a)||"/"}function za(e,t,a,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${a}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Ma(e){let t=function(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}(e);return t.map((e,a)=>a===t.length-1?e.pathname:e.pathnameBase)}function Oa(e,t,a,n=!1){let s;"string"==typeof e?s=ga(e):(s={...e},ua(!s.pathname||!s.pathname.includes("?"),za("?","pathname","search",s)),ua(!s.pathname||!s.pathname.includes("#"),za("#","pathname","hash",s)),ua(!s.search||!s.search.includes("#"),za("#","search","hash",s)));let i,r=""===e||""===s.pathname,o=r?"/":s.pathname;if(null==o)i=a;else{let e=t.length-1;if(!n&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;s.pathname=t.join("/")}i=e>=0?t[e]:"/"}let l=function(e,t="/"){let{pathname:a,search:n="",hash:s=""}="string"==typeof e?ga(e):e,i=a?a.startsWith("/")?a:function(e,t){let a=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?a.length>1&&a.pop():"."!==e&&a.push(e)}),a.length>1?a.join("/"):"/"}(a,t):t;return{pathname:i,search:Da(n),hash:Fa(s)}}(s,i),c=o&&"/"!==o&&o.endsWith("/"),d=(r||"."===o)&&a.endsWith("/");return l.pathname.endsWith("/")||!c&&!d||(l.pathname+="/"),l}var Ia=e=>e.join("/").replace(/\/\/+/g,"/"),Pa=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Da=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",Fa=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";var La=["POST","PUT","PATCH","DELETE"];new Set(La);var Ua=["GET",...La];new Set(Ua);var $a=e.createContext(null);$a.displayName="DataRouter";var Va=e.createContext(null);Va.displayName="DataRouterState";var Ba=e.createContext({isTransitioning:!1});Ba.displayName="ViewTransition",e.createContext(new Map).displayName="Fetchers",e.createContext(null).displayName="Await";var Ha=e.createContext(null);Ha.displayName="Navigation";var qa=e.createContext(null);qa.displayName="Location";var Ga=e.createContext({outlet:null,matches:[],isDataRoute:!1});Ga.displayName="Route";var Ka=e.createContext(null);function Za(){return null!=e.useContext(qa)}function Qa(){return ua(Za(),"useLocation() may be used only in the context of a <Router> component."),e.useContext(qa).location}Ka.displayName="RouteError";var Wa="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Ya(t){e.useContext(Ha).static||e.useLayoutEffect(t)}function Xa(){let{isDataRoute:t}=e.useContext(Ga);return t?function(){let{router:t}=function(t){let a=e.useContext($a);return ua(a,on(t)),a}("useNavigate"),a=ln("useNavigate"),n=e.useRef(!1);return Ya(()=>{n.current=!0}),e.useCallback(async(e,s={})=>{pa(n.current,Wa),n.current&&("number"==typeof e?t.navigate(e):await t.navigate(e,{fromRouteId:a,...s}))},[t,a])}():function(){ua(Za(),"useNavigate() may be used only in the context of a <Router> component.");let t=e.useContext($a),{basename:a,navigator:n}=e.useContext(Ha),{matches:s}=e.useContext(Ga),{pathname:i}=Qa(),r=JSON.stringify(Ma(s)),o=e.useRef(!1);return Ya(()=>{o.current=!0}),e.useCallback((e,s={})=>{if(pa(o.current,Wa),!o.current)return;if("number"==typeof e)return void n.go(e);let l=Oa(e,JSON.parse(r),i,"path"===s.relative);null==t&&"/"!==a&&(l.pathname="/"===l.pathname?a:Ia([a,l.pathname])),(s.replace?n.replace:n.push)(l,s.state,s)},[a,n,r,i,t])}()}function Ja(){let{matches:t}=e.useContext(Ga),a=t[t.length-1];return a?a.params:{}}function en(t,{relative:a}={}){let{matches:n}=e.useContext(Ga),{pathname:s}=Qa(),i=JSON.stringify(Ma(n));return e.useMemo(()=>Oa(t,JSON.parse(i),s,"path"===a),[t,i,s,a])}function tn(t,a,n,s){ua(Za(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=e.useContext(Ha),{matches:r}=e.useContext(Ga),o=r[r.length-1],l=o?o.params:{},c=o?o.pathname:"/",d=o?o.pathnameBase:"/",u=o&&o.route;{let e=u&&u.path||"";dn(c,!u||e.endsWith("*")||e.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${e}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="${e}"> to <Route path="${"/"===e?"*":`${e}/*`}">.`)}let p,m=Qa();if(a){let e="string"==typeof a?ga(a):a;ua("/"===d||e.pathname?.startsWith(d),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${e.pathname}" was given in the \`location\` prop.`),p=e}else p=m;let h=p.pathname||"/",f=h;if("/"!==d){let e=d.replace(/^\//,"").split("/");f="/"+h.replace(/^\//,"").split("/").slice(e.length).join("/")}let g=xa(t,{pathname:f});pa(u||null!=g,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),pa(null==g||void 0!==g[g.length-1].route.element||void 0!==g[g.length-1].route.Component||void 0!==g[g.length-1].route.lazy,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let x=function(t,a=[],n=null){if(null==t){if(!n)return null;if(n.errors)t=n.matches;else{if(0!==a.length||n.initialized||!(n.matches.length>0))return null;t=n.matches}}let s=t,i=n?.errors;if(null!=i){let e=s.findIndex(e=>e.route.id&&void 0!==i?.[e.route.id]);ua(e>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),s=s.slice(0,Math.min(s.length,e+1))}let r=!1,o=-1;if(n)for(let e=0;e<s.length;e++){let t=s[e];if((t.route.HydrateFallback||t.route.hydrateFallbackElement)&&(o=e),t.route.id){let{loaderData:e,errors:a}=n,i=t.route.loader&&!e.hasOwnProperty(t.route.id)&&(!a||void 0===a[t.route.id]);if(t.route.lazy||i){r=!0,s=o>=0?s.slice(0,o+1):[s[0]];break}}}return s.reduceRight((t,l,c)=>{let d,u=!1,p=null,m=null;n&&(d=i&&l.route.id?i[l.route.id]:void 0,p=l.route.errorElement||nn,r&&(o<0&&0===c?(dn("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),u=!0,m=null):o===c&&(u=!0,m=l.route.hydrateFallbackElement||null)));let h=a.concat(s.slice(0,c+1)),f=()=>{let a;return a=d?p:u?m:l.route.Component?e.createElement(l.route.Component,null):l.route.element?l.route.element:t,e.createElement(rn,{match:l,routeContext:{outlet:t,matches:h,isDataRoute:null!=n},children:a})};return n&&(l.route.ErrorBoundary||l.route.errorElement||0===c)?e.createElement(sn,{location:n.location,revalidation:n.revalidation,component:p,error:d,children:f(),routeContext:{outlet:null,matches:h,isDataRoute:!0}}):f()},null)}(g&&g.map(e=>Object.assign({},e,{params:Object.assign({},l,e.params),pathname:Ia([d,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:Ia([d,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),r,n,s);return a&&x?e.createElement(qa.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},x):x}function an(){let t=function(){let t=e.useContext(Ka),a=function(t){let a=e.useContext(Va);return ua(a,on(t)),a}("useRouteError"),n=ln("useRouteError");if(void 0!==t)return t;return a.errors?.[n]}(),a=function(e){return null!=e&&"number"==typeof e.status&&"string"==typeof e.statusText&&"boolean"==typeof e.internal&&"data"in e}(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:s},r={padding:"2px 4px",backgroundColor:s},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=e.createElement(e.Fragment,null,e.createElement("p",null,"💿 Hey developer 👋"),e.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",e.createElement("code",{style:r},"ErrorBoundary")," or"," ",e.createElement("code",{style:r},"errorElement")," prop on your route.")),e.createElement(e.Fragment,null,e.createElement("h2",null,"Unexpected Application Error!"),e.createElement("h3",{style:{fontStyle:"italic"}},a),n?e.createElement("pre",{style:i},n):null,o)}e.createContext(null);var nn=e.createElement(an,null),sn=class extends e.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?e.createElement(Ga.Provider,{value:this.props.routeContext},e.createElement(Ka.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function rn({routeContext:t,match:a,children:n}){let s=e.useContext($a);return s&&s.static&&s.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=a.route.id),e.createElement(Ga.Provider,{value:t},n)}function on(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ln(t){let a=function(t){let a=e.useContext(Ga);return ua(a,on(t)),a}(t),n=a.matches[a.matches.length-1];return ua(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}var cn={};function dn(e,t,a){t||cn[e]||(cn[e]=!0,pa(!1,a))}function un({to:t,replace:a,state:n,relative:s}){ua(Za(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=e.useContext(Ha);pa(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:r}=e.useContext(Ga),{pathname:o}=Qa(),l=Xa(),c=Oa(t,Ma(r),o,"path"===s),d=JSON.stringify(c);return e.useEffect(()=>{l(JSON.parse(d),{replace:a,state:n,relative:s})},[l,d,s,a,n]),null}function pn(e){ua(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function mn({basename:t="/",children:a=null,location:n,navigationType:s="POP",navigator:i,static:r=!1}){ua(!Za(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),l=e.useMemo(()=>({basename:o,navigator:i,static:r,future:{}}),[o,i,r]);"string"==typeof n&&(n=ga(n));let{pathname:c="/",search:d="",hash:u="",state:p=null,key:m="default"}=n,h=e.useMemo(()=>{let e=Ta(c,o);return null==e?null:{location:{pathname:e,search:d,hash:u,state:p,key:m},navigationType:s}},[o,c,d,u,p,m,s]);return pa(null!=h,`<Router basename="${o}"> is not able to match the URL "${c}${d}${u}" because it does not start with the basename, so the <Router> won't render anything.`),null==h?null:e.createElement(Ha.Provider,{value:l},e.createElement(qa.Provider,{children:a,value:h}))}function hn({children:e,location:t}){return tn(fn(e),t)}function fn(t,a=[]){let n=[];return e.Children.forEach(t,(t,s)=>{if(!e.isValidElement(t))return;let i=[...a,s];if(t.type===e.Fragment)return void n.push.apply(n,fn(t.props.children,i));ua(t.type===pn,`[${"string"==typeof t.type?t.type:t.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ua(!t.props.index||!t.props.children,"An index route cannot have child routes.");let r={id:t.props.id||i.join("-"),caseSensitive:t.props.caseSensitive,element:t.props.element,Component:t.props.Component,index:t.props.index,path:t.props.path,loader:t.props.loader,action:t.props.action,hydrateFallbackElement:t.props.hydrateFallbackElement,HydrateFallback:t.props.HydrateFallback,errorElement:t.props.errorElement,ErrorBoundary:t.props.ErrorBoundary,hasErrorBoundary:!0===t.props.hasErrorBoundary||null!=t.props.ErrorBoundary||null!=t.props.errorElement,shouldRevalidate:t.props.shouldRevalidate,handle:t.props.handle,lazy:t.props.lazy};t.props.children&&(r.children=fn(t.props.children,i)),n.push(r)}),n}e.memo(function({routes:e,future:t,state:a}){return tn(e,void 0,a,t)});var gn="get",xn="application/x-www-form-urlencoded";function vn(e){return null!=e&&"string"==typeof e.tagName}function bn(e=""){return new URLSearchParams("string"==typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,a)=>{let n=e[a];return t.concat(Array.isArray(n)?n.map(e=>[a,e]):[[a,n]])},[]))}var yn=null;var wn=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function jn(e){return null==e||wn.has(e)?e:(pa(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${xn}"`),null)}function kn(e,t){let a,n,s,i,r;if(vn(o=e)&&"form"===o.tagName.toLowerCase()){let r=e.getAttribute("action");n=r?Ta(r,t):null,a=e.getAttribute("method")||gn,s=jn(e.getAttribute("enctype"))||xn,i=new FormData(e)}else if(function(e){return vn(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return vn(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let r=e.form;if(null==r)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let o=e.getAttribute("formaction")||r.getAttribute("action");if(n=o?Ta(o,t):null,a=e.getAttribute("formmethod")||r.getAttribute("method")||gn,s=jn(e.getAttribute("formenctype"))||jn(r.getAttribute("enctype"))||xn,i=new FormData(r,e),!function(){if(null===yn)try{new FormData(document.createElement("form"),0),yn=!1}catch(e){yn=!0}return yn}()){let{name:t,type:a,value:n}=e;if("image"===a){let e=t?`${t}.`:"";i.append(`${e}x`,"0"),i.append(`${e}y`,"0")}else t&&i.append(t,n)}}else{if(vn(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');a=gn,n=null,s=xn,r=e}var o;return i&&"text/plain"===s&&(r=i,i=void 0),{action:n,method:a.toLowerCase(),encType:s,formData:i,body:r}}function Nn(e,t){if(!1===e||null==e)throw new Error(t)}function En(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"==typeof e.imageSrcSet&&"string"==typeof e.imageSizes:"string"==typeof e.rel&&"string"==typeof e.href)}async function Cn(e,t,a){return function(e,t){let a=new Set;return new Set(t),e.reduce((e,t)=>{let n=JSON.stringify(function(e){let t={},a=Object.keys(e).sort();for(let n of a)t[n]=e[n];return t}(t));return a.has(n)||(a.add(n),e.push({key:n,link:t})),e},[])}((await Promise.all(e.map(async e=>{let n=t.routes[e.route.id];if(n){let e=await async function(e,t){if(e.id in t)return t[e.id];try{let a=await import(e.module);return t[e.id]=a,a}catch(a){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(a),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}(n,a);return e.links?e.links():[]}return[]}))).flat(1).filter(En).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?{...e,rel:"prefetch",as:"style"}:{...e,rel:"prefetch"}))}function Sn(e,t,a,n,s,i){let r=(e,t)=>!a[t]||e.route.id!==a[t].route.id,o=(e,t)=>a[t].pathname!==e.pathname||a[t].route.path?.endsWith("*")&&a[t].params["*"]!==e.params["*"];return"assets"===i?t.filter((e,t)=>r(e,t)||o(e,t)):"data"===i?t.filter((t,i)=>{let l=n.routes[t.route.id];if(!l||!l.hasLoader)return!1;if(r(t,i)||o(t,i))return!0;if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:a[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"==typeof n)return n}return!0}):[]}function Rn(e,t,{includeHydrateFallback:a}={}){return n=e.map(e=>{let n=t.routes[e.route.id];if(!n)return[];let s=[n.module];return n.clientActionModule&&(s=s.concat(n.clientActionModule)),n.clientLoaderModule&&(s=s.concat(n.clientLoaderModule)),a&&n.hydrateFallbackModule&&(s=s.concat(n.hydrateFallbackModule)),n.imports&&(s=s.concat(n.imports)),s}).flat(1),[...new Set(n)];var n}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function An(){let t=e.useContext($a);return Nn(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}var _n=e.createContext(void 0);function Tn(){let t=e.useContext(_n);return Nn(t,"You must render this element inside a <HydratedRouter> element"),t}function zn(e,t){return a=>{e&&e(a),a.defaultPrevented||t(a)}}function Mn({page:t,...a}){let{router:n}=An(),s=e.useMemo(()=>xa(n.routes,t,n.basename),[n.routes,t,n.basename]);return s?e.createElement(On,{page:t,matches:s,...a}):null}function On({page:t,matches:a,...n}){let s=Qa(),{manifest:i,routeModules:r}=Tn(),{basename:o}=An(),{loaderData:l,matches:c}=function(){let t=e.useContext(Va);return Nn(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}(),d=e.useMemo(()=>Sn(t,a,c,i,s,"data"),[t,a,c,i,s]),u=e.useMemo(()=>Sn(t,a,c,i,s,"assets"),[t,a,c,i,s]),p=e.useMemo(()=>{if(t===s.pathname+s.search+s.hash)return[];let e=new Set,n=!1;if(a.forEach(t=>{let a=i.routes[t.route.id];a&&a.hasLoader&&(!d.some(e=>e.route.id===t.route.id)&&t.route.id in l&&r[t.route.id]?.shouldRevalidate||a.hasClientLoader?n=!0:e.add(t.route.id))}),0===e.size)return[];let c=function(e,t){let a="string"==typeof e?new URL(e,"undefined"==typeof window?"server://singlefetch/":window.location.origin):e;return"/"===a.pathname?a.pathname="_root.data":t&&"/"===Ta(a.pathname,t)?a.pathname=`${t.replace(/\/$/,"")}/_root.data`:a.pathname=`${a.pathname.replace(/\/$/,"")}.data`,a}(t,o);return n&&e.size>0&&c.searchParams.set("_routes",a.filter(t=>e.has(t.route.id)).map(e=>e.route.id).join(",")),[c.pathname+c.search]},[o,l,s,i,d,a,t,r]),m=e.useMemo(()=>Rn(u,i),[u,i]),h=function(t){let{manifest:a,routeModules:n}=Tn(),[s,i]=e.useState([]);return e.useEffect(()=>{let e=!1;return Cn(t,a,n).then(t=>{e||i(t)}),()=>{e=!0}},[t,a,n]),s}(u);return e.createElement(e.Fragment,null,p.map(t=>e.createElement("link",{key:t,rel:"prefetch",as:"fetch",href:t,...n})),m.map(t=>e.createElement("link",{key:t,rel:"modulepreload",href:t,...n})),h.map(({key:t,link:a})=>e.createElement("link",{key:t,...a})))}function In(...e){return t=>{e.forEach(e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)})}}_n.displayName="FrameworkContext";var Pn="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;try{Pn&&(window.__reactRouterVersion="7.6.3")}catch(Cv){}function Dn({basename:t,children:a,window:n}){let s=e.useRef();null==s.current&&(s.current=da({window:n,v5Compat:!0}));let i=s.current,[r,o]=e.useState({action:i.action,location:i.location}),l=e.useCallback(t=>{e.startTransition(()=>o(t))},[o]);return e.useLayoutEffect(()=>i.listen(l),[i,l]),e.createElement(mn,{basename:t,children:a,location:r.location,navigationType:r.action,navigator:i})}var Fn=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ln=e.forwardRef(function({onClick:t,discover:a="render",prefetch:n="none",relative:s,reloadDocument:i,replace:r,state:o,target:l,to:c,preventScrollReset:d,viewTransition:u,...p},m){let h,{basename:f}=e.useContext(Ha),g="string"==typeof c&&Fn.test(c),x=!1;if("string"==typeof c&&g&&(h=c,Pn))try{let e=new URL(window.location.href),t=c.startsWith("//")?new URL(e.protocol+c):new URL(c),a=Ta(t.pathname,f);t.origin===e.origin&&null!=a?c=a+t.search+t.hash:x=!0}catch(Cv){pa(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let v=function(t,{relative:a}={}){ua(Za(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=e.useContext(Ha),{hash:i,pathname:r,search:o}=en(t,{relative:a}),l=r;return"/"!==n&&(l="/"===r?n:Ia([n,r])),s.createHref({pathname:l,search:o,hash:i})}(c,{relative:s}),[b,y,w]=function(t,a){let n=e.useContext(_n),[s,i]=e.useState(!1),[r,o]=e.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:d,onMouseLeave:u,onTouchStart:p}=a,m=e.useRef(null);e.useEffect(()=>{if("render"===t&&o(!0),"viewport"===t){let e=new IntersectionObserver(e=>{e.forEach(e=>{o(e.isIntersecting)})},{threshold:.5});return m.current&&e.observe(m.current),()=>{e.disconnect()}}},[t]),e.useEffect(()=>{if(s){let e=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(e)}}},[s]);let h=()=>{i(!0)},f=()=>{i(!1),o(!1)};return n?"intent"!==t?[r,m,{}]:[r,m,{onFocus:zn(l,h),onBlur:zn(c,f),onMouseEnter:zn(d,h),onMouseLeave:zn(u,f),onTouchStart:zn(p,h)}]:[!1,m,{}]}(n,p),j=function(t,{target:a,replace:n,state:s,preventScrollReset:i,relative:r,viewTransition:o}={}){let l=Xa(),c=Qa(),d=en(t,{relative:r});return e.useCallback(e=>{if(function(e,t){return!(0!==e.button||t&&"_self"!==t||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e))}(e,a)){e.preventDefault();let a=void 0!==n?n:fa(c)===fa(d);l(t,{replace:a,state:s,preventScrollReset:i,relative:r,viewTransition:o})}},[c,l,d,n,s,a,t,i,r,o])}(c,{replace:r,state:o,target:l,preventScrollReset:d,relative:s,viewTransition:u});let k=e.createElement("a",{...p,...w,href:h||v,onClick:x||i?t:function(e){t&&t(e),e.defaultPrevented||j(e)},ref:In(m,y),target:l,"data-discover":g||"render"!==a?void 0:"true"});return b&&!g?e.createElement(e.Fragment,null,k,e.createElement(Mn,{page:v})):k});Ln.displayName="Link",e.forwardRef(function({"aria-current":t="page",caseSensitive:a=!1,className:n="",end:s=!1,style:i,to:r,viewTransition:o,children:l,...c},d){let u=en(r,{relative:c.relative}),p=Qa(),m=e.useContext(Va),{navigator:h,basename:f}=e.useContext(Ha),g=null!=m&&function(t,a={}){let n=e.useContext(Ba);ua(null!=n,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=$n("useViewTransitionState"),i=en(t,{relative:a.relative});if(!n.isTransitioning)return!1;let r=Ta(n.currentLocation.pathname,s)||n.currentLocation.pathname,o=Ta(n.nextLocation.pathname,s)||n.nextLocation.pathname;return null!=Aa(i.pathname,o)||null!=Aa(i.pathname,r)}(u)&&!0===o,x=h.encodeLocation?h.encodeLocation(u).pathname:u.pathname,v=p.pathname,b=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;a||(v=v.toLowerCase(),b=b?b.toLowerCase():null,x=x.toLowerCase()),b&&f&&(b=Ta(b,f)||b);const y="/"!==x&&x.endsWith("/")?x.length-1:x.length;let w,j=v===x||!s&&v.startsWith(x)&&"/"===v.charAt(y),k=null!=b&&(b===x||!s&&b.startsWith(x)&&"/"===b.charAt(x.length)),N={isActive:j,isPending:k,isTransitioning:g},E=j?t:void 0;w="function"==typeof n?n(N):[n,j?"active":null,k?"pending":null,g?"transitioning":null].filter(Boolean).join(" ");let C="function"==typeof i?i(N):i;return e.createElement(Ln,{...c,"aria-current":E,className:w,ref:d,style:C,to:r,viewTransition:o},"function"==typeof l?l(N):l)}).displayName="NavLink";var Un=e.forwardRef(({discover:t="render",fetcherKey:a,navigate:n,reloadDocument:s,replace:i,state:r,method:o=gn,action:l,onSubmit:c,relative:d,preventScrollReset:u,viewTransition:p,...m},h)=>{let f=function(){let{router:t}=$n("useSubmit"),{basename:a}=e.useContext(Ha),n=ln("useRouteId");return e.useCallback(async(e,s={})=>{let{action:i,method:r,encType:o,formData:l,body:c}=kn(e,a);if(!1===s.navigate){let e=s.fetcherKey||Hn();await t.fetch(e,n,s.action||i,{preventScrollReset:s.preventScrollReset,formData:l,body:c,formMethod:s.method||r,formEncType:s.encType||o,flushSync:s.flushSync})}else await t.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:l,body:c,formMethod:s.method||r,formEncType:s.encType||o,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[t,a,n])}(),g=function(t,{relative:a}={}){let{basename:n}=e.useContext(Ha),s=e.useContext(Ga);ua(s,"useFormAction must be used inside a RouteContext");let[i]=s.matches.slice(-1),r={...en(t||".",{relative:a})},o=Qa();if(null==t){r.search=o.search;let e=new URLSearchParams(r.search),t=e.getAll("index");if(t.some(e=>""===e)){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let a=e.toString();r.search=a?`?${a}`:""}}t&&"."!==t||!i.route.index||(r.search=r.search?r.search.replace(/^\?/,"?index&"):"?index");"/"!==n&&(r.pathname="/"===r.pathname?n:Ia([n,r.pathname]));return fa(r)}(l,{relative:d}),x="get"===o.toLowerCase()?"get":"post",v="string"==typeof l&&Fn.test(l);return e.createElement("form",{ref:h,method:x,action:g,onSubmit:s?c:e=>{if(c&&c(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,s=t?.getAttribute("formmethod")||o;f(t||e.currentTarget,{fetcherKey:a,method:s,navigate:n,replace:i,state:r,relative:d,preventScrollReset:u,viewTransition:p})},...m,"data-discover":v||"render"!==t?void 0:"true"})});function $n(t){let a=e.useContext($a);return ua(a,function(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}(t)),a}function Vn(t){pa("undefined"!=typeof URLSearchParams,"You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let a=e.useRef(bn(t)),n=e.useRef(!1),s=Qa(),i=e.useMemo(()=>function(e,t){let a=bn(e);return t&&t.forEach((e,n)=>{a.has(n)||t.getAll(n).forEach(e=>{a.append(n,e)})}),a}(s.search,n.current?null:a.current),[s.search]),r=Xa(),o=e.useCallback((e,t)=>{const a=bn("function"==typeof e?e(i):e);n.current=!0,r("?"+a,t)},[r,i]);return[i,o]}Un.displayName="Form";var Bn=0,Hn=()=>`__${String(++Bn)}__`;const qn=e=>`/${e.startsWith("/")?e.slice(1):e}`,Gn=new class{#q;#f;#d;#G;#K;#Z;#Q;#W;constructor(e={}){this.#q=e.queryCache||new Ft,this.#f=e.mutationCache||new Ut,this.#d=e.defaultOptions||{},this.#G=new Map,this.#K=new Map,this.#Z=0}mount(){this.#Z++,1===this.#Z&&(this.#Q=Et.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#q.onFocus())}),this.#W=Ct.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#q.onOnline())}))}unmount(){this.#Z--,0===this.#Z&&(this.#Q?.(),this.#Q=void 0,this.#W?.(),this.#W=void 0)}isFetching(e){return this.#q.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#f.findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return this.#q.get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),a=this.#q.build(this,t),n=a.state.data;return void 0===n?this.fetchQuery(e):(e.revalidateIfStale&&a.isStaleByTime(ot(t.staleTime,a))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return this.#q.findAll(e).map(({queryKey:e,state:t})=>[e,t.data])}setQueryData(e,t,a){const n=this.defaultQueryOptions({queryKey:e}),s=this.#q.get(n.queryHash),i=s?.state.data,r=function(e,t){return"function"==typeof e?e(t):e}(t,i);if(void 0!==r)return this.#q.build(this,n).setData(r,{...a,manual:!0})}setQueriesData(e,t,a){return Ot.batch(()=>this.#q.findAll(e).map(({queryKey:e})=>[e,this.setQueryData(e,t,a)]))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return this.#q.get(t.queryHash)?.state}removeQueries(e){const t=this.#q;Ot.batch(()=>{t.findAll(e).forEach(e=>{t.remove(e)})})}resetQueries(e,t){const a=this.#q;return Ot.batch(()=>(a.findAll(e).forEach(e=>{e.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const a={revert:!0,...t},n=Ot.batch(()=>this.#q.findAll(e).map(e=>e.cancel(a)));return Promise.all(n).then(st).catch(st)}invalidateQueries(e,t={}){return Ot.batch(()=>(this.#q.findAll(e).forEach(e=>{e.invalidate()}),"none"===e?.refetchType?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t)))}refetchQueries(e,t={}){const a={...t,cancelRefetch:t.cancelRefetch??!0},n=Ot.batch(()=>this.#q.findAll(e).filter(e=>!e.isDisabled()&&!e.isStatic()).map(e=>{let t=e.fetch(void 0,a);return a.throwOnError||(t=t.catch(st)),"paused"===e.state.fetchStatus?Promise.resolve():t}));return Promise.all(n).then(st)}fetchQuery(e){const t=this.defaultQueryOptions(e);void 0===t.retry&&(t.retry=!1);const a=this.#q.build(this,t);return a.isStaleByTime(ot(t.staleTime,a))?a.fetch(t):Promise.resolve(a.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(st).catch(st)}fetchInfiniteQuery(e){return e.behavior=Vt(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(st).catch(st)}ensureInfiniteQueryData(e){return e.behavior=Vt(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Ct.isOnline()?this.#f.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#q}getMutationCache(){return this.#f}getDefaultOptions(){return this.#d}setDefaultOptions(e){this.#d=e}setQueryDefaults(e,t){this.#G.set(pt(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...this.#G.values()],a={};return t.forEach(t=>{mt(e,t.queryKey)&&Object.assign(a,t.defaultOptions)}),a}setMutationDefaults(e,t){this.#K.set(pt(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...this.#K.values()],a={};return t.forEach(t=>{mt(e,t.mutationKey)&&Object.assign(a,t.defaultOptions)}),a}defaultQueryOptions(e){if(e._defaulted)return e;const t={...this.#d.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=ut(t.queryKey,t)),void 0===t.refetchOnReconnect&&(t.refetchOnReconnect="always"!==t.networkMode),void 0===t.throwOnError&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===jt&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#d.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#q.clear(),this.#f.clear()}}({defaultOptions:{queries:{retry:1,staleTime:3e5}}});async function Kn(e,t={}){const a=e.startsWith("http")?e:qn(e),n={headers:{"Content-Type":"application/json",...t.headers},credentials:"include",...t};!n.body||n.body instanceof FormData||(n.body=JSON.stringify(n.body));const s=await fetch(a,n);if(!s.ok){let e=`HTTP error! status: ${s.status}`;try{const t=await s.json();e=t.message||t.error||e}catch{}throw new Error(e)}if(204===s.status||"0"===s.headers.get("content-length"))return null;const i=s.headers.get("content-type");return i&&i.includes("application/json")?await s.json():await s.text()}var Zn=(e,t,a,n,s,i,r,o)=>{let l=document.documentElement,c=["light","dark"];function d(t){(Array.isArray(e)?e:[e]).forEach(e=>{let a="class"===e,n=a&&i?s.map(e=>i[e]||e):s;a?(l.classList.remove(...n),l.classList.add(i&&i[t]?i[t]:t)):l.setAttribute(e,t)}),function(e){o&&c.includes(e)&&(l.style.colorScheme=e)}(t)}if(n)d(n);else try{let e=localStorage.getItem(t)||a;d(r&&"system"===e?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e)}catch(u){}},Qn=e.createContext(void 0),Wn={setTheme:e=>{},themes:[]};e.memo(({forcedTheme:t,storageKey:a,attribute:n,enableSystem:s,enableColorScheme:i,defaultTheme:r,value:o,themes:l,nonce:c,scriptProps:d})=>{let u=JSON.stringify([n,a,r,t,l,o,s,i]).slice(1,-1);return e.createElement("script",{...d,suppressHydrationWarning:!0,nonce:"undefined"==typeof window?c:"",dangerouslySetInnerHTML:{__html:`(${Zn.toString()})(${u})`}})});const Yn=Array(12).fill(0),Xn=({visible:e,className:t})=>a.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},a.createElement("div",{className:"sonner-spinner"},Yn.map((e,t)=>a.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${t}`})))),Jn=a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},a.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),es=a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},a.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),ts=a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},a.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),as=a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},a.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),ns=a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},a.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}));let ss=1;const is=new class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;const{message:a,...n}=e,s="number"==typeof(null==e?void 0:e.id)||(null==(t=e.id)?void 0:t.length)>0?e.id:ss++,i=this.toasts.find(e=>e.id===s),r=void 0===e.dismissible||e.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),i?this.toasts=this.toasts.map(t=>t.id===s?(this.publish({...t,...e,id:s,title:a}),{...t,...e,id:s,dismissible:r,title:a}):t):this.addToast({title:a,...n,dismissible:r,id:s}),s},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(t=>t({id:e,dismiss:!0})))):this.toasts.forEach(e=>{this.subscribers.forEach(t=>t({id:e.id,dismiss:!0}))}),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let n;void 0!==t.loading&&(n=this.create({...t,promise:e,type:"loading",message:t.loading,description:"function"!=typeof t.description?t.description:void 0}));const s=Promise.resolve(e instanceof Function?e():e);let i,r=void 0!==n;const o=s.then(async e=>{i=["resolve",e];if(a.isValidElement(e))r=!1,this.create({id:n,type:"default",message:e});else if(rs(e)&&!e.ok){r=!1;const s="function"==typeof t.error?await t.error(`HTTP error! status: ${e.status}`):t.error,i="function"==typeof t.description?await t.description(`HTTP error! status: ${e.status}`):t.description,o="object"==typeof s&&!a.isValidElement(s)?s:{message:s};this.create({id:n,type:"error",description:i,...o})}else if(e instanceof Error){r=!1;const s="function"==typeof t.error?await t.error(e):t.error,i="function"==typeof t.description?await t.description(e):t.description,o="object"==typeof s&&!a.isValidElement(s)?s:{message:s};this.create({id:n,type:"error",description:i,...o})}else if(void 0!==t.success){r=!1;const s="function"==typeof t.success?await t.success(e):t.success,i="function"==typeof t.description?await t.description(e):t.description,o="object"==typeof s&&!a.isValidElement(s)?s:{message:s};this.create({id:n,type:"success",description:i,...o})}}).catch(async e=>{if(i=["reject",e],void 0!==t.error){r=!1;const s="function"==typeof t.error?await t.error(e):t.error,i="function"==typeof t.description?await t.description(e):t.description,o="object"==typeof s&&!a.isValidElement(s)?s:{message:s};this.create({id:n,type:"error",description:i,...o})}}).finally(()=>{r&&(this.dismiss(n),n=void 0),null==t.finally||t.finally.call(t)}),l=()=>new Promise((e,t)=>o.then(()=>"reject"===i[0]?t(i[1]):e(i[1])).catch(t));return"string"!=typeof n&&"number"!=typeof n?{unwrap:l}:Object.assign(n,{unwrap:l})},this.custom=(e,t)=>{const a=(null==t?void 0:t.id)||ss++;return this.create({jsx:e(a),id:a,...t}),a},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},rs=e=>e&&"object"==typeof e&&"ok"in e&&"boolean"==typeof e.ok&&"status"in e&&"number"==typeof e.status,os=(e,t)=>{const a=(null==t?void 0:t.id)||ss++;return is.addToast({title:e,...t,id:a}),a},ls=Object.assign(os,{success:is.success,info:is.info,warning:is.warning,error:is.error,custom:is.custom,message:is.message,promise:is.promise,dismiss:is.dismiss,loading:is.loading},{getHistory:()=>is.toasts,getToasts:()=>is.getActiveToasts()});function cs(e){return void 0!==e.label}!function(e){if("undefined"==typeof document)return;let t=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css",t.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");const ds=3,us=14;function ps(...e){return e.filter(Boolean).join(" ")}const ms=e=>{var t,n,s,i,r,o,l,c,d;const{invert:u,toast:p,unstyled:m,interacting:h,setHeights:f,visibleToasts:g,heights:x,index:v,toasts:b,expanded:y,removeToast:w,defaultRichColors:j,closeButton:k,style:N,cancelButtonStyle:E,actionButtonStyle:C,className:S="",descriptionClassName:R="",duration:A,position:_,gap:T,expandByDefault:z,classNames:M,icons:O,closeButtonAriaLabel:I="Close toast"}=e,[P,D]=a.useState(null),[F,L]=a.useState(null),[U,$]=a.useState(!1),[V,B]=a.useState(!1),[H,q]=a.useState(!1),[G,K]=a.useState(!1),[Z,Q]=a.useState(!1),[W,Y]=a.useState(0),[X,J]=a.useState(0),ee=a.useRef(p.duration||A||4e3),te=a.useRef(null),ae=a.useRef(null),ne=0===v,se=v+1<=g,ie=p.type,re=!1!==p.dismissible,oe=p.className||"",le=p.descriptionClassName||"",ce=a.useMemo(()=>x.findIndex(e=>e.toastId===p.id)||0,[x,p.id]),de=a.useMemo(()=>{var e;return null!=(e=p.closeButton)?e:k},[p.closeButton,k]),ue=a.useMemo(()=>p.duration||A||4e3,[p.duration,A]),pe=a.useRef(0),me=a.useRef(0),he=a.useRef(0),fe=a.useRef(null),[ge,xe]=_.split("-"),ve=a.useMemo(()=>x.reduce((e,t,a)=>a>=ce?e:e+t.height,0),[x,ce]),be=(()=>{const[e,t]=a.useState(document.hidden);return a.useEffect(()=>{const e=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",e),()=>window.removeEventListener("visibilitychange",e)},[]),e})(),ye=p.invert||u,we="loading"===ie;me.current=a.useMemo(()=>ce*T+ve,[ce,ve]),a.useEffect(()=>{ee.current=ue},[ue]),a.useEffect(()=>{$(!0)},[]),a.useEffect(()=>{const e=ae.current;if(e){const t=e.getBoundingClientRect().height;return J(t),f(e=>[{toastId:p.id,height:t,position:p.position},...e]),()=>f(e=>e.filter(e=>e.toastId!==p.id))}},[f,p.id]),a.useLayoutEffect(()=>{if(!U)return;const e=ae.current,t=e.style.height;e.style.height="auto";const a=e.getBoundingClientRect().height;e.style.height=t,J(a),f(e=>e.find(e=>e.toastId===p.id)?e.map(e=>e.toastId===p.id?{...e,height:a}:e):[{toastId:p.id,height:a,position:p.position},...e])},[U,p.title,p.description,f,p.id,p.jsx,p.action,p.cancel]);const je=a.useCallback(()=>{B(!0),Y(me.current),f(e=>e.filter(e=>e.toastId!==p.id)),setTimeout(()=>{w(p)},200)},[p,w,f,me]);a.useEffect(()=>{if(p.promise&&"loading"===ie||p.duration===1/0||"loading"===p.type)return;let e;return y||h||be?(()=>{if(he.current<pe.current){const e=(new Date).getTime()-pe.current;ee.current=ee.current-e}he.current=(new Date).getTime()})():ee.current!==1/0&&(pe.current=(new Date).getTime(),e=setTimeout(()=>{null==p.onAutoClose||p.onAutoClose.call(p,p),je()},ee.current)),()=>clearTimeout(e)},[y,h,p,ie,be,je]),a.useEffect(()=>{p.delete&&(je(),null==p.onDismiss||p.onDismiss.call(p,p))},[je,p.delete]);const ke=p.icon||(null==O?void 0:O[ie])||(e=>{switch(e){case"success":return Jn;case"info":return ts;case"warning":return es;case"error":return as;default:return null}})(ie);var Ne,Ee,Ce,Se;return a.createElement("li",{tabIndex:0,ref:ae,className:ps(S,oe,null==M?void 0:M.toast,null==p||null==(t=p.classNames)?void 0:t.toast,null==M?void 0:M.default,null==M?void 0:M[ie],null==p||null==(n=p.classNames)?void 0:n[ie]),"data-sonner-toast":"","data-rich-colors":null!=(Ne=p.richColors)?Ne:j,"data-styled":!Boolean(p.jsx||p.unstyled||m),"data-mounted":U,"data-promise":Boolean(p.promise),"data-swiped":Z,"data-removed":V,"data-visible":se,"data-y-position":ge,"data-x-position":xe,"data-index":v,"data-front":ne,"data-swiping":H,"data-dismissible":re,"data-type":ie,"data-invert":ye,"data-swipe-out":G,"data-swipe-direction":F,"data-expanded":Boolean(y||z&&U),style:{"--index":v,"--toasts-before":v,"--z-index":b.length-v,"--offset":`${V?W:me.current}px`,"--initial-height":z?"auto":`${X}px`,...N,...p.style},onDragEnd:()=>{q(!1),D(null),fe.current=null},onPointerDown:e=>{2!==e.button&&!we&&re&&(te.current=new Date,Y(me.current),e.target.setPointerCapture(e.pointerId),"BUTTON"!==e.target.tagName&&(q(!0),fe.current={x:e.clientX,y:e.clientY}))},onPointerUp:()=>{var e,t,a;if(G||!re)return;fe.current=null;const n=Number((null==(e=ae.current)?void 0:e.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),s=Number((null==(t=ae.current)?void 0:t.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),i=(new Date).getTime()-(null==(a=te.current)?void 0:a.getTime()),r="x"===P?n:s,o=Math.abs(r)/i;if(Math.abs(r)>=45||o>.11)return Y(me.current),null==p.onDismiss||p.onDismiss.call(p,p),L("x"===P?n>0?"right":"left":s>0?"down":"up"),je(),void K(!0);var l,c;null==(l=ae.current)||l.style.setProperty("--swipe-amount-x","0px"),null==(c=ae.current)||c.style.setProperty("--swipe-amount-y","0px"),Q(!1),q(!1),D(null)},onPointerMove:t=>{var a,n,s;if(!fe.current||!re)return;if((null==(a=window.getSelection())?void 0:a.toString().length)>0)return;const i=t.clientY-fe.current.y,r=t.clientX-fe.current.x;var o;const l=null!=(o=e.swipeDirections)?o:function(e){const[t,a]=e.split("-"),n=[];return t&&n.push(t),a&&n.push(a),n}(_);!P&&(Math.abs(r)>1||Math.abs(i)>1)&&D(Math.abs(r)>Math.abs(i)?"x":"y");let c={x:0,y:0};const d=e=>1/(1.5+Math.abs(e)/20);if("y"===P){if(l.includes("top")||l.includes("bottom"))if(l.includes("top")&&i<0||l.includes("bottom")&&i>0)c.y=i;else{const e=i*d(i);c.y=Math.abs(e)<Math.abs(i)?e:i}}else if("x"===P&&(l.includes("left")||l.includes("right")))if(l.includes("left")&&r<0||l.includes("right")&&r>0)c.x=r;else{const e=r*d(r);c.x=Math.abs(e)<Math.abs(r)?e:r}(Math.abs(c.x)>0||Math.abs(c.y)>0)&&Q(!0),null==(n=ae.current)||n.style.setProperty("--swipe-amount-x",`${c.x}px`),null==(s=ae.current)||s.style.setProperty("--swipe-amount-y",`${c.y}px`)}},de&&!p.jsx&&"loading"!==ie?a.createElement("button",{"aria-label":I,"data-disabled":we,"data-close-button":!0,onClick:we||!re?()=>{}:()=>{je(),null==p.onDismiss||p.onDismiss.call(p,p)},className:ps(null==M?void 0:M.closeButton,null==p||null==(s=p.classNames)?void 0:s.closeButton)},null!=(Ee=null==O?void 0:O.close)?Ee:ns):null,(ie||p.icon||p.promise)&&null!==p.icon&&(null!==(null==O?void 0:O[ie])||p.icon)?a.createElement("div",{"data-icon":"",className:ps(null==M?void 0:M.icon,null==p||null==(i=p.classNames)?void 0:i.icon)},p.promise||"loading"===p.type&&!p.icon?p.icon||((null==O?void 0:O.loading)?a.createElement("div",{className:ps(null==M?void 0:M.loader,null==p||null==(Se=p.classNames)?void 0:Se.loader,"sonner-loader"),"data-visible":"loading"===ie},O.loading):a.createElement(Xn,{className:ps(null==M?void 0:M.loader,null==p||null==(Ce=p.classNames)?void 0:Ce.loader),visible:"loading"===ie})):null,"loading"!==p.type?ke:null):null,a.createElement("div",{"data-content":"",className:ps(null==M?void 0:M.content,null==p||null==(r=p.classNames)?void 0:r.content)},a.createElement("div",{"data-title":"",className:ps(null==M?void 0:M.title,null==p||null==(o=p.classNames)?void 0:o.title)},p.jsx?p.jsx:"function"==typeof p.title?p.title():p.title),p.description?a.createElement("div",{"data-description":"",className:ps(R,le,null==M?void 0:M.description,null==p||null==(l=p.classNames)?void 0:l.description)},"function"==typeof p.description?p.description():p.description):null),a.isValidElement(p.cancel)?p.cancel:p.cancel&&cs(p.cancel)?a.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||E,onClick:e=>{cs(p.cancel)&&re&&(null==p.cancel.onClick||p.cancel.onClick.call(p.cancel,e),je())},className:ps(null==M?void 0:M.cancelButton,null==p||null==(c=p.classNames)?void 0:c.cancelButton)},p.cancel.label):null,a.isValidElement(p.action)?p.action:p.action&&cs(p.action)?a.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||C,onClick:e=>{cs(p.action)&&(null==p.action.onClick||p.action.onClick.call(p.action,e),e.defaultPrevented||je())},className:ps(null==M?void 0:M.actionButton,null==p||null==(d=p.classNames)?void 0:d.actionButton)},p.action.label):null)};function hs(){if("undefined"==typeof window)return"ltr";if("undefined"==typeof document)return"ltr";const e=document.documentElement.getAttribute("dir");return"auto"!==e&&e?e:window.getComputedStyle(document.documentElement).direction}function fs(e,t){const a={};return[e,t].forEach((e,t)=>{const n=1===t,s=n?"--mobile-offset":"--offset",i=n?"16px":"24px";function r(e){["top","right","bottom","left"].forEach(t=>{a[`${s}-${t}`]="number"==typeof e?`${e}px`:e})}"number"==typeof e||"string"==typeof e?r(e):"object"==typeof e?["top","right","bottom","left"].forEach(t=>{void 0===e[t]?a[`${s}-${t}`]=i:a[`${s}-${t}`]="number"==typeof e[t]?`${e[t]}px`:e[t]}):r(i)}),a}const gs=a.forwardRef(function(e,t){const{invert:n,position:s="bottom-right",hotkey:i=["altKey","KeyT"],expand:r,closeButton:o,className:l,offset:c,mobileOffset:d,theme:u="light",richColors:p,duration:m,style:h,visibleToasts:f=ds,toastOptions:g,dir:x=hs(),gap:v=us,icons:b,containerAriaLabel:y="Notifications"}=e,[w,j]=a.useState([]),k=a.useMemo(()=>Array.from(new Set([s].concat(w.filter(e=>e.position).map(e=>e.position)))),[w,s]),[N,E]=a.useState([]),[C,S]=a.useState(!1),[R,A]=a.useState(!1),[_,T]=a.useState("system"!==u?u:"undefined"!=typeof window&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),z=a.useRef(null),M=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),O=a.useRef(null),I=a.useRef(!1),P=a.useCallback(e=>{j(t=>{var a;return(null==(a=t.find(t=>t.id===e.id))?void 0:a.delete)||is.dismiss(e.id),t.filter(({id:t})=>t!==e.id)})},[]);return a.useEffect(()=>is.subscribe(e=>{e.dismiss?requestAnimationFrame(()=>{j(t=>t.map(t=>t.id===e.id?{...t,delete:!0}:t))}):setTimeout(()=>{Se.flushSync(()=>{j(t=>{const a=t.findIndex(t=>t.id===e.id);return-1!==a?[...t.slice(0,a),{...t[a],...e},...t.slice(a+1)]:[e,...t]})})})}),[w]),a.useEffect(()=>{if("system"!==u)return void T(u);if("system"===u&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?T("dark"):T("light")),"undefined"==typeof window)return;const e=window.matchMedia("(prefers-color-scheme: dark)");try{e.addEventListener("change",({matches:e})=>{T(e?"dark":"light")})}catch(t){e.addListener(({matches:e})=>{try{T(e?"dark":"light")}catch(Cv){console.error(Cv)}})}},[u]),a.useEffect(()=>{w.length<=1&&S(!1)},[w]),a.useEffect(()=>{const e=e=>{var t;var a;i.every(t=>e[t]||e.code===t)&&(S(!0),null==(a=z.current)||a.focus());"Escape"!==e.code||document.activeElement!==z.current&&!(null==(t=z.current)?void 0:t.contains(document.activeElement))||S(!1)};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[i]),a.useEffect(()=>{if(z.current)return()=>{O.current&&(O.current.focus({preventScroll:!0}),O.current=null,I.current=!1)}},[z.current]),a.createElement("section",{ref:t,"aria-label":`${y} ${M}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},k.map((t,s)=>{var i;const[u,y]=t.split("-");return w.length?a.createElement("ol",{key:t,dir:"auto"===x?hs():x,tabIndex:-1,ref:z,className:l,"data-sonner-toaster":!0,"data-sonner-theme":_,"data-y-position":u,"data-x-position":y,style:{"--front-toast-height":`${(null==(i=N[0])?void 0:i.height)||0}px`,"--width":"356px","--gap":`${v}px`,...h,...fs(c,d)},onBlur:e=>{I.current&&!e.currentTarget.contains(e.relatedTarget)&&(I.current=!1,O.current&&(O.current.focus({preventScroll:!0}),O.current=null))},onFocus:e=>{e.target instanceof HTMLElement&&"false"===e.target.dataset.dismissible||I.current||(I.current=!0,O.current=e.relatedTarget)},onMouseEnter:()=>S(!0),onMouseMove:()=>S(!0),onMouseLeave:()=>{R||S(!1)},onDragEnd:()=>S(!1),onPointerDown:e=>{e.target instanceof HTMLElement&&"false"===e.target.dataset.dismissible||A(!0)},onPointerUp:()=>A(!1)},w.filter(e=>!e.position&&0===s||e.position===t).map((s,i)=>{var l,c;return a.createElement(ms,{key:s.id,icons:b,index:i,toast:s,defaultRichColors:p,duration:null!=(l=null==g?void 0:g.duration)?l:m,className:null==g?void 0:g.className,descriptionClassName:null==g?void 0:g.descriptionClassName,invert:n,visibleToasts:f,closeButton:null!=(c=null==g?void 0:g.closeButton)?c:o,interacting:R,position:t,style:null==g?void 0:g.style,unstyled:null==g?void 0:g.unstyled,classNames:null==g?void 0:g.classNames,cancelButtonStyle:null==g?void 0:g.cancelButtonStyle,actionButtonStyle:null==g?void 0:g.actionButtonStyle,closeButtonAriaLabel:null==g?void 0:g.closeButtonAriaLabel,removeToast:P,toasts:w.filter(e=>e.position==s.position),heights:N.filter(e=>e.position==s.position),setHeights:E,expandByDefault:r,gap:v,expanded:C,swipeDirections:e.swipeDirections})})):null}))}),xs=({...a})=>{const{theme:n="system"}=null!=(s=e.useContext(Qn))?s:Wn;var s;return t.jsx(gs,{theme:n,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...a})},vs={async checkAuth(){try{const e=await fetch(qn("/api/auth/verify"),{credentials:"include"});if(e.ok){const t=await e.json();return{user:t.data?.user||t.user,isAuthenticated:!0}}return{user:null,isAuthenticated:!1}}catch(e){return console.error("Auth check failed:",e),{user:null,isAuthenticated:!1}}},async login(e,t){const a=await fetch(qn("/api/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:e,password:t})});if(!a.ok){const e=await a.json();throw new Error(e.message||"Login failed")}const n=await a.json();return n.data?.user||n.user},async logout(){try{await fetch(qn("/api/auth/logout"),{method:"POST",credentials:"include"})}catch(e){console.error("Logout error:",e)}},async register(e,t,a){const n=await fetch(qn("/api/auth/register"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:e,password:t,name:a})});if(!n.ok){const e=await n.json();throw new Error(e.message||"Registration failed")}const s=await n.json();return s.data?.user||s.user}};function bs(e,t,a){function n(a,n){var s;Object.defineProperty(a,"_zod",{value:a._zod??{},enumerable:!1}),(s=a._zod).traits??(s.traits=new Set),a._zod.traits.add(e),t(a,n);for(const e in r.prototype)e in a||Object.defineProperty(a,e,{value:r.prototype[e].bind(a)});a._zod.constr=r,a._zod.def=n}const s=a?.Parent??Object;class i extends s{}function r(e){var t;const s=a?.Parent?new i:this;n(s,e),(t=s._zod).deferred??(t.deferred=[]);for(const a of s._zod.deferred)a();return s}return Object.defineProperty(i,"name",{value:e}),Object.defineProperty(r,"init",{value:n}),Object.defineProperty(r,Symbol.hasInstance,{value:t=>!!(a?.Parent&&t instanceof a.Parent)||t?._zod?.traits?.has(e)}),Object.defineProperty(r,"name",{value:e}),r}class ys extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const ws={};function js(e){return ws}function ks(e,t){return"bigint"==typeof t?t.toString():t}function Ns(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function Es(e){return null==e}function Cs(e){const t=e.startsWith("^")?1:0,a=e.endsWith("$")?e.length-1:e.length;return e.slice(t,a)}function Ss(e,t,a){Object.defineProperty(e,t,{get(){{const n=a();return e[t]=n,n}},set(a){Object.defineProperty(e,t,{value:a})},configurable:!0})}function Rs(e,t,a){Object.defineProperty(e,t,{value:a,writable:!0,enumerable:!0,configurable:!0})}function As(e){return JSON.stringify(e)}const _s=Error.captureStackTrace?Error.captureStackTrace:(...e)=>{};function Ts(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}const zs=Ns(()=>{if("undefined"!=typeof navigator&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{return new Function(""),!0}catch(e){return!1}});function Ms(e){if(!1===Ts(e))return!1;const t=e.constructor;if(void 0===t)return!0;const a=t.prototype;return!1!==Ts(a)&&!1!==Object.prototype.hasOwnProperty.call(a,"isPrototypeOf")}const Os=new Set(["string","number","symbol"]);function Is(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Ps(e,t,a){const n=new e._zod.constr(t??e._zod.def);return t&&!a?.parent||(n._zod.parent=e),n}function Ds(e){const t=e;if(!t)return{};if("string"==typeof t)return{error:()=>t};if(void 0!==t?.message){if(void 0!==t?.error)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,"string"==typeof t.error?{...t,error:()=>t.error}:t}const Fs={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function Ls(e,t=0){for(let a=t;a<e.issues.length;a++)if(!0!==e.issues[a]?.continue)return!0;return!1}function Us(e,t){return t.map(t=>{var a;return(a=t).path??(a.path=[]),t.path.unshift(e),t})}function $s(e){return"string"==typeof e?e:e?.message}function Vs(e,t,a){const n={...e,path:e.path??[]};if(!e.message){const s=$s(e.inst?._zod.def?.error?.(e))??$s(t?.error?.(e))??$s(a.customError?.(e))??$s(a.localeError?.(e))??"Invalid input";n.message=s}return delete n.inst,delete n.continue,t?.reportInput||delete n.input,n}function Bs(e){return Array.isArray(e)?"array":"string"==typeof e?"string":"unknown"}function Hs(...e){const[t,a,n]=e;return"string"==typeof t?{message:t,code:"custom",input:a,inst:n}:{...t}}const qs=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),Object.defineProperty(e,"message",{get:()=>JSON.stringify(t,ks,2),enumerable:!0}),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},Gs=bs("$ZodError",qs),Ks=bs("$ZodError",qs,{Parent:Error});const Zs=e=>(t,a,n,s)=>{const i=n?Object.assign(n,{async:!1}):{async:!1},r=t._zod.run({value:a,issues:[]},i);if(r instanceof Promise)throw new ys;if(r.issues.length){const t=new(s?.Err??e)(r.issues.map(e=>Vs(e,i,js())));throw _s(t,s?.callee),t}return r.value},Qs=Zs(Ks),Ws=e=>async(t,a,n,s)=>{const i=n?Object.assign(n,{async:!0}):{async:!0};let r=t._zod.run({value:a,issues:[]},i);if(r instanceof Promise&&(r=await r),r.issues.length){const t=new(s?.Err??e)(r.issues.map(e=>Vs(e,i,js())));throw _s(t,s?.callee),t}return r.value},Ys=Ws(Ks),Xs=e=>(t,a,n)=>{const s=n?{...n,async:!1}:{async:!1},i=t._zod.run({value:a,issues:[]},s);if(i instanceof Promise)throw new ys;return i.issues.length?{success:!1,error:new(e??Gs)(i.issues.map(e=>Vs(e,s,js())))}:{success:!0,data:i.value}},Js=Xs(Ks),ei=e=>async(t,a,n)=>{const s=n?Object.assign(n,{async:!0}):{async:!0};let i=t._zod.run({value:a,issues:[]},s);return i instanceof Promise&&(i=await i),i.issues.length?{success:!1,error:new e(i.issues.map(e=>Vs(e,s,js())))}:{success:!0,data:i.value}},ti=ei(Ks),ai=/^[cC][^\s-]{8,}$/,ni=/^[0-9a-z]+$/,si=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,ii=/^[0-9a-vA-V]{20}$/,ri=/^[A-Za-z0-9]{27}$/,oi=/^[a-zA-Z0-9_-]{21}$/,li=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,ci=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,di=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/,ui=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/;const pi=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,mi=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,hi=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,fi=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,gi=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,xi=/^[A-Za-z0-9_-]*$/,vi=/^([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+$/,bi=/^\+(?:[0-9]){6,14}[0-9]$/,yi="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",wi=new RegExp(`^${yi}$`);function ji(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return"number"==typeof e.precision?-1===e.precision?`${t}`:0===e.precision?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}const ki=/^\d+$/,Ni=/^-?\d+(?:\.\d+)?/i,Ei=/true|false/i,Ci=/^[^A-Z]*$/,Si=/^[^a-z]*$/,Ri=bs("$ZodCheck",(e,t)=>{var a;e._zod??(e._zod={}),e._zod.def=t,(a=e._zod).onattach??(a.onattach=[])}),Ai={number:"number",bigint:"bigint",object:"date"},_i=bs("$ZodCheckLessThan",(e,t)=>{Ri.init(e,t);const a=Ai[typeof t.value];e._zod.onattach.push(e=>{const a=e._zod.bag,n=(t.inclusive?a.maximum:a.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<n&&(t.inclusive?a.maximum=t.value:a.exclusiveMaximum=t.value)}),e._zod.check=n=>{(t.inclusive?n.value<=t.value:n.value<t.value)||n.issues.push({origin:a,code:"too_big",maximum:t.value,input:n.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),Ti=bs("$ZodCheckGreaterThan",(e,t)=>{Ri.init(e,t);const a=Ai[typeof t.value];e._zod.onattach.push(e=>{const a=e._zod.bag,n=(t.inclusive?a.minimum:a.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>n&&(t.inclusive?a.minimum=t.value:a.exclusiveMinimum=t.value)}),e._zod.check=n=>{(t.inclusive?n.value>=t.value:n.value>t.value)||n.issues.push({origin:a,code:"too_small",minimum:t.value,input:n.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),zi=bs("$ZodCheckMultipleOf",(e,t)=>{Ri.init(e,t),e._zod.onattach.push(e=>{var a;(a=e._zod.bag).multipleOf??(a.multipleOf=t.value)}),e._zod.check=a=>{if(typeof a.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");("bigint"==typeof a.value?a.value%t.value===BigInt(0):0===function(e,t){const a=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,s=a>n?a:n;return Number.parseInt(e.toFixed(s).replace(".",""))%Number.parseInt(t.toFixed(s).replace(".",""))/10**s}(a.value,t.value))||a.issues.push({origin:typeof a.value,code:"not_multiple_of",divisor:t.value,input:a.value,inst:e,continue:!t.abort})}}),Mi=bs("$ZodCheckNumberFormat",(e,t)=>{Ri.init(e,t),t.format=t.format||"float64";const a=t.format?.includes("int"),n=a?"int":"number",[s,i]=Fs[t.format];e._zod.onattach.push(e=>{const n=e._zod.bag;n.format=t.format,n.minimum=s,n.maximum=i,a&&(n.pattern=ki)}),e._zod.check=r=>{const o=r.value;if(a){if(!Number.isInteger(o))return void r.issues.push({expected:n,format:t.format,code:"invalid_type",input:o,inst:e});if(!Number.isSafeInteger(o))return void(o>0?r.issues.push({input:o,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:n,continue:!t.abort}):r.issues.push({input:o,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:n,continue:!t.abort}))}o<s&&r.issues.push({origin:"number",input:o,code:"too_small",minimum:s,inclusive:!0,inst:e,continue:!t.abort}),o>i&&r.issues.push({origin:"number",input:o,code:"too_big",maximum:i,inst:e})}}),Oi=bs("$ZodCheckMaxLength",(e,t)=>{var a;Ri.init(e,t),(a=e._zod.def).when??(a.when=e=>{const t=e.value;return!Es(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{const a=e._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<a&&(e._zod.bag.maximum=t.maximum)}),e._zod.check=a=>{const n=a.value;if(n.length<=t.maximum)return;const s=Bs(n);a.issues.push({origin:s,code:"too_big",maximum:t.maximum,inclusive:!0,input:n,inst:e,continue:!t.abort})}}),Ii=bs("$ZodCheckMinLength",(e,t)=>{var a;Ri.init(e,t),(a=e._zod.def).when??(a.when=e=>{const t=e.value;return!Es(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{const a=e._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>a&&(e._zod.bag.minimum=t.minimum)}),e._zod.check=a=>{const n=a.value;if(n.length>=t.minimum)return;const s=Bs(n);a.issues.push({origin:s,code:"too_small",minimum:t.minimum,inclusive:!0,input:n,inst:e,continue:!t.abort})}}),Pi=bs("$ZodCheckLengthEquals",(e,t)=>{var a;Ri.init(e,t),(a=e._zod.def).when??(a.when=e=>{const t=e.value;return!Es(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{const a=e._zod.bag;a.minimum=t.length,a.maximum=t.length,a.length=t.length}),e._zod.check=a=>{const n=a.value,s=n.length;if(s===t.length)return;const i=Bs(n),r=s>t.length;a.issues.push({origin:i,...r?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:a.value,inst:e,continue:!t.abort})}}),Di=bs("$ZodCheckStringFormat",(e,t)=>{var a,n;Ri.init(e,t),e._zod.onattach.push(e=>{const a=e._zod.bag;a.format=t.format,t.pattern&&(a.patterns??(a.patterns=new Set),a.patterns.add(t.pattern))}),t.pattern?(a=e._zod).check??(a.check=a=>{t.pattern.lastIndex=0,t.pattern.test(a.value)||a.issues.push({origin:"string",code:"invalid_format",format:t.format,input:a.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(n=e._zod).check??(n.check=()=>{})}),Fi=bs("$ZodCheckRegex",(e,t)=>{Di.init(e,t),e._zod.check=a=>{t.pattern.lastIndex=0,t.pattern.test(a.value)||a.issues.push({origin:"string",code:"invalid_format",format:"regex",input:a.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),Li=bs("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=Ci),Di.init(e,t)}),Ui=bs("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=Si),Di.init(e,t)}),$i=bs("$ZodCheckIncludes",(e,t)=>{Ri.init(e,t);const a=Is(t.includes),n=new RegExp("number"==typeof t.position?`^.{${t.position}}${a}`:a);t.pattern=n,e._zod.onattach.push(e=>{const t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(n)}),e._zod.check=a=>{a.value.includes(t.includes,t.position)||a.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:a.value,inst:e,continue:!t.abort})}}),Vi=bs("$ZodCheckStartsWith",(e,t)=>{Ri.init(e,t);const a=new RegExp(`^${Is(t.prefix)}.*`);t.pattern??(t.pattern=a),e._zod.onattach.push(e=>{const t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(a)}),e._zod.check=a=>{a.value.startsWith(t.prefix)||a.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:a.value,inst:e,continue:!t.abort})}}),Bi=bs("$ZodCheckEndsWith",(e,t)=>{Ri.init(e,t);const a=new RegExp(`.*${Is(t.suffix)}$`);t.pattern??(t.pattern=a),e._zod.onattach.push(e=>{const t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(a)}),e._zod.check=a=>{a.value.endsWith(t.suffix)||a.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:a.value,inst:e,continue:!t.abort})}}),Hi=bs("$ZodCheckOverwrite",(e,t)=>{Ri.init(e,t),e._zod.check=e=>{e.value=t.tx(e.value)}});class qi{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if("function"==typeof e)return e(this,{execution:"sync"}),void e(this,{execution:"async"});const t=e.split("\n").filter(e=>e),a=Math.min(...t.map(e=>e.length-e.trimStart().length)),n=t.map(e=>e.slice(a)).map(e=>" ".repeat(2*this.indent)+e);for(const s of n)this.content.push(s)}compile(){const e=Function,t=this?.args;return new e(...t,[...(this?.content??[""]).map(e=>`  ${e}`)].join("\n"))}}const Gi={major:4,minor:0,patch:5},Ki=bs("$ZodType",(e,t)=>{var a;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=Gi;const n=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&n.unshift(e);for(const s of n)for(const t of s._zod.onattach)t(e);if(0===n.length)(a=e._zod).deferred??(a.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{const t=(e,t,a)=>{let n,s=Ls(e);for(const i of t){if(i._zod.def.when){if(!i._zod.def.when(e))continue}else if(s)continue;const t=e.issues.length,r=i._zod.check(e);if(r instanceof Promise&&!1===a?.async)throw new ys;if(n||r instanceof Promise)n=(n??Promise.resolve()).then(async()=>{await r;e.issues.length!==t&&(s||(s=Ls(e,t)))});else{if(e.issues.length===t)continue;s||(s=Ls(e,t))}}return n?n.then(()=>e):e};e._zod.run=(a,s)=>{const i=e._zod.parse(a,s);if(i instanceof Promise){if(!1===s.async)throw new ys;return i.then(e=>t(e,n,s))}return t(i,n,s)}}e["~standard"]={validate:t=>{try{const a=Js(e,t);return a.success?{value:a.data}:{issues:a.error?.issues}}catch(a){return ti(e,t).then(e=>e.success?{value:e.data}:{issues:e.error?.issues})}},vendor:"zod",version:1}}),Zi=bs("$ZodString",(e,t)=>{var a;Ki.init(e,t),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??(a=e._zod.bag,new RegExp(`^${a?`[\\s\\S]{${a?.minimum??0},${a?.maximum??""}}`:"[\\s\\S]*"}$`)),e._zod.parse=(a,n)=>{if(t.coerce)try{a.value=String(a.value)}catch(s){}return"string"==typeof a.value||a.issues.push({expected:"string",code:"invalid_type",input:a.value,inst:e}),a}}),Qi=bs("$ZodStringFormat",(e,t)=>{Di.init(e,t),Zi.init(e,t)}),Wi=bs("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=ci),Qi.init(e,t)}),Yi=bs("$ZodUUID",(e,t)=>{if(t.version){const e={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(void 0===e)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=di(e))}else t.pattern??(t.pattern=di());Qi.init(e,t)}),Xi=bs("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=ui),Qi.init(e,t)}),Ji=bs("$ZodURL",(e,t)=>{Qi.init(e,t),e._zod.check=a=>{try{const n=a.value,s=new URL(n),i=s.href;return t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(s.hostname)||a.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:vi.source,input:a.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(s.protocol.endsWith(":")?s.protocol.slice(0,-1):s.protocol)||a.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:a.value,inst:e,continue:!t.abort})),void(!n.endsWith("/")&&i.endsWith("/")?a.value=i.slice(0,-1):a.value=i)}catch(n){a.issues.push({code:"invalid_format",format:"url",input:a.value,inst:e,continue:!t.abort})}}}),er=bs("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),Qi.init(e,t)}),tr=bs("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=oi),Qi.init(e,t)}),ar=bs("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=ai),Qi.init(e,t)}),nr=bs("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=ni),Qi.init(e,t)}),sr=bs("$ZodULID",(e,t)=>{t.pattern??(t.pattern=si),Qi.init(e,t)}),ir=bs("$ZodXID",(e,t)=>{t.pattern??(t.pattern=ii),Qi.init(e,t)}),rr=bs("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=ri),Qi.init(e,t)}),or=bs("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=function(e){const t=ji({precision:e.precision}),a=["Z"];e.local&&a.push(""),e.offset&&a.push("([+-]\\d{2}:\\d{2})");const n=`${t}(?:${a.join("|")})`;return new RegExp(`^${yi}T(?:${n})$`)}(t)),Qi.init(e,t)}),lr=bs("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=wi),Qi.init(e,t)}),cr=bs("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=new RegExp(`^${ji(t)}$`)),Qi.init(e,t)}),dr=bs("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=li),Qi.init(e,t)}),ur=bs("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=pi),Qi.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.format="ipv4"})}),pr=bs("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=mi),Qi.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.format="ipv6"}),e._zod.check=a=>{try{new URL(`http://[${a.value}]`)}catch{a.issues.push({code:"invalid_format",format:"ipv6",input:a.value,inst:e,continue:!t.abort})}}}),mr=bs("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=hi),Qi.init(e,t)}),hr=bs("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=fi),Qi.init(e,t),e._zod.check=a=>{const[n,s]=a.value.split("/");try{if(!s)throw new Error;const e=Number(s);if(`${e}`!==s)throw new Error;if(e<0||e>128)throw new Error;new URL(`http://[${n}]`)}catch{a.issues.push({code:"invalid_format",format:"cidrv6",input:a.value,inst:e,continue:!t.abort})}}});function fr(e){if(""===e)return!0;if(e.length%4!=0)return!1;try{return atob(e),!0}catch{return!1}}const gr=bs("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=gi),Qi.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.contentEncoding="base64"}),e._zod.check=a=>{fr(a.value)||a.issues.push({code:"invalid_format",format:"base64",input:a.value,inst:e,continue:!t.abort})}});const xr=bs("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=xi),Qi.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.contentEncoding="base64url"}),e._zod.check=a=>{(function(e){if(!xi.test(e))return!1;const t=e.replace(/[-_]/g,e=>"-"===e?"+":"/");return fr(t.padEnd(4*Math.ceil(t.length/4),"="))})(a.value)||a.issues.push({code:"invalid_format",format:"base64url",input:a.value,inst:e,continue:!t.abort})}}),vr=bs("$ZodE164",(e,t)=>{t.pattern??(t.pattern=bi),Qi.init(e,t)});const br=bs("$ZodJWT",(e,t)=>{Qi.init(e,t),e._zod.check=a=>{(function(e,t=null){try{const a=e.split(".");if(3!==a.length)return!1;const[n]=a;if(!n)return!1;const s=JSON.parse(atob(n));return!("typ"in s&&"JWT"!==s?.typ||!s.alg||t&&(!("alg"in s)||s.alg!==t))}catch{return!1}})(a.value,t.alg)||a.issues.push({code:"invalid_format",format:"jwt",input:a.value,inst:e,continue:!t.abort})}}),yr=bs("$ZodNumber",(e,t)=>{Ki.init(e,t),e._zod.pattern=e._zod.bag.pattern??Ni,e._zod.parse=(a,n)=>{if(t.coerce)try{a.value=Number(a.value)}catch(r){}const s=a.value;if("number"==typeof s&&!Number.isNaN(s)&&Number.isFinite(s))return a;const i="number"==typeof s?Number.isNaN(s)?"NaN":Number.isFinite(s)?void 0:"Infinity":void 0;return a.issues.push({expected:"number",code:"invalid_type",input:s,inst:e,...i?{received:i}:{}}),a}}),wr=bs("$ZodNumber",(e,t)=>{Mi.init(e,t),yr.init(e,t)}),jr=bs("$ZodBoolean",(e,t)=>{Ki.init(e,t),e._zod.pattern=Ei,e._zod.parse=(a,n)=>{if(t.coerce)try{a.value=Boolean(a.value)}catch(i){}const s=a.value;return"boolean"==typeof s||a.issues.push({expected:"boolean",code:"invalid_type",input:s,inst:e}),a}}),kr=bs("$ZodAny",(e,t)=>{Ki.init(e,t),e._zod.parse=e=>e}),Nr=bs("$ZodUnknown",(e,t)=>{Ki.init(e,t),e._zod.parse=e=>e}),Er=bs("$ZodNever",(e,t)=>{Ki.init(e,t),e._zod.parse=(t,a)=>(t.issues.push({expected:"never",code:"invalid_type",input:t.value,inst:e}),t)});function Cr(e,t,a){e.issues.length&&t.issues.push(...Us(a,e.issues)),t.value[a]=e.value}const Sr=bs("$ZodArray",(e,t)=>{Ki.init(e,t),e._zod.parse=(a,n)=>{const s=a.value;if(!Array.isArray(s))return a.issues.push({expected:"array",code:"invalid_type",input:s,inst:e}),a;a.value=Array(s.length);const i=[];for(let e=0;e<s.length;e++){const r=s[e],o=t.element._zod.run({value:r,issues:[]},n);o instanceof Promise?i.push(o.then(t=>Cr(t,a,e))):Cr(o,a,e)}return i.length?Promise.all(i).then(()=>a):a}});function Rr(e,t,a){e.issues.length&&t.issues.push(...Us(a,e.issues)),t.value[a]=e.value}function Ar(e,t,a,n){e.issues.length?void 0===n[a]?t.value[a]=a in n?void 0:e.value:t.issues.push(...Us(a,e.issues)):void 0===e.value?a in n&&(t.value[a]=void 0):t.value[a]=e.value}const _r=bs("$ZodObject",(e,t)=>{Ki.init(e,t);const a=Ns(()=>{const e=Object.keys(t.shape);for(const s of e)if(!(t.shape[s]instanceof Ki))throw new Error(`Invalid element at key "${s}": expected a Zod schema`);const a=(n=t.shape,Object.keys(n).filter(e=>"optional"===n[e]._zod.optin&&"optional"===n[e]._zod.optout));var n;return{shape:t.shape,keys:e,keySet:new Set(e),numKeys:e.length,optionalKeys:new Set(a)}});Ss(e._zod,"propValues",()=>{const e=t.shape,a={};for(const t in e){const n=e[t]._zod;if(n.values){a[t]??(a[t]=new Set);for(const e of n.values)a[t].add(e)}}return a});let n;const s=Ts,i=!ws.jitless,r=i&&zs.value,o=t.catchall;let l;e._zod.parse=(c,d)=>{l??(l=a.value);const u=c.value;if(!s(u))return c.issues.push({expected:"object",code:"invalid_type",input:u,inst:e}),c;const p=[];if(i&&r&&!1===d?.async&&!0!==d.jitless)n||(n=(e=>{const t=new qi(["shape","payload","ctx"]),n=a.value,s=e=>{const t=As(e);return`shape[${t}]._zod.run({ value: input[${t}], issues: [] }, ctx)`};t.write("const input = payload.value;");const i=Object.create(null);let r=0;for(const a of n.keys)i[a]="key_"+r++;t.write("const newResult = {}");for(const a of n.keys)if(n.optionalKeys.has(a)){const e=i[a];t.write(`const ${e} = ${s(a)};`);const n=As(a);t.write(`\n        if (${e}.issues.length) {\n          if (input[${n}] === undefined) {\n            if (${n} in input) {\n              newResult[${n}] = undefined;\n            }\n          } else {\n            payload.issues = payload.issues.concat(\n              ${e}.issues.map((iss) => ({\n                ...iss,\n                path: iss.path ? [${n}, ...iss.path] : [${n}],\n              }))\n            );\n          }\n        } else if (${e}.value === undefined) {\n          if (${n} in input) newResult[${n}] = undefined;\n        } else {\n          newResult[${n}] = ${e}.value;\n        }\n        `)}else{const e=i[a];t.write(`const ${e} = ${s(a)};`),t.write(`\n          if (${e}.issues.length) payload.issues = payload.issues.concat(${e}.issues.map(iss => ({\n            ...iss,\n            path: iss.path ? [${As(a)}, ...iss.path] : [${As(a)}]\n          })));`),t.write(`newResult[${As(a)}] = ${e}.value`)}t.write("payload.value = newResult;"),t.write("return payload;");const o=t.compile();return(t,a)=>o(e,t,a)})(t.shape)),c=n(c,d);else{c.value={};const e=l.shape;for(const t of l.keys){const a=e[t],n=a._zod.run({value:u[t],issues:[]},d),s="optional"===a._zod.optin&&"optional"===a._zod.optout;n instanceof Promise?p.push(n.then(e=>s?Ar(e,c,t,u):Rr(e,c,t))):s?Ar(n,c,t,u):Rr(n,c,t)}}if(!o)return p.length?Promise.all(p).then(()=>c):c;const m=[],h=l.keySet,f=o._zod,g=f.def.type;for(const e of Object.keys(u)){if(h.has(e))continue;if("never"===g){m.push(e);continue}const t=f.run({value:u[e],issues:[]},d);t instanceof Promise?p.push(t.then(t=>Rr(t,c,e))):Rr(t,c,e)}return m.length&&c.issues.push({code:"unrecognized_keys",keys:m,input:u,inst:e}),p.length?Promise.all(p).then(()=>c):c}});function Tr(e,t,a,n){for(const s of e)if(0===s.issues.length)return t.value=s.value,t;return t.issues.push({code:"invalid_union",input:t.value,inst:a,errors:e.map(e=>e.issues.map(e=>Vs(e,n,js())))}),t}const zr=bs("$ZodUnion",(e,t)=>{Ki.init(e,t),Ss(e._zod,"optin",()=>t.options.some(e=>"optional"===e._zod.optin)?"optional":void 0),Ss(e._zod,"optout",()=>t.options.some(e=>"optional"===e._zod.optout)?"optional":void 0),Ss(e._zod,"values",()=>{if(t.options.every(e=>e._zod.values))return new Set(t.options.flatMap(e=>Array.from(e._zod.values)))}),Ss(e._zod,"pattern",()=>{if(t.options.every(e=>e._zod.pattern)){const e=t.options.map(e=>e._zod.pattern);return new RegExp(`^(${e.map(e=>Cs(e.source)).join("|")})$`)}}),e._zod.parse=(a,n)=>{let s=!1;const i=[];for(const e of t.options){const t=e._zod.run({value:a.value,issues:[]},n);if(t instanceof Promise)i.push(t),s=!0;else{if(0===t.issues.length)return t;i.push(t)}}return s?Promise.all(i).then(t=>Tr(t,a,e,n)):Tr(i,a,e,n)}}),Mr=bs("$ZodIntersection",(e,t)=>{Ki.init(e,t),e._zod.parse=(e,a)=>{const n=e.value,s=t.left._zod.run({value:n,issues:[]},a),i=t.right._zod.run({value:n,issues:[]},a);return s instanceof Promise||i instanceof Promise?Promise.all([s,i]).then(([t,a])=>Ir(e,t,a)):Ir(e,s,i)}});function Or(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e===+t)return{valid:!0,data:e};if(Ms(e)&&Ms(t)){const a=Object.keys(t),n=Object.keys(e).filter(e=>-1!==a.indexOf(e)),s={...e,...t};for(const i of n){const a=Or(e[i],t[i]);if(!a.valid)return{valid:!1,mergeErrorPath:[i,...a.mergeErrorPath]};s[i]=a.data}return{valid:!0,data:s}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const a=[];for(let n=0;n<e.length;n++){const s=Or(e[n],t[n]);if(!s.valid)return{valid:!1,mergeErrorPath:[n,...s.mergeErrorPath]};a.push(s.data)}return{valid:!0,data:a}}return{valid:!1,mergeErrorPath:[]}}function Ir(e,t,a){if(t.issues.length&&e.issues.push(...t.issues),a.issues.length&&e.issues.push(...a.issues),Ls(e))return e;const n=Or(t.value,a.value);if(!n.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(n.mergeErrorPath)}`);return e.value=n.data,e}const Pr=bs("$ZodEnum",(e,t)=>{Ki.init(e,t);const a=function(e){const t=Object.values(e).filter(e=>"number"==typeof e);return Object.entries(e).filter(([e,a])=>-1===t.indexOf(+e)).map(([e,t])=>t)}(t.entries);e._zod.values=new Set(a),e._zod.pattern=new RegExp(`^(${a.filter(e=>Os.has(typeof e)).map(e=>"string"==typeof e?Is(e):e.toString()).join("|")})$`),e._zod.parse=(t,n)=>{const s=t.value;return e._zod.values.has(s)||t.issues.push({code:"invalid_value",values:a,input:s,inst:e}),t}}),Dr=bs("$ZodTransform",(e,t)=>{Ki.init(e,t),e._zod.parse=(e,a)=>{const n=t.transform(e.value,e);if(a.async){return(n instanceof Promise?n:Promise.resolve(n)).then(t=>(e.value=t,e))}if(n instanceof Promise)throw new ys;return e.value=n,e}}),Fr=bs("$ZodOptional",(e,t)=>{Ki.init(e,t),e._zod.optin="optional",e._zod.optout="optional",Ss(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),Ss(e._zod,"pattern",()=>{const e=t.innerType._zod.pattern;return e?new RegExp(`^(${Cs(e.source)})?$`):void 0}),e._zod.parse=(e,a)=>"optional"===t.innerType._zod.optin?t.innerType._zod.run(e,a):void 0===e.value?e:t.innerType._zod.run(e,a)}),Lr=bs("$ZodNullable",(e,t)=>{Ki.init(e,t),Ss(e._zod,"optin",()=>t.innerType._zod.optin),Ss(e._zod,"optout",()=>t.innerType._zod.optout),Ss(e._zod,"pattern",()=>{const e=t.innerType._zod.pattern;return e?new RegExp(`^(${Cs(e.source)}|null)$`):void 0}),Ss(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(e,a)=>null===e.value?e:t.innerType._zod.run(e,a)}),Ur=bs("$ZodDefault",(e,t)=>{Ki.init(e,t),e._zod.optin="optional",Ss(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,a)=>{if(void 0===e.value)return e.value=t.defaultValue,e;const n=t.innerType._zod.run(e,a);return n instanceof Promise?n.then(e=>$r(e,t)):$r(n,t)}});function $r(e,t){return void 0===e.value&&(e.value=t.defaultValue),e}const Vr=bs("$ZodPrefault",(e,t)=>{Ki.init(e,t),e._zod.optin="optional",Ss(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,a)=>(void 0===e.value&&(e.value=t.defaultValue),t.innerType._zod.run(e,a))}),Br=bs("$ZodNonOptional",(e,t)=>{Ki.init(e,t),Ss(e._zod,"values",()=>{const e=t.innerType._zod.values;return e?new Set([...e].filter(e=>void 0!==e)):void 0}),e._zod.parse=(a,n)=>{const s=t.innerType._zod.run(a,n);return s instanceof Promise?s.then(t=>Hr(t,e)):Hr(s,e)}});function Hr(e,t){return e.issues.length||void 0!==e.value||e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const qr=bs("$ZodCatch",(e,t)=>{Ki.init(e,t),e._zod.optin="optional",Ss(e._zod,"optout",()=>t.innerType._zod.optout),Ss(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,a)=>{const n=t.innerType._zod.run(e,a);return n instanceof Promise?n.then(n=>(e.value=n.value,n.issues.length&&(e.value=t.catchValue({...e,error:{issues:n.issues.map(e=>Vs(e,a,js()))},input:e.value}),e.issues=[]),e)):(e.value=n.value,n.issues.length&&(e.value=t.catchValue({...e,error:{issues:n.issues.map(e=>Vs(e,a,js()))},input:e.value}),e.issues=[]),e)}}),Gr=bs("$ZodPipe",(e,t)=>{Ki.init(e,t),Ss(e._zod,"values",()=>t.in._zod.values),Ss(e._zod,"optin",()=>t.in._zod.optin),Ss(e._zod,"optout",()=>t.out._zod.optout),Ss(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(e,a)=>{const n=t.in._zod.run(e,a);return n instanceof Promise?n.then(e=>Kr(e,t,a)):Kr(n,t,a)}});function Kr(e,t,a){return Ls(e)?e:t.out._zod.run({value:e.value,issues:e.issues},a)}const Zr=bs("$ZodReadonly",(e,t)=>{Ki.init(e,t),Ss(e._zod,"propValues",()=>t.innerType._zod.propValues),Ss(e._zod,"values",()=>t.innerType._zod.values),Ss(e._zod,"optin",()=>t.innerType._zod.optin),Ss(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(e,a)=>{const n=t.innerType._zod.run(e,a);return n instanceof Promise?n.then(Qr):Qr(n)}});function Qr(e){return e.value=Object.freeze(e.value),e}const Wr=bs("$ZodCustom",(e,t)=>{Ri.init(e,t),Ki.init(e,t),e._zod.parse=(e,t)=>e,e._zod.check=a=>{const n=a.value,s=t.fn(n);if(s instanceof Promise)return s.then(t=>Yr(t,a,n,e));Yr(s,a,n,e)}});function Yr(e,t,a,n){if(!e){const e={code:"custom",input:a,inst:n,path:[...n._zod.def.path??[]],continue:!n._zod.def.abort};n._zod.def.params&&(e.params=n._zod.def.params),t.issues.push(Hs(e))}}class Xr{constructor(){this._map=new Map,this._idmap=new Map}add(e,...t){const a=t[0];if(this._map.set(e,a),a&&"object"==typeof a&&"id"in a){if(this._idmap.has(a.id))throw new Error(`ID ${a.id} already exists in the registry`);this._idmap.set(a.id,e)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(e){const t=this._map.get(e);return t&&"object"==typeof t&&"id"in t&&this._idmap.delete(t.id),this._map.delete(e),this}get(e){const t=e._zod.parent;if(t){const a={...this.get(t)??{}};return delete a.id,{...a,...this._map.get(e)}}return this._map.get(e)}has(e){return this._map.has(e)}}function Jr(){return new Xr}const eo=Jr();function to(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...Ds(t)})}function ao(e,t){return new _i({check:"less_than",...Ds(t),value:e,inclusive:!1})}function no(e,t){return new _i({check:"less_than",...Ds(t),value:e,inclusive:!0})}function so(e,t){return new Ti({check:"greater_than",...Ds(t),value:e,inclusive:!1})}function io(e,t){return new Ti({check:"greater_than",...Ds(t),value:e,inclusive:!0})}function ro(e,t){return new zi({check:"multiple_of",...Ds(t),value:e})}function oo(e,t){return new Oi({check:"max_length",...Ds(t),maximum:e})}function lo(e,t){return new Ii({check:"min_length",...Ds(t),minimum:e})}function co(e,t){return new Pi({check:"length_equals",...Ds(t),length:e})}function uo(e){return new Hi({check:"overwrite",tx:e})}const po=bs("ZodISODateTime",(e,t)=>{or.init(e,t),Ao.init(e,t)});function mo(e){return function(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...Ds(t)})}(po,e)}const ho=bs("ZodISODate",(e,t)=>{lr.init(e,t),Ao.init(e,t)});function fo(e){return function(e,t){return new e({type:"string",format:"date",check:"string_format",...Ds(t)})}(ho,e)}const go=bs("ZodISOTime",(e,t)=>{cr.init(e,t),Ao.init(e,t)});function xo(e){return function(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...Ds(t)})}(go,e)}const vo=bs("ZodISODuration",(e,t)=>{dr.init(e,t),Ao.init(e,t)});function bo(e){return function(e,t){return new e({type:"string",format:"duration",check:"string_format",...Ds(t)})}(vo,e)}const yo=bs("ZodError",(e,t)=>{Gs.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:t=>function(e,t){const a=t||function(e){return e.message},n={_errors:[]},s=e=>{for(const t of e.issues)if("invalid_union"===t.code&&t.errors.length)t.errors.map(e=>s({issues:e}));else if("invalid_key"===t.code)s({issues:t.issues});else if("invalid_element"===t.code)s({issues:t.issues});else if(0===t.path.length)n._errors.push(a(t));else{let e=n,s=0;for(;s<t.path.length;){const n=t.path[s];s===t.path.length-1?(e[n]=e[n]||{_errors:[]},e[n]._errors.push(a(t))):e[n]=e[n]||{_errors:[]},e=e[n],s++}}};return s(e),n}(e,t)},flatten:{value:t=>function(e,t=e=>e.message){const a={},n=[];for(const s of e.issues)s.path.length>0?(a[s.path[0]]=a[s.path[0]]||[],a[s.path[0]].push(t(s))):n.push(t(s));return{formErrors:n,fieldErrors:a}}(e,t)},addIssue:{value:t=>e.issues.push(t)},addIssues:{value:t=>e.issues.push(...t)},isEmpty:{get:()=>0===e.issues.length}})},{Parent:Error}),wo=Zs(yo),jo=Ws(yo),ko=Xs(yo),No=ei(yo),Eo=bs("ZodType",(e,t)=>(Ki.init(e,t),e.def=t,Object.defineProperty(e,"_def",{value:t}),e.check=(...a)=>e.clone({...t,checks:[...t.checks??[],...a.map(e=>"function"==typeof e?{_zod:{check:e,def:{check:"custom"},onattach:[]}}:e)]}),e.clone=(t,a)=>Ps(e,t,a),e.brand=()=>e,e.register=(t,a)=>(t.add(e,a),e),e.parse=(t,a)=>wo(e,t,a,{callee:e.parse}),e.safeParse=(t,a)=>ko(e,t,a),e.parseAsync=async(t,a)=>jo(e,t,a,{callee:e.parseAsync}),e.safeParseAsync=async(t,a)=>No(e,t,a),e.spa=e.safeParseAsync,e.refine=(t,a)=>e.check(function(e,t={}){return function(e,t,a){return new e({type:"custom",check:"custom",fn:t,...Ds(a)})}(Cl,e,t)}(t,a)),e.superRefine=t=>e.check(function(e){const t=function(e){const t=new Ri({check:"custom"});return t._zod.check=e,t}(a=>(a.addIssue=e=>{if("string"==typeof e)a.issues.push(Hs(e,a.value,t._zod.def));else{const n=e;n.fatal&&(n.continue=!1),n.code??(n.code="custom"),n.input??(n.input=a.value),n.inst??(n.inst=t),n.continue??(n.continue=!t._zod.def.abort),a.issues.push(Hs(n))}},e(a.value,a)));return t}(t)),e.overwrite=t=>e.check(uo(t)),e.optional=()=>gl(e),e.nullable=()=>vl(e),e.nullish=()=>gl(vl(e)),e.nonoptional=t=>function(e,t){return new wl({type:"nonoptional",innerType:e,...Ds(t)})}(e,t),e.array=()=>ol(e),e.or=t=>{return new dl({type:"union",options:[e,t],...Ds(a)});var a},e.and=t=>new ul({type:"intersection",left:e,right:t}),e.transform=t=>Nl(e,new hl({type:"transform",transform:t})),e.default=t=>{return a=t,new bl({type:"default",innerType:e,get defaultValue(){return"function"==typeof a?a():a}});var a},e.prefault=t=>{return a=t,new yl({type:"prefault",innerType:e,get defaultValue(){return"function"==typeof a?a():a}});var a},e.catch=t=>{return new jl({type:"catch",innerType:e,catchValue:"function"==typeof(a=t)?a:()=>a});var a},e.pipe=t=>Nl(e,t),e.readonly=()=>new El({type:"readonly",innerType:e}),e.describe=t=>{const a=e.clone();return eo.add(a,{description:t}),a},Object.defineProperty(e,"description",{get:()=>eo.get(e)?.description,configurable:!0}),e.meta=(...t)=>{if(0===t.length)return eo.get(e);const a=e.clone();return eo.add(a,t[0]),a},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),Co=bs("_ZodString",(e,t)=>{Zi.init(e,t),Eo.init(e,t);const a=e._zod.bag;e.format=a.format??null,e.minLength=a.minimum??null,e.maxLength=a.maximum??null,e.regex=(...t)=>e.check(function(e,t){return new Fi({check:"string_format",format:"regex",...Ds(t),pattern:e})}(...t)),e.includes=(...t)=>e.check(function(e,t){return new $i({check:"string_format",format:"includes",...Ds(t),includes:e})}(...t)),e.startsWith=(...t)=>e.check(function(e,t){return new Vi({check:"string_format",format:"starts_with",...Ds(t),prefix:e})}(...t)),e.endsWith=(...t)=>e.check(function(e,t){return new Bi({check:"string_format",format:"ends_with",...Ds(t),suffix:e})}(...t)),e.min=(...t)=>e.check(lo(...t)),e.max=(...t)=>e.check(oo(...t)),e.length=(...t)=>e.check(co(...t)),e.nonempty=(...t)=>e.check(lo(1,...t)),e.lowercase=t=>e.check(function(e){return new Li({check:"string_format",format:"lowercase",...Ds(e)})}(t)),e.uppercase=t=>e.check(function(e){return new Ui({check:"string_format",format:"uppercase",...Ds(e)})}(t)),e.trim=()=>e.check(uo(e=>e.trim())),e.normalize=(...t)=>e.check(function(e){return uo(t=>t.normalize(e))}(...t)),e.toLowerCase=()=>e.check(uo(e=>e.toLowerCase())),e.toUpperCase=()=>e.check(uo(e=>e.toUpperCase()))}),So=bs("ZodString",(e,t)=>{Zi.init(e,t),Co.init(e,t),e.email=t=>e.check(function(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...Ds(t)})}(_o,t)),e.url=t=>e.check(function(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...Ds(t)})}(Mo,t)),e.jwt=t=>e.check(function(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...Ds(t)})}(Zo,t)),e.emoji=t=>e.check(function(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...Ds(t)})}(Oo,t)),e.guid=t=>e.check(to(To,t)),e.uuid=t=>e.check(function(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...Ds(t)})}(zo,t)),e.uuidv4=t=>e.check(function(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...Ds(t)})}(zo,t)),e.uuidv6=t=>e.check(function(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...Ds(t)})}(zo,t)),e.uuidv7=t=>e.check(function(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...Ds(t)})}(zo,t)),e.nanoid=t=>e.check(function(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...Ds(t)})}(Io,t)),e.guid=t=>e.check(to(To,t)),e.cuid=t=>e.check(function(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...Ds(t)})}(Po,t)),e.cuid2=t=>e.check(function(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...Ds(t)})}(Do,t)),e.ulid=t=>e.check(function(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...Ds(t)})}(Fo,t)),e.base64=t=>e.check(function(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...Ds(t)})}(qo,t)),e.base64url=t=>e.check(function(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...Ds(t)})}(Go,t)),e.xid=t=>e.check(function(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...Ds(t)})}(Lo,t)),e.ksuid=t=>e.check(function(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...Ds(t)})}(Uo,t)),e.ipv4=t=>e.check(function(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...Ds(t)})}($o,t)),e.ipv6=t=>e.check(function(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...Ds(t)})}(Vo,t)),e.cidrv4=t=>e.check(function(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...Ds(t)})}(Bo,t)),e.cidrv6=t=>e.check(function(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...Ds(t)})}(Ho,t)),e.e164=t=>e.check(function(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...Ds(t)})}(Ko,t)),e.datetime=t=>e.check(mo(t)),e.date=t=>e.check(fo(t)),e.time=t=>e.check(xo(t)),e.duration=t=>e.check(bo(t))});function Ro(e){return function(e,t){return new e({type:"string",...Ds(t)})}(So,e)}const Ao=bs("ZodStringFormat",(e,t)=>{Qi.init(e,t),Co.init(e,t)}),_o=bs("ZodEmail",(e,t)=>{Xi.init(e,t),Ao.init(e,t)}),To=bs("ZodGUID",(e,t)=>{Wi.init(e,t),Ao.init(e,t)}),zo=bs("ZodUUID",(e,t)=>{Yi.init(e,t),Ao.init(e,t)}),Mo=bs("ZodURL",(e,t)=>{Ji.init(e,t),Ao.init(e,t)}),Oo=bs("ZodEmoji",(e,t)=>{er.init(e,t),Ao.init(e,t)}),Io=bs("ZodNanoID",(e,t)=>{tr.init(e,t),Ao.init(e,t)}),Po=bs("ZodCUID",(e,t)=>{ar.init(e,t),Ao.init(e,t)}),Do=bs("ZodCUID2",(e,t)=>{nr.init(e,t),Ao.init(e,t)}),Fo=bs("ZodULID",(e,t)=>{sr.init(e,t),Ao.init(e,t)}),Lo=bs("ZodXID",(e,t)=>{ir.init(e,t),Ao.init(e,t)}),Uo=bs("ZodKSUID",(e,t)=>{rr.init(e,t),Ao.init(e,t)}),$o=bs("ZodIPv4",(e,t)=>{ur.init(e,t),Ao.init(e,t)}),Vo=bs("ZodIPv6",(e,t)=>{pr.init(e,t),Ao.init(e,t)}),Bo=bs("ZodCIDRv4",(e,t)=>{mr.init(e,t),Ao.init(e,t)}),Ho=bs("ZodCIDRv6",(e,t)=>{hr.init(e,t),Ao.init(e,t)}),qo=bs("ZodBase64",(e,t)=>{gr.init(e,t),Ao.init(e,t)}),Go=bs("ZodBase64URL",(e,t)=>{xr.init(e,t),Ao.init(e,t)}),Ko=bs("ZodE164",(e,t)=>{vr.init(e,t),Ao.init(e,t)}),Zo=bs("ZodJWT",(e,t)=>{br.init(e,t),Ao.init(e,t)}),Qo=bs("ZodNumber",(e,t)=>{yr.init(e,t),Eo.init(e,t),e.gt=(t,a)=>e.check(so(t,a)),e.gte=(t,a)=>e.check(io(t,a)),e.min=(t,a)=>e.check(io(t,a)),e.lt=(t,a)=>e.check(ao(t,a)),e.lte=(t,a)=>e.check(no(t,a)),e.max=(t,a)=>e.check(no(t,a)),e.int=t=>e.check(Xo(t)),e.safe=t=>e.check(Xo(t)),e.positive=t=>e.check(so(0,t)),e.nonnegative=t=>e.check(io(0,t)),e.negative=t=>e.check(ao(0,t)),e.nonpositive=t=>e.check(no(0,t)),e.multipleOf=(t,a)=>e.check(ro(t,a)),e.step=(t,a)=>e.check(ro(t,a)),e.finite=()=>e;const a=e._zod.bag;e.minValue=Math.max(a.minimum??Number.NEGATIVE_INFINITY,a.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(a.maximum??Number.POSITIVE_INFINITY,a.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(a.format??"").includes("int")||Number.isSafeInteger(a.multipleOf??.5),e.isFinite=!0,e.format=a.format??null});function Wo(e){return function(e,t){return new e({type:"number",checks:[],...Ds(t)})}(Qo,e)}const Yo=bs("ZodNumberFormat",(e,t)=>{wr.init(e,t),Qo.init(e,t)});function Xo(e){return function(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...Ds(t)})}(Yo,e)}const Jo=bs("ZodBoolean",(e,t)=>{jr.init(e,t),Eo.init(e,t)});const el=bs("ZodAny",(e,t)=>{kr.init(e,t),Eo.init(e,t)});function tl(){return new el({type:"any"})}const al=bs("ZodUnknown",(e,t)=>{Nr.init(e,t),Eo.init(e,t)});function nl(){return new al({type:"unknown"})}const sl=bs("ZodNever",(e,t)=>{Er.init(e,t),Eo.init(e,t)});function il(e){return function(e,t){return new e({type:"never",...Ds(t)})}(sl,e)}const rl=bs("ZodArray",(e,t)=>{Sr.init(e,t),Eo.init(e,t),e.element=t.element,e.min=(t,a)=>e.check(lo(t,a)),e.nonempty=t=>e.check(lo(1,t)),e.max=(t,a)=>e.check(oo(t,a)),e.length=(t,a)=>e.check(co(t,a)),e.unwrap=()=>e.element});function ol(e,t){return function(e,t,a){return new e({type:"array",element:t,...Ds(a)})}(rl,e,t)}const ll=bs("ZodObject",(e,t)=>{_r.init(e,t),Eo.init(e,t),Ss(e,"shape",()=>t.shape),e.keyof=()=>ml(Object.keys(e._zod.def.shape)),e.catchall=t=>e.clone({...e._zod.def,catchall:t}),e.passthrough=()=>e.clone({...e._zod.def,catchall:nl()}),e.loose=()=>e.clone({...e._zod.def,catchall:nl()}),e.strict=()=>e.clone({...e._zod.def,catchall:il()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=t=>function(e,t){if(!Ms(t))throw new Error("Invalid input to extend: expected a plain object");const a={...e._zod.def,get shape(){const a={...e._zod.def.shape,...t};return Rs(this,"shape",a),a},checks:[]};return Ps(e,a)}(e,t),e.merge=t=>{return n=t,Ps(a=e,{...a._zod.def,get shape(){const e={...a._zod.def.shape,...n._zod.def.shape};return Rs(this,"shape",e),e},catchall:n._zod.def.catchall,checks:[]});var a,n},e.pick=t=>function(e,t){const a={},n=e._zod.def;for(const s in t){if(!(s in n.shape))throw new Error(`Unrecognized key: "${s}"`);t[s]&&(a[s]=n.shape[s])}return Ps(e,{...e._zod.def,shape:a,checks:[]})}(e,t),e.omit=t=>function(e,t){const a={...e._zod.def.shape},n=e._zod.def;for(const s in t){if(!(s in n.shape))throw new Error(`Unrecognized key: "${s}"`);t[s]&&delete a[s]}return Ps(e,{...e._zod.def,shape:a,checks:[]})}(e,t),e.partial=(...t)=>function(e,t,a){const n=t._zod.def.shape,s={...n};if(a)for(const i in a){if(!(i in n))throw new Error(`Unrecognized key: "${i}"`);a[i]&&(s[i]=e?new e({type:"optional",innerType:n[i]}):n[i])}else for(const i in n)s[i]=e?new e({type:"optional",innerType:n[i]}):n[i];return Ps(t,{...t._zod.def,shape:s,checks:[]})}(fl,e,t[0]),e.required=(...t)=>function(e,t,a){const n=t._zod.def.shape,s={...n};if(a)for(const i in a){if(!(i in s))throw new Error(`Unrecognized key: "${i}"`);a[i]&&(s[i]=new e({type:"nonoptional",innerType:n[i]}))}else for(const i in n)s[i]=new e({type:"nonoptional",innerType:n[i]});return Ps(t,{...t._zod.def,shape:s,checks:[]})}(wl,e,t[0])});function cl(e,t){const a={type:"object",get shape(){return Rs(this,"shape",{...e}),this.shape},...Ds(t)};return new ll(a)}const dl=bs("ZodUnion",(e,t)=>{zr.init(e,t),Eo.init(e,t),e.options=t.options});const ul=bs("ZodIntersection",(e,t)=>{Mr.init(e,t),Eo.init(e,t)});const pl=bs("ZodEnum",(e,t)=>{Pr.init(e,t),Eo.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);const a=new Set(Object.keys(t.entries));e.extract=(e,n)=>{const s={};for(const i of e){if(!a.has(i))throw new Error(`Key ${i} not found in enum`);s[i]=t.entries[i]}return new pl({...t,checks:[],...Ds(n),entries:s})},e.exclude=(e,n)=>{const s={...t.entries};for(const t of e){if(!a.has(t))throw new Error(`Key ${t} not found in enum`);delete s[t]}return new pl({...t,checks:[],...Ds(n),entries:s})}});function ml(e,t){const a=Array.isArray(e)?Object.fromEntries(e.map(e=>[e,e])):e;return new pl({type:"enum",entries:a,...Ds(t)})}const hl=bs("ZodTransform",(e,t)=>{Dr.init(e,t),Eo.init(e,t),e._zod.parse=(a,n)=>{a.addIssue=n=>{if("string"==typeof n)a.issues.push(Hs(n,a.value,t));else{const t=n;t.fatal&&(t.continue=!1),t.code??(t.code="custom"),t.input??(t.input=a.value),t.inst??(t.inst=e),t.continue??(t.continue=!0),a.issues.push(Hs(t))}};const s=t.transform(a.value,a);return s instanceof Promise?s.then(e=>(a.value=e,a)):(a.value=s,a)}});const fl=bs("ZodOptional",(e,t)=>{Fr.init(e,t),Eo.init(e,t),e.unwrap=()=>e._zod.def.innerType});function gl(e){return new fl({type:"optional",innerType:e})}const xl=bs("ZodNullable",(e,t)=>{Lr.init(e,t),Eo.init(e,t),e.unwrap=()=>e._zod.def.innerType});function vl(e){return new xl({type:"nullable",innerType:e})}const bl=bs("ZodDefault",(e,t)=>{Ur.init(e,t),Eo.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});const yl=bs("ZodPrefault",(e,t)=>{Vr.init(e,t),Eo.init(e,t),e.unwrap=()=>e._zod.def.innerType});const wl=bs("ZodNonOptional",(e,t)=>{Br.init(e,t),Eo.init(e,t),e.unwrap=()=>e._zod.def.innerType});const jl=bs("ZodCatch",(e,t)=>{qr.init(e,t),Eo.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});const kl=bs("ZodPipe",(e,t)=>{Gr.init(e,t),Eo.init(e,t),e.in=t.in,e.out=t.out});function Nl(e,t){return new kl({type:"pipe",in:e,out:t})}const El=bs("ZodReadonly",(e,t)=>{Zr.init(e,t),Eo.init(e,t)});const Cl=bs("ZodCustom",(e,t)=>{Wr.init(e,t),Eo.init(e,t)});const Sl=cl({title:Ro().min(1,"Title is required"),description:Ro().min(1,"Description is required"),markerImage:Ro().min(1,"Marker image is required"),userId:Ro().optional(),contentConfig:cl({position:cl({x:Wo(),y:Wo(),z:Wo()}),rotation:cl({x:Wo(),y:Wo(),z:Wo()}),scale:cl({x:Wo(),y:Wo(),z:Wo()}),sceneObjects:ol(cl({id:Ro(),position:cl({x:Wo(),y:Wo(),z:Wo()}),rotation:cl({x:Wo(),y:Wo(),z:Wo()}),scale:cl({x:Wo(),y:Wo(),z:Wo()}),content:cl({type:ml(["image","video","model","light","audio"]),url:Ro().optional(),intensity:Wo().optional(),color:Ro().optional()})}))})});var Rl;cl({experienceId:Ro(),type:Ro(),url:Ro(),filename:Ro()}),Sl.partial().extend({id:Wo()}),cl({title:Ro().min(1,"Title is required"),description:Ro().optional(),markerImage:Ro().min(1,"Marker image is required"),isMultipleTargets:function(e,t){return new e({type:"boolean",...Ds(t)})}(Jo,Rl).default(!0),targetsConfig:ol(cl({id:Ro(),name:Ro(),imageUrl:Ro(),imageData:tl(),sceneObjects:ol(cl({id:Ro(),type:ml(["model","image","video","audio","text"]),url:Ro().optional(),content:Ro().optional(),position:cl({x:Wo(),y:Wo(),z:Wo()}),rotation:cl({x:Wo(),y:Wo(),z:Wo()}),scale:cl({x:Wo(),y:Wo(),z:Wo()}),color:Ro().optional(),size:Wo().optional()}))})),contentConfig:cl({position:cl({x:Wo(),y:Wo(),z:Wo()}),rotation:cl({x:Wo(),y:Wo(),z:Wo()}),scale:cl({x:Wo(),y:Wo(),z:Wo()}),sceneObjects:ol(tl())})});function Al({children:a,user:n,onUserUpdate:s}){const[i,r]=e.useState(!1),o=e.useRef(null),l=Xa();e.useEffect(()=>{function e(e){o.current&&!o.current.contains(e.target)&&r(!1)}return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);return t.jsxs("div",{className:"min-h-screen bg-slate-900",children:[t.jsxs("header",{className:"p-4 border-b bg-slate-800 border-slate-700 flex justify-between items-center",children:[t.jsx("div",{className:"flex items-center gap-3",children:t.jsx("button",{onClick:()=>{"admin"===n.role?l("/admin"):l("/")},className:"bg-slate-700 h-auto w-12 flex items-center justify-center rounded-md hover:bg-slate-600 transition-colors",children:t.jsx("img",{src:"/assets/logo-BU7GR_bc.jpg",alt:"Logo"})})}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("span",{className:"text-slate-300",children:["Welcome ",n.name," ","admin"===n.role&&"(Admin)"]}),t.jsxs("div",{className:"relative",ref:o,children:[t.jsxs("button",{onClick:()=>{r(!i)},className:"h-10 w-10 bg-slate-700 rounded-full flex items-center justify-center hover:bg-slate-600 transition-colors focus:outline-none focus:ring-2 focus:ring-slate-500",children:[t.jsx("span",{className:"sr-only",children:"User profile"}),t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-6 h-6 text-white",children:t.jsx("path",{fillRule:"evenodd",d:"M7.5 6a4.5 4.5 0 119 0 4.5 4.5 0 01-9 0zM3.751 20.105a8.25 8.25 0 0116.498 0 .75.75 0 01-.437.695A18.683 18.683 0 0112 22.5c-2.786 0-5.433-.608-7.812-1.7a.75.75 0 01-.437-.695z",clipRule:"evenodd"})})]}),i&&t.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-slate-800 rounded-md shadow-lg py-1 z-10 border border-slate-700",children:[t.jsxs("div",{className:"px-4 py-2 text-sm text-slate-300 border-b border-slate-700",children:[t.jsx("div",{className:"font-medium text-white",children:n.name}),t.jsx("div",{className:"text-slate-400",children:n.email}),t.jsx("div",{className:"text-xs text-blue-400 font-medium mt-1",children:"admin"===n.role?"Administrator":"User"})]}),"admin"===n.role&&t.jsx("button",{onClick:()=>{l("/admin"),r(!1)},className:"block w-full text-left px-4 py-2 text-sm text-slate-300 hover:bg-slate-700",children:"Admin Dashboard"}),t.jsx("button",{onClick:()=>{l("/experiences")},className:"block w-full text-left px-4 py-2 text-sm text-slate-300 hover:bg-slate-700",children:"My Experiences"}),t.jsx("button",{onClick:async()=>{try{await vs.logout(),s(null),r(!1),l("/login")}catch(e){console.error("Logout failed:",e)}},className:"block w-full text-left px-4 py-2 text-sm text-slate-300 hover:bg-slate-700",children:"Sign out"})]})]})]})]}),t.jsx("main",{className:"flex-1 bg-slate-900 min-h-screen",children:a})]})}function _l({children:a,requireAdmin:n=!1,restrictAdmin:s=!1}){const[i,r]=e.useState(null),[o,l]=e.useState(!0),[c,d]=e.useState(!1);e.useEffect(()=>{u()},[]);const u=async()=>{try{const{user:e,isAuthenticated:t}=await vs.checkAuth();r(e),d(t)}catch(e){console.error("Auth check failed:",e),r(null),d(!1)}finally{l(!1)}};return o?t.jsx("div",{className:"min-h-screen bg-slate-900 flex items-center justify-center",children:t.jsx("div",{className:"text-white",children:"Loading..."})}):c&&i?s&&"admin"===i.role?t.jsx(un,{to:"/admin",replace:!0}):n&&"admin"!==i.role?t.jsx(un,{to:"/",replace:!0}):t.jsx(Al,{user:i,onUserUpdate:r,children:a}):t.jsx(un,{to:"/login",replace:!0})}function Tl(e){var t,a,n="";if("string"==typeof e||"number"==typeof e)n+=e;else if("object"==typeof e)if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(a=Tl(e[t]))&&(n&&(n+=" "),n+=a)}else for(a in e)e[a]&&(n&&(n+=" "),n+=a);return n}function zl(){for(var e,t,a=0,n="",s=arguments.length;a<s;a++)(e=arguments[a])&&(t=Tl(e))&&(n&&(n+=" "),n+=t);return n}const Ml=e=>{const t=Dl(e),{conflictingClassGroups:a,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:e=>{const a=e.split("-");return""===a[0]&&1!==a.length&&a.shift(),Ol(a,t)||Pl(e)},getConflictingClassGroupIds:(e,t)=>{const s=a[e]||[];return t&&n[e]?[...s,...n[e]]:s}}},Ol=(e,t)=>{if(0===e.length)return t.classGroupId;const a=e[0],n=t.nextPart.get(a),s=n?Ol(e.slice(1),n):void 0;if(s)return s;if(0===t.validators.length)return;const i=e.join("-");return t.validators.find(({validator:e})=>e(i))?.classGroupId},Il=/^\[(.+)\]$/,Pl=e=>{if(Il.test(e)){const t=Il.exec(e)[1],a=t?.substring(0,t.indexOf(":"));if(a)return"arbitrary.."+a}},Dl=e=>{const{theme:t,classGroups:a}=e,n={nextPart:new Map,validators:[]};for(const s in a)Fl(a[s],n,s,t);return n},Fl=(e,t,a,n)=>{e.forEach(e=>{if("string"==typeof e){return void((""===e?t:Ll(t,e)).classGroupId=a)}if("function"==typeof e)return Ul(e)?void Fl(e(n),t,a,n):void t.validators.push({validator:e,classGroupId:a});Object.entries(e).forEach(([e,s])=>{Fl(s,Ll(t,e),a,n)})})},Ll=(e,t)=>{let a=e;return t.split("-").forEach(e=>{a.nextPart.has(e)||a.nextPart.set(e,{nextPart:new Map,validators:[]}),a=a.nextPart.get(e)}),a},Ul=e=>e.isThemeGetter,$l=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,a=new Map,n=new Map;const s=(s,i)=>{a.set(s,i),t++,t>e&&(t=0,n=a,a=new Map)};return{get(e){let t=a.get(e);return void 0!==t?t:void 0!==(t=n.get(e))?(s(e,t),t):void 0},set(e,t){a.has(e)?a.set(e,t):s(e,t)}}},Vl=e=>{const{prefix:t,experimentalParseClassName:a}=e;let n=e=>{const t=[];let a,n=0,s=0,i=0;for(let l=0;l<e.length;l++){let r=e[l];if(0===n&&0===s){if(":"===r){t.push(e.slice(i,l)),i=l+1;continue}if("/"===r){a=l;continue}}"["===r?n++:"]"===r?n--:"("===r?s++:")"===r&&s--}const r=0===t.length?e:e.substring(i),o=Bl(r);return{modifiers:t,hasImportantModifier:o!==r,baseClassName:o,maybePostfixModifierPosition:a&&a>i?a-i:void 0}};if(t){const e=t+":",a=n;n=t=>t.startsWith(e)?a(t.substring(e.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:t,maybePostfixModifierPosition:void 0}}if(a){const e=n;n=t=>a({className:t,parseClassName:e})}return n},Bl=e=>e.endsWith("!")?e.substring(0,e.length-1):e.startsWith("!")?e.substring(1):e,Hl=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(e=>[e,!0]));return e=>{if(e.length<=1)return e;const a=[];let n=[];return e.forEach(e=>{"["===e[0]||t[e]?(a.push(...n.sort(),e),n=[]):n.push(e)}),a.push(...n.sort()),a}},ql=/\s+/;function Gl(){let e,t,a=0,n="";for(;a<arguments.length;)(e=arguments[a++])&&(t=Kl(e))&&(n&&(n+=" "),n+=t);return n}const Kl=e=>{if("string"==typeof e)return e;let t,a="";for(let n=0;n<e.length;n++)e[n]&&(t=Kl(e[n]))&&(a&&(a+=" "),a+=t);return a};function Zl(e,...t){let a,n,s,i=function(o){const l=t.reduce((e,t)=>t(e),e());return a=(e=>({cache:$l(e.cacheSize),parseClassName:Vl(e),sortModifiers:Hl(e),...Ml(e)}))(l),n=a.cache.get,s=a.cache.set,i=r,r(o)};function r(e){const t=n(e);if(t)return t;const i=((e,t)=>{const{parseClassName:a,getClassGroupId:n,getConflictingClassGroupIds:s,sortModifiers:i}=t,r=[],o=e.trim().split(ql);let l="";for(let c=o.length-1;c>=0;c-=1){const e=o[c],{isExternal:t,modifiers:d,hasImportantModifier:u,baseClassName:p,maybePostfixModifierPosition:m}=a(e);if(t){l=e+(l.length>0?" "+l:l);continue}let h=!!m,f=n(h?p.substring(0,m):p);if(!f){if(!h){l=e+(l.length>0?" "+l:l);continue}if(f=n(p),!f){l=e+(l.length>0?" "+l:l);continue}h=!1}const g=i(d).join(":"),x=u?g+"!":g,v=x+f;if(r.includes(v))continue;r.push(v);const b=s(f,h);for(let a=0;a<b.length;++a){const e=b[a];r.push(x+e)}l=e+(l.length>0?" "+l:l)}return l})(e,a);return s(e,i),i}return function(){return i(Gl.apply(null,arguments))}}const Ql=e=>{const t=t=>t[e]||[];return t.isThemeGetter=!0,t},Wl=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Yl=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Xl=/^\d+\/\d+$/,Jl=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,ec=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,tc=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,ac=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,nc=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,sc=e=>Xl.test(e),ic=e=>!!e&&!Number.isNaN(Number(e)),rc=e=>!!e&&Number.isInteger(Number(e)),oc=e=>e.endsWith("%")&&ic(e.slice(0,-1)),lc=e=>Jl.test(e),cc=()=>!0,dc=e=>ec.test(e)&&!tc.test(e),uc=()=>!1,pc=e=>ac.test(e),mc=e=>nc.test(e),hc=e=>!gc(e)&&!jc(e),fc=e=>Ac(e,Mc,uc),gc=e=>Wl.test(e),xc=e=>Ac(e,Oc,dc),vc=e=>Ac(e,Ic,ic),bc=e=>Ac(e,Tc,uc),yc=e=>Ac(e,zc,mc),wc=e=>Ac(e,Dc,pc),jc=e=>Yl.test(e),kc=e=>_c(e,Oc),Nc=e=>_c(e,Pc),Ec=e=>_c(e,Tc),Cc=e=>_c(e,Mc),Sc=e=>_c(e,zc),Rc=e=>_c(e,Dc,!0),Ac=(e,t,a)=>{const n=Wl.exec(e);return!!n&&(n[1]?t(n[1]):a(n[2]))},_c=(e,t,a=!1)=>{const n=Yl.exec(e);return!!n&&(n[1]?t(n[1]):a)},Tc=e=>"position"===e||"percentage"===e,zc=e=>"image"===e||"url"===e,Mc=e=>"length"===e||"size"===e||"bg-size"===e,Oc=e=>"length"===e,Ic=e=>"number"===e,Pc=e=>"family-name"===e,Dc=e=>"shadow"===e,Fc=Zl(()=>{const e=Ql("color"),t=Ql("font"),a=Ql("text"),n=Ql("font-weight"),s=Ql("tracking"),i=Ql("leading"),r=Ql("breakpoint"),o=Ql("container"),l=Ql("spacing"),c=Ql("radius"),d=Ql("shadow"),u=Ql("inset-shadow"),p=Ql("text-shadow"),m=Ql("drop-shadow"),h=Ql("blur"),f=Ql("perspective"),g=Ql("aspect"),x=Ql("ease"),v=Ql("animate"),b=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom",jc,gc],y=()=>[jc,gc,l],w=()=>[sc,"full","auto",...y()],j=()=>[rc,"none","subgrid",jc,gc],k=()=>["auto",{span:["full",rc,jc,gc]},rc,jc,gc],N=()=>[rc,"auto",jc,gc],E=()=>["auto","min","max","fr",jc,gc],C=()=>["auto",...y()],S=()=>[sc,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...y()],R=()=>[e,jc,gc],A=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom",Ec,bc,{position:[jc,gc]}],_=()=>["auto","cover","contain",Cc,fc,{size:[jc,gc]}],T=()=>[oc,kc,xc],z=()=>["","none","full",c,jc,gc],M=()=>["",ic,kc,xc],O=()=>[ic,oc,Ec,bc],I=()=>["","none",h,jc,gc],P=()=>["none",ic,jc,gc],D=()=>["none",ic,jc,gc],F=()=>[ic,jc,gc],L=()=>[sc,"full",...y()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[lc],breakpoint:[lc],color:[cc],container:[lc],"drop-shadow":[lc],ease:["in","out","in-out"],font:[hc],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[lc],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[lc],shadow:[lc],spacing:["px",ic],text:[lc],"text-shadow":[lc],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",sc,gc,jc,g]}],container:["container"],columns:[{columns:[ic,gc,jc,o]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:b()}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:w()}],"inset-x":[{"inset-x":w()}],"inset-y":[{"inset-y":w()}],start:[{start:w()}],end:[{end:w()}],top:[{top:w()}],right:[{right:w()}],bottom:[{bottom:w()}],left:[{left:w()}],visibility:["visible","invisible","collapse"],z:[{z:[rc,"auto",jc,gc]}],basis:[{basis:[sc,"full","auto",o,...y()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[ic,sc,"auto","initial","none",gc]}],grow:[{grow:["",ic,jc,gc]}],shrink:[{shrink:["",ic,jc,gc]}],order:[{order:[rc,"first","last","none",jc,gc]}],"grid-cols":[{"grid-cols":j()}],"col-start-end":[{col:k()}],"col-start":[{"col-start":N()}],"col-end":[{"col-end":N()}],"grid-rows":[{"grid-rows":j()}],"row-start-end":[{row:k()}],"row-start":[{"row-start":N()}],"row-end":[{"row-end":N()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":E()}],"auto-rows":[{"auto-rows":E()}],gap:[{gap:y()}],"gap-x":[{"gap-x":y()}],"gap-y":[{"gap-y":y()}],"justify-content":[{justify:["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe","normal"]}],"justify-items":[{"justify-items":["start","end","center","stretch","center-safe","end-safe","normal"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch","center-safe","end-safe"]}],"align-content":[{content:["normal","start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"]}],"align-items":[{items:["start","end","center","stretch","center-safe","end-safe",{baseline:["","last"]}]}],"align-self":[{self:["auto","start","end","center","stretch","center-safe","end-safe",{baseline:["","last"]}]}],"place-content":[{"place-content":["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"]}],"place-items":[{"place-items":["start","end","center","stretch","center-safe","end-safe","baseline"]}],"place-self":[{"place-self":["auto","start","end","center","stretch","center-safe","end-safe"]}],p:[{p:y()}],px:[{px:y()}],py:[{py:y()}],ps:[{ps:y()}],pe:[{pe:y()}],pt:[{pt:y()}],pr:[{pr:y()}],pb:[{pb:y()}],pl:[{pl:y()}],m:[{m:C()}],mx:[{mx:C()}],my:[{my:C()}],ms:[{ms:C()}],me:[{me:C()}],mt:[{mt:C()}],mr:[{mr:C()}],mb:[{mb:C()}],ml:[{ml:C()}],"space-x":[{"space-x":y()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":y()}],"space-y-reverse":["space-y-reverse"],size:[{size:S()}],w:[{w:[o,"screen",...S()]}],"min-w":[{"min-w":[o,"screen","none",...S()]}],"max-w":[{"max-w":[o,"screen","none","prose",{screen:[r]},...S()]}],h:[{h:["screen","lh",...S()]}],"min-h":[{"min-h":["screen","lh","none",...S()]}],"max-h":[{"max-h":["screen","lh",...S()]}],"font-size":[{text:["base",a,kc,xc]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[n,jc,vc]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",oc,gc]}],"font-family":[{font:[Nc,gc,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,jc,gc]}],"line-clamp":[{"line-clamp":[ic,"none",jc,vc]}],leading:[{leading:[i,...y()]}],"list-image":[{"list-image":["none",jc,gc]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",jc,gc]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:R()}],"text-color":[{text:R()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:["solid","dashed","dotted","double","wavy"]}],"text-decoration-thickness":[{decoration:[ic,"from-font","auto",jc,xc]}],"text-decoration-color":[{decoration:R()}],"underline-offset":[{"underline-offset":[ic,"auto",jc,gc]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:y()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",jc,gc]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",jc,gc]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:A()}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","space","round"]}]}],"bg-size":[{bg:_()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},rc,jc,gc],radial:["",jc,gc],conic:[rc,jc,gc]},Sc,yc]}],"bg-color":[{bg:R()}],"gradient-from-pos":[{from:T()}],"gradient-via-pos":[{via:T()}],"gradient-to-pos":[{to:T()}],"gradient-from":[{from:R()}],"gradient-via":[{via:R()}],"gradient-to":[{to:R()}],rounded:[{rounded:z()}],"rounded-s":[{"rounded-s":z()}],"rounded-e":[{"rounded-e":z()}],"rounded-t":[{"rounded-t":z()}],"rounded-r":[{"rounded-r":z()}],"rounded-b":[{"rounded-b":z()}],"rounded-l":[{"rounded-l":z()}],"rounded-ss":[{"rounded-ss":z()}],"rounded-se":[{"rounded-se":z()}],"rounded-ee":[{"rounded-ee":z()}],"rounded-es":[{"rounded-es":z()}],"rounded-tl":[{"rounded-tl":z()}],"rounded-tr":[{"rounded-tr":z()}],"rounded-br":[{"rounded-br":z()}],"rounded-bl":[{"rounded-bl":z()}],"border-w":[{border:M()}],"border-w-x":[{"border-x":M()}],"border-w-y":[{"border-y":M()}],"border-w-s":[{"border-s":M()}],"border-w-e":[{"border-e":M()}],"border-w-t":[{"border-t":M()}],"border-w-r":[{"border-r":M()}],"border-w-b":[{"border-b":M()}],"border-w-l":[{"border-l":M()}],"divide-x":[{"divide-x":M()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":M()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:["solid","dashed","dotted","double","hidden","none"]}],"divide-style":[{divide:["solid","dashed","dotted","double","hidden","none"]}],"border-color":[{border:R()}],"border-color-x":[{"border-x":R()}],"border-color-y":[{"border-y":R()}],"border-color-s":[{"border-s":R()}],"border-color-e":[{"border-e":R()}],"border-color-t":[{"border-t":R()}],"border-color-r":[{"border-r":R()}],"border-color-b":[{"border-b":R()}],"border-color-l":[{"border-l":R()}],"divide-color":[{divide:R()}],"outline-style":[{outline:["solid","dashed","dotted","double","none","hidden"]}],"outline-offset":[{"outline-offset":[ic,jc,gc]}],"outline-w":[{outline:["",ic,kc,xc]}],"outline-color":[{outline:R()}],shadow:[{shadow:["","none",d,Rc,wc]}],"shadow-color":[{shadow:R()}],"inset-shadow":[{"inset-shadow":["none",u,Rc,wc]}],"inset-shadow-color":[{"inset-shadow":R()}],"ring-w":[{ring:M()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:R()}],"ring-offset-w":[{"ring-offset":[ic,xc]}],"ring-offset-color":[{"ring-offset":R()}],"inset-ring-w":[{"inset-ring":M()}],"inset-ring-color":[{"inset-ring":R()}],"text-shadow":[{"text-shadow":["none",p,Rc,wc]}],"text-shadow-color":[{"text-shadow":R()}],opacity:[{opacity:[ic,jc,gc]}],"mix-blend":[{"mix-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[ic]}],"mask-image-linear-from-pos":[{"mask-linear-from":O()}],"mask-image-linear-to-pos":[{"mask-linear-to":O()}],"mask-image-linear-from-color":[{"mask-linear-from":R()}],"mask-image-linear-to-color":[{"mask-linear-to":R()}],"mask-image-t-from-pos":[{"mask-t-from":O()}],"mask-image-t-to-pos":[{"mask-t-to":O()}],"mask-image-t-from-color":[{"mask-t-from":R()}],"mask-image-t-to-color":[{"mask-t-to":R()}],"mask-image-r-from-pos":[{"mask-r-from":O()}],"mask-image-r-to-pos":[{"mask-r-to":O()}],"mask-image-r-from-color":[{"mask-r-from":R()}],"mask-image-r-to-color":[{"mask-r-to":R()}],"mask-image-b-from-pos":[{"mask-b-from":O()}],"mask-image-b-to-pos":[{"mask-b-to":O()}],"mask-image-b-from-color":[{"mask-b-from":R()}],"mask-image-b-to-color":[{"mask-b-to":R()}],"mask-image-l-from-pos":[{"mask-l-from":O()}],"mask-image-l-to-pos":[{"mask-l-to":O()}],"mask-image-l-from-color":[{"mask-l-from":R()}],"mask-image-l-to-color":[{"mask-l-to":R()}],"mask-image-x-from-pos":[{"mask-x-from":O()}],"mask-image-x-to-pos":[{"mask-x-to":O()}],"mask-image-x-from-color":[{"mask-x-from":R()}],"mask-image-x-to-color":[{"mask-x-to":R()}],"mask-image-y-from-pos":[{"mask-y-from":O()}],"mask-image-y-to-pos":[{"mask-y-to":O()}],"mask-image-y-from-color":[{"mask-y-from":R()}],"mask-image-y-to-color":[{"mask-y-to":R()}],"mask-image-radial":[{"mask-radial":[jc,gc]}],"mask-image-radial-from-pos":[{"mask-radial-from":O()}],"mask-image-radial-to-pos":[{"mask-radial-to":O()}],"mask-image-radial-from-color":[{"mask-radial-from":R()}],"mask-image-radial-to-color":[{"mask-radial-to":R()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"]}],"mask-image-conic-pos":[{"mask-conic":[ic]}],"mask-image-conic-from-pos":[{"mask-conic-from":O()}],"mask-image-conic-to-pos":[{"mask-conic-to":O()}],"mask-image-conic-from-color":[{"mask-conic-from":R()}],"mask-image-conic-to-color":[{"mask-conic-to":R()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:A()}],"mask-repeat":[{mask:["no-repeat",{repeat:["","x","y","space","round"]}]}],"mask-size":[{mask:_()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",jc,gc]}],filter:[{filter:["","none",jc,gc]}],blur:[{blur:I()}],brightness:[{brightness:[ic,jc,gc]}],contrast:[{contrast:[ic,jc,gc]}],"drop-shadow":[{"drop-shadow":["","none",m,Rc,wc]}],"drop-shadow-color":[{"drop-shadow":R()}],grayscale:[{grayscale:["",ic,jc,gc]}],"hue-rotate":[{"hue-rotate":[ic,jc,gc]}],invert:[{invert:["",ic,jc,gc]}],saturate:[{saturate:[ic,jc,gc]}],sepia:[{sepia:["",ic,jc,gc]}],"backdrop-filter":[{"backdrop-filter":["","none",jc,gc]}],"backdrop-blur":[{"backdrop-blur":I()}],"backdrop-brightness":[{"backdrop-brightness":[ic,jc,gc]}],"backdrop-contrast":[{"backdrop-contrast":[ic,jc,gc]}],"backdrop-grayscale":[{"backdrop-grayscale":["",ic,jc,gc]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[ic,jc,gc]}],"backdrop-invert":[{"backdrop-invert":["",ic,jc,gc]}],"backdrop-opacity":[{"backdrop-opacity":[ic,jc,gc]}],"backdrop-saturate":[{"backdrop-saturate":[ic,jc,gc]}],"backdrop-sepia":[{"backdrop-sepia":["",ic,jc,gc]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":y()}],"border-spacing-x":[{"border-spacing-x":y()}],"border-spacing-y":[{"border-spacing-y":y()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",jc,gc]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[ic,"initial",jc,gc]}],ease:[{ease:["linear","initial",x,jc,gc]}],delay:[{delay:[ic,jc,gc]}],animate:[{animate:["none",v,jc,gc]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[f,jc,gc]}],"perspective-origin":[{"perspective-origin":b()}],rotate:[{rotate:P()}],"rotate-x":[{"rotate-x":P()}],"rotate-y":[{"rotate-y":P()}],"rotate-z":[{"rotate-z":P()}],scale:[{scale:D()}],"scale-x":[{"scale-x":D()}],"scale-y":[{"scale-y":D()}],"scale-z":[{"scale-z":D()}],"scale-3d":["scale-3d"],skew:[{skew:F()}],"skew-x":[{"skew-x":F()}],"skew-y":[{"skew-y":F()}],transform:[{transform:[jc,gc,"","none","gpu","cpu"]}],"transform-origin":[{origin:b()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:L()}],"translate-x":[{"translate-x":L()}],"translate-y":[{"translate-y":L()}],"translate-z":[{"translate-z":L()}],"translate-none":["translate-none"],accent:[{accent:R()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:R()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",jc,gc]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":y()}],"scroll-mx":[{"scroll-mx":y()}],"scroll-my":[{"scroll-my":y()}],"scroll-ms":[{"scroll-ms":y()}],"scroll-me":[{"scroll-me":y()}],"scroll-mt":[{"scroll-mt":y()}],"scroll-mr":[{"scroll-mr":y()}],"scroll-mb":[{"scroll-mb":y()}],"scroll-ml":[{"scroll-ml":y()}],"scroll-p":[{"scroll-p":y()}],"scroll-px":[{"scroll-px":y()}],"scroll-py":[{"scroll-py":y()}],"scroll-ps":[{"scroll-ps":y()}],"scroll-pe":[{"scroll-pe":y()}],"scroll-pt":[{"scroll-pt":y()}],"scroll-pr":[{"scroll-pr":y()}],"scroll-pb":[{"scroll-pb":y()}],"scroll-pl":[{"scroll-pl":y()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",jc,gc]}],fill:[{fill:["none",...R()]}],"stroke-w":[{stroke:[ic,kc,xc,vc]}],stroke:[{stroke:["none",...R()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}});function Lc(...e){return Fc(zl(e))}function Uc({className:e,...a}){return t.jsx("div",{"data-slot":"card",className:Lc("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...a})}function $c({className:e,...a}){return t.jsx("div",{"data-slot":"card-header",className:Lc("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...a})}function Vc({className:e,...a}){return t.jsx("div",{"data-slot":"card-title",className:Lc("leading-none font-semibold",e),...a})}function Bc({className:e,...a}){return t.jsx("div",{"data-slot":"card-description",className:Lc("text-muted-foreground text-sm",e),...a})}function Hc({className:e,...a}){return t.jsx("div",{"data-slot":"card-content",className:Lc("px-6",e),...a})}function qc({className:e,...a}){return t.jsx("div",{"data-slot":"card-footer",className:Lc("flex items-center px-6 [.border-t]:pt-6",e),...a})}
/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gc=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},Kc=(...e)=>e.filter((e,t,a)=>Boolean(e)&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim(),Zc=e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};
/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
var Qc={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};
/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wc=e.forwardRef(({color:t="currentColor",size:a=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:i="",children:r,iconNode:o,...l},c)=>e.createElement("svg",{ref:c,...Qc,width:a,height:a,stroke:t,strokeWidth:s?24*Number(n)/Number(a):n,className:Kc("lucide",i),...!r&&!Zc(l)&&{"aria-hidden":"true"},...l},[...o.map(([t,a])=>e.createElement(t,a)),...Array.isArray(r)?r:[r]])),Yc=(t,a)=>{const n=e.forwardRef(({className:n,...s},i)=>{return e.createElement(Wc,{ref:i,iconNode:a,className:Kc(`lucide-${r=Gc(t),r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${t}`,n),...s});var r});return n.displayName=Gc(t),n},Xc=Yc("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Jc=Yc("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),ed=Yc("ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]),td=Yc("box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),ad=Yc("camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),nd=Yc("chart-no-axes-column-increasing",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]),sd=Yc("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),id=Yc("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),rd=Yc("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),od=Yc("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),ld=Yc("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),cd=Yc("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),dd=Yc("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),ud=Yc("circle-question-mark",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),pd=Yc("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]),md=Yc("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),hd=Yc("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),fd=Yc("file-image",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]),gd=Yc("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),xd=Yc("fingerprint",[["path",{d:"M12 10a2 2 0 0 0-2 2c0 1.02-.1 2.51-.26 4",key:"1nerag"}],["path",{d:"M14 13.12c0 2.38 0 6.38-1 8.88",key:"o46ks0"}],["path",{d:"M17.29 21.02c.12-.6.43-2.3.5-3.02",key:"ptglia"}],["path",{d:"M2 12a10 10 0 0 1 18-6",key:"ydlgp0"}],["path",{d:"M2 16h.01",key:"1gqxmh"}],["path",{d:"M21.8 16c.2-2 .131-5.354 0-6",key:"drycrb"}],["path",{d:"M5 19.5C5.5 18 6 15 6 12a6 6 0 0 1 .34-2",key:"1tidbn"}],["path",{d:"M8.65 22c.21-.66.45-1.32.57-2",key:"13wd9y"}],["path",{d:"M9 6.8a6 6 0 0 1 9 5.2v2",key:"1fr1j5"}]]),vd=Yc("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),bd=Yc("images",[["path",{d:"M18 22H4a2 2 0 0 1-2-2V6",key:"pblm9e"}],["path",{d:"m22 13-1.296-1.296a2.41 2.41 0 0 0-3.408 0L11 18",key:"nf6bnh"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}],["rect",{width:"16",height:"16",x:"6",y:"2",rx:"2",key:"12espp"}]]),yd=Yc("lamp-desk",[["path",{d:"M10.293 2.293a1 1 0 0 1 1.414 0l2.5 2.5 5.994 1.227a1 1 0 0 1 .506 1.687l-7 7a1 1 0 0 1-1.687-.506l-1.227-5.994-2.5-2.5a1 1 0 0 1 0-1.414z",key:"sb8slu"}],["path",{d:"m14.207 4.793-3.414 3.414",key:"m2x3oj"}],["path",{d:"M3 20a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v1a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1z",key:"8b3myj"}],["path",{d:"m9.086 6.5-4.793 4.793a1 1 0 0 0-.18 1.17L7 18",key:"43s6cu"}]]),wd=Yc("layers",[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]]),jd=Yc("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),kd=Yc("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),Nd=Yc("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]),Ed=Yc("maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]),Cd=Yc("move",[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]]),Sd=Yc("music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]),Rd=Yc("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]),Ad=Yc("pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]),_d=Yc("play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]),Td=Yc("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),zd=Yc("rotate-cw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]),Md=Yc("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),Od=Yc("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),Id=Yc("settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Pd=Yc("share",[["path",{d:"M12 2v13",key:"1km8f5"}],["path",{d:"m16 6-4-4-4 4",key:"13yo43"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}]]),Dd=Yc("smile-plus",[["path",{d:"M22 11v1a10 10 0 1 1-9-10",key:"ew0xw9"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}],["path",{d:"M16 5h6",key:"1vod17"}],["path",{d:"M19 2v6",key:"4bpg5p"}]]),Fd=Yc("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),Ld=Yc("sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),Ud=Yc("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),$d=Yc("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Vd=Yc("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]),Bd=Yc("user-x",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]),Hd=Yc("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),qd=Yc("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),Gd=Yc("video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]),Kd=Yc("volume-2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]),Zd=Yc("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);
/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */function Qd(){return t.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:t.jsx(Uc,{className:"w-full max-w-md mx-4",children:t.jsxs(Hc,{className:"pt-6",children:[t.jsxs("div",{className:"flex mb-4 gap-2",children:[t.jsx(cd,{className:"h-8 w-8 text-red-500"}),t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),t.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}const Wd=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,Yd=zl,Xd=(e,t)=>a=>{var n;if(null==(null==t?void 0:t.variants))return Yd(e,null==a?void 0:a.class,null==a?void 0:a.className);const{variants:s,defaultVariants:i}=t,r=Object.keys(s).map(e=>{const t=null==a?void 0:a[e],n=null==i?void 0:i[e];if(null===t)return null;const r=Wd(t)||Wd(n);return s[e][r]}),o=a&&Object.entries(a).reduce((e,t)=>{let[a,n]=t;return void 0===n||(e[a]=n),e},{}),l=null==t||null===(n=t.compoundVariants)||void 0===n?void 0:n.reduce((e,t)=>{let{class:a,className:n,...s}=t;return Object.entries(s).every(e=>{let[t,a]=e;return Array.isArray(a)?a.includes({...i,...o}[t]):{...i,...o}[t]===a})?[...e,a,n]:e},[]);return Yd(e,r,l,null==a?void 0:a.class,null==a?void 0:a.className)},Jd=Xd("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function eu({className:e,variant:a,size:n,asChild:s=!1,...i}){const r=s?Re:"button";return t.jsx(r,{"data-slot":"button",className:Lc(Jd({variant:a,size:n,className:e})),...i})}function tu(){const e=Xa(),a=[{id:"image-tracking",title:"Image Tracking",icon:ad,description:"Create AR experiences based on image recognition",path:"/image-tracking"},{id:"multiple-image",title:"Multiple Image",icon:bd,description:"Use multiple images for an advanced AR experience",path:"/multiple-image-tracking"},{id:"multi-track",title:"Multi-Track",icon:td,description:"Track multiple objects simultaneously",path:"/create?type=multi-track"},{id:"interactivity",title:"Interactivity",icon:xd,description:"Add interactive elements to your AR experience",path:"/create?type=interactive"},{id:"face-tracking",title:"Face Tracking",icon:Dd,description:"Create AR effects applied to faces",path:"/create?type=face"},{id:"settings",title:"Settings",icon:Id,description:"Configure your AR experience settings",path:"/settings"}];return t.jsxs("div",{className:"min-h-screen w-full bg-slate-900 text-white",children:[t.jsxs("main",{className:"container mx-auto p-6",children:[t.jsx("h2",{className:"text-2xl font-semibold mb-8",children:"Select AR Experience Type"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(e=>t.jsx(Ln,{to:e.path,children:t.jsx(Uc,{className:"bg-slate-800/70 border-slate-700 hover:border-blue-500/50 hover:bg-slate-800 transition-all cursor-pointer h-full",children:t.jsxs("div",{className:"p-6 flex flex-col items-center text-center",children:[t.jsx("div",{className:"bg-slate-700 h-16 w-16 rounded-full flex items-center justify-center mb-6",children:t.jsx(e.icon,{className:"h-8 w-8 text-slate-300"})}),t.jsx("h3",{className:"text-lg text-white font-medium mb-2",children:e.title}),t.jsx("p",{className:"text-slate-400 text-sm",children:e.description})]})})},e.id))})]}),t.jsx("footer",{className:"p-6 border-t border-slate-800 mt-auto",children:t.jsxs("div",{className:"container mx-auto flex flex-col md:flex-row justify-between items-center",children:[t.jsx("p",{className:"text-slate-400 text-sm",children:"© 2023 PACKAR - Create your AR experience"}),t.jsxs("div",{className:"flex gap-4 mt-4 md:mt-0",children:[t.jsxs(eu,{variant:"ghost",size:"sm",className:"flex gap-2 items-center text-slate-300",children:[t.jsx(ud,{className:"h-4 w-4"}),"Help"]}),t.jsx(eu,{onClick:()=>e("/experiences"),className:"bg-blue-600 hover:bg-blue-700",children:"My Experiences"})]})]})})]})}var au=e=>"checkbox"===e.type,nu=e=>e instanceof Date,su=e=>null==e;const iu=e=>"object"==typeof e;var ru=e=>!su(e)&&!Array.isArray(e)&&iu(e)&&!nu(e),ou=e=>ru(e)&&e.target?au(e.target)?e.target.checked:e.target.value:e,lu=(e,t)=>e.has((e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e)(t)),cu="undefined"!=typeof window&&void 0!==window.HTMLElement&&"undefined"!=typeof document;function du(e){let t;const a=Array.isArray(e),n="undefined"!=typeof FileList&&e instanceof FileList;if(e instanceof Date)t=new Date(e);else{if(cu&&(e instanceof Blob||n)||!a&&!ru(e))return e;if(t=a?[]:{},a||(e=>{const t=e.constructor&&e.constructor.prototype;return ru(t)&&t.hasOwnProperty("isPrototypeOf")})(e))for(const a in e)e.hasOwnProperty(a)&&(t[a]=du(e[a]));else t=e}return t}var uu=e=>/^\w*$/.test(e),pu=e=>void 0===e,mu=e=>Array.isArray(e)?e.filter(Boolean):[],hu=e=>mu(e.replace(/["|']|\]/g,"").split(/\.|\[/)),fu=(e,t,a)=>{if(!t||!ru(e))return a;const n=(uu(t)?[t]:hu(t)).reduce((e,t)=>su(e)?e:e[t],e);return pu(n)||n===e?pu(e[t])?a:e[t]:n},gu=e=>"boolean"==typeof e,xu=(e,t,a)=>{let n=-1;const s=uu(t)?[t]:hu(t),i=s.length,r=i-1;for(;++n<i;){const t=s[n];let i=a;if(n!==r){const a=e[t];i=ru(a)||Array.isArray(a)?a:isNaN(+s[n+1])?{}:[]}if("__proto__"===t||"constructor"===t||"prototype"===t)return;e[t]=i,e=e[t]}};const vu="blur",bu="focusout",yu="change",wu="onBlur",ju="onChange",ku="onSubmit",Nu="onTouched",Eu="all",Cu="max",Su="min",Ru="maxLength",Au="minLength",_u="pattern",Tu="required",zu="validate",Mu=a.createContext(null);Mu.displayName="HookFormContext";const Ou=()=>a.useContext(Mu);var Iu=(e,t,a,n=!0)=>{const s={defaultValues:t._defaultValues};for(const i in e)Object.defineProperty(s,i,{get:()=>{const s=i;return t._proxyFormState[s]!==Eu&&(t._proxyFormState[s]=!n||Eu),a&&(a[s]=!0),e[s]}});return s};const Pu="undefined"!=typeof window?e.useLayoutEffect:e.useEffect;function Du(e){const t=Ou(),{control:n=t.control,disabled:s,name:i,exact:r}=e||{},[o,l]=a.useState(n._formState),c=a.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return Pu(()=>n._subscribe({name:i,formState:c.current,exact:r,callback:e=>{!s&&l({...n._formState,...e})}}),[i,s,r]),a.useEffect(()=>{c.current.isValid&&n._setValid(!0)},[n]),a.useMemo(()=>Iu(o,n,c.current,!1),[o,n])}var Fu=e=>"string"==typeof e,Lu=(e,t,a,n,s)=>Fu(e)?(n&&t.watch.add(e),fu(a,e,s)):Array.isArray(e)?e.map(e=>(n&&t.watch.add(e),fu(a,e))):(n&&(t.watchAll=!0),a);function Uu(e){const t=Ou(),{name:n,disabled:s,control:i=t.control,shouldUnregister:r}=e,o=lu(i._names.array,n),l=function(e){const t=Ou(),{control:n=t.control,name:s,defaultValue:i,disabled:r,exact:o}=e||{},l=a.useRef(i),[c,d]=a.useState(n._getWatch(s,l.current));return Pu(()=>n._subscribe({name:s,formState:{values:!0},exact:o,callback:e=>!r&&d(Lu(s,n._names,e.values||n._formValues,!1,l.current))}),[s,n,r,o]),a.useEffect(()=>n._removeUnmounted()),c}({control:i,name:n,defaultValue:fu(i._formValues,n,fu(i._defaultValues,n,e.defaultValue)),exact:!0}),c=Du({control:i,name:n,exact:!0}),d=a.useRef(e),u=a.useRef(i.register(n,{...e.rules,value:l,...gu(e.disabled)?{disabled:e.disabled}:{}})),p=a.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!fu(c.errors,n)},isDirty:{enumerable:!0,get:()=>!!fu(c.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!fu(c.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!fu(c.validatingFields,n)},error:{enumerable:!0,get:()=>fu(c.errors,n)}}),[c,n]),m=a.useCallback(e=>u.current.onChange({target:{value:ou(e),name:n},type:yu}),[n]),h=a.useCallback(()=>u.current.onBlur({target:{value:fu(i._formValues,n),name:n},type:vu}),[n,i._formValues]),f=a.useCallback(e=>{const t=fu(i._fields,n);t&&e&&(t._f.ref={focus:()=>e.focus&&e.focus(),select:()=>e.select&&e.select(),setCustomValidity:t=>e.setCustomValidity(t),reportValidity:()=>e.reportValidity()})},[i._fields,n]),g=a.useMemo(()=>({name:n,value:l,...gu(s)||c.disabled?{disabled:c.disabled||s}:{},onChange:m,onBlur:h,ref:f}),[n,s,c.disabled,m,h,f,l]);return a.useEffect(()=>{const e=i._options.shouldUnregister||r;i.register(n,{...d.current.rules,...gu(d.current.disabled)?{disabled:d.current.disabled}:{}});const t=(e,t)=>{const a=fu(i._fields,e);a&&a._f&&(a._f.mount=t)};if(t(n,!0),e){const e=du(fu(i._options.defaultValues,n));xu(i._defaultValues,n,e),pu(fu(i._formValues,n))&&xu(i._formValues,n,e)}return!o&&i.register(n),()=>{(o?e&&!i._state.action:e)?i.unregister(n):t(n,!1)}},[n,i,o,r]),a.useEffect(()=>{i._setDisabledField({disabled:s,name:n})},[s,n,i]),a.useMemo(()=>({field:g,formState:c,fieldState:p}),[g,c,p])}const $u=e=>e.render(Uu(e));var Vu=(e,t,a,n,s)=>t?{...a[e],types:{...a[e]&&a[e].types?a[e].types:{},[n]:s||!0}}:{},Bu=e=>Array.isArray(e)?e:[e],Hu=()=>{let e=[];return{get observers(){return e},next:t=>{for(const a of e)a.next&&a.next(t)},subscribe:t=>(e.push(t),{unsubscribe:()=>{e=e.filter(e=>e!==t)}}),unsubscribe:()=>{e=[]}}},qu=e=>su(e)||!iu(e);function Gu(e,t,a=new WeakSet){if(qu(e)||qu(t))return e===t;if(nu(e)&&nu(t))return e.getTime()===t.getTime();const n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;if(a.has(e)||a.has(t))return!0;a.add(e),a.add(t);for(const i of n){const n=e[i];if(!s.includes(i))return!1;if("ref"!==i){const e=t[i];if(nu(n)&&nu(e)||ru(n)&&ru(e)||Array.isArray(n)&&Array.isArray(e)?!Gu(n,e,a):n!==e)return!1}}return!0}var Ku=e=>ru(e)&&!Object.keys(e).length,Zu=e=>"file"===e.type,Qu=e=>"function"==typeof e,Wu=e=>{if(!cu)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},Yu=e=>"select-multiple"===e.type,Xu=e=>"radio"===e.type,Ju=e=>Wu(e)&&e.isConnected;function ep(e,t){const a=Array.isArray(t)?t:uu(t)?[t]:hu(t),n=1===a.length?e:function(e,t){const a=t.slice(0,-1).length;let n=0;for(;n<a;)e=pu(e)?n++:e[t[n++]];return e}(e,a),s=a.length-1,i=a[s];return n&&delete n[i],0!==s&&(ru(n)&&Ku(n)||Array.isArray(n)&&function(e){for(const t in e)if(e.hasOwnProperty(t)&&!pu(e[t]))return!1;return!0}(n))&&ep(e,a.slice(0,-1)),e}var tp=e=>{for(const t in e)if(Qu(e[t]))return!0;return!1};function ap(e,t={}){const a=Array.isArray(e);if(ru(e)||a)for(const n in e)Array.isArray(e[n])||ru(e[n])&&!tp(e[n])?(t[n]=Array.isArray(e[n])?[]:{},ap(e[n],t[n])):su(e[n])||(t[n]=!0);return t}function np(e,t,a){const n=Array.isArray(e);if(ru(e)||n)for(const s in e)Array.isArray(e[s])||ru(e[s])&&!tp(e[s])?pu(t)||qu(a[s])?a[s]=Array.isArray(e[s])?ap(e[s],[]):{...ap(e[s])}:np(e[s],su(t)?{}:t[s],a[s]):a[s]=!Gu(e[s],t[s]);return a}var sp=(e,t)=>np(e,t,ap(t));const ip={value:!1,isValid:!1},rp={value:!0,isValid:!0};var op=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(e=>e&&e.checked&&!e.disabled).map(e=>e.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!pu(e[0].attributes.value)?pu(e[0].value)||""===e[0].value?rp:{value:e[0].value,isValid:!0}:rp:ip}return ip},lp=(e,{valueAsNumber:t,valueAsDate:a,setValueAs:n})=>pu(e)?e:t?""===e?NaN:e?+e:e:a&&Fu(e)?new Date(e):n?n(e):e;const cp={isValid:!1,value:null};var dp=e=>Array.isArray(e)?e.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,cp):cp;function up(e){const t=e.ref;return Zu(t)?t.files:Xu(t)?dp(e.refs).value:Yu(t)?[...t.selectedOptions].map(({value:e})=>e):au(t)?op(e.refs).value:lp(pu(t.value)?e.ref.value:t.value,e)}var pp=e=>e instanceof RegExp,mp=e=>pu(e)?e:pp(e)?e.source:ru(e)?pp(e.value)?e.value.source:e.value:e,hp=e=>({isOnSubmit:!e||e===ku,isOnBlur:e===wu,isOnChange:e===ju,isOnAll:e===Eu,isOnTouch:e===Nu});const fp="AsyncFunction";var gp=e=>!!e&&!!e.validate&&!!(Qu(e.validate)&&e.validate.constructor.name===fp||ru(e.validate)&&Object.values(e.validate).find(e=>e.constructor.name===fp)),xp=(e,t,a)=>!a&&(t.watchAll||t.watch.has(e)||[...t.watch].some(t=>e.startsWith(t)&&/^\.\w+/.test(e.slice(t.length))));const vp=(e,t,a,n)=>{for(const s of a||Object.keys(e)){const a=fu(e,s);if(a){const{_f:e,...i}=a;if(e){if(e.refs&&e.refs[0]&&t(e.refs[0],s)&&!n)return!0;if(e.ref&&t(e.ref,e.name)&&!n)return!0;if(vp(i,t))break}else if(ru(i)&&vp(i,t))break}}};function bp(e,t,a){const n=fu(e,a);if(n||uu(a))return{error:n,name:a};const s=a.split(".");for(;s.length;){const n=s.join("."),i=fu(t,n),r=fu(e,n);if(i&&!Array.isArray(i)&&a!==n)return{name:a};if(r&&r.type)return{name:n,error:r};if(r&&r.root&&r.root.type)return{name:`${n}.root`,error:r.root};s.pop()}return{name:a}}var yp=(e,t,a)=>{const n=Bu(fu(e,a));return xu(n,"root",t[a]),xu(e,a,n),e},wp=e=>Fu(e);function jp(e,t,a="validate"){if(wp(e)||Array.isArray(e)&&e.every(wp)||gu(e)&&!e)return{type:a,message:wp(e)?e:"",ref:t}}var kp=e=>ru(e)&&!pp(e)?e:{value:e,message:""},Np=async(e,t,a,n,s,i)=>{const{ref:r,refs:o,required:l,maxLength:c,minLength:d,min:u,max:p,pattern:m,validate:h,name:f,valueAsNumber:g,mount:x}=e._f,v=fu(a,f);if(!x||t.has(f))return{};const b=o?o[0]:r,y=e=>{s&&b.reportValidity&&(b.setCustomValidity(gu(e)?"":e||""),b.reportValidity())},w={},j=Xu(r),k=au(r),N=j||k,E=(g||Zu(r))&&pu(r.value)&&pu(v)||Wu(r)&&""===r.value||""===v||Array.isArray(v)&&!v.length,C=Vu.bind(null,f,n,w),S=(e,t,a,n=Ru,s=Au)=>{const i=e?t:a;w[f]={type:e?n:s,message:i,ref:r,...C(e?n:s,i)}};if(i?!Array.isArray(v)||!v.length:l&&(!N&&(E||su(v))||gu(v)&&!v||k&&!op(o).isValid||j&&!dp(o).isValid)){const{value:e,message:t}=wp(l)?{value:!!l,message:l}:kp(l);if(e&&(w[f]={type:Tu,message:t,ref:b,...C(Tu,t)},!n))return y(t),w}if(!(E||su(u)&&su(p))){let e,t;const a=kp(p),s=kp(u);if(su(v)||isNaN(v)){const n=r.valueAsDate||new Date(v),i=e=>new Date((new Date).toDateString()+" "+e),o="time"==r.type,l="week"==r.type;Fu(a.value)&&v&&(e=o?i(v)>i(a.value):l?v>a.value:n>new Date(a.value)),Fu(s.value)&&v&&(t=o?i(v)<i(s.value):l?v<s.value:n<new Date(s.value))}else{const n=r.valueAsNumber||(v?+v:v);su(a.value)||(e=n>a.value),su(s.value)||(t=n<s.value)}if((e||t)&&(S(!!e,a.message,s.message,Cu,Su),!n))return y(w[f].message),w}if((c||d)&&!E&&(Fu(v)||i&&Array.isArray(v))){const e=kp(c),t=kp(d),a=!su(e.value)&&v.length>+e.value,s=!su(t.value)&&v.length<+t.value;if((a||s)&&(S(a,e.message,t.message),!n))return y(w[f].message),w}if(m&&!E&&Fu(v)){const{value:e,message:t}=kp(m);if(pp(e)&&!v.match(e)&&(w[f]={type:_u,message:t,ref:r,...C(_u,t)},!n))return y(t),w}if(h)if(Qu(h)){const e=jp(await h(v,a),b);if(e&&(w[f]={...e,...C(zu,e.message)},!n))return y(e.message),w}else if(ru(h)){let e={};for(const t in h){if(!Ku(e)&&!n)break;const s=jp(await h[t](v,a),b,t);s&&(e={...s,...C(t,s.message)},y(s.message),n&&(w[f]=e))}if(!Ku(e)&&(w[f]={ref:b,...e},!n))return w}return y(!0),w};const Ep={mode:ku,reValidateMode:ju,shouldFocusError:!0};function Cp(e={}){let t,a={...Ep,...e},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:Qu(a.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:a.errors||{},disabled:a.disabled||!1},s={},i=(ru(a.defaultValues)||ru(a.values))&&du(a.defaultValues||a.values)||{},r=a.shouldUnregister?{}:du(i),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let u={...d};const p={array:Hu(),state:Hu()},m=a.criteriaMode===Eu,h=async e=>{if(!a.disabled&&(d.isValid||u.isValid||e)){const e=a.resolver?Ku((await b()).errors):await y(s,!0);e!==n.isValid&&p.state.next({isValid:e})}},f=(e,t)=>{!a.disabled&&(d.isValidating||d.validatingFields||u.isValidating||u.validatingFields)&&((e||Array.from(l.mount)).forEach(e=>{e&&(t?xu(n.validatingFields,e,t):ep(n.validatingFields,e))}),p.state.next({validatingFields:n.validatingFields,isValidating:!Ku(n.validatingFields)}))},g=(e,t,a,n)=>{const l=fu(s,e);if(l){const s=fu(r,e,pu(a)?fu(i,e):a);pu(s)||n&&n.defaultChecked||t?xu(r,e,t?s:up(l._f)):k(e,s),o.mount&&h()}},x=(e,t,s,r,o)=>{let l=!1,c=!1;const m={name:e};if(!a.disabled){if(!s||r){(d.isDirty||u.isDirty)&&(c=n.isDirty,n.isDirty=m.isDirty=w(),l=c!==m.isDirty);const a=Gu(fu(i,e),t);c=!!fu(n.dirtyFields,e),a?ep(n.dirtyFields,e):xu(n.dirtyFields,e,!0),m.dirtyFields=n.dirtyFields,l=l||(d.dirtyFields||u.dirtyFields)&&c!==!a}if(s){const t=fu(n.touchedFields,e);t||(xu(n.touchedFields,e,s),m.touchedFields=n.touchedFields,l=l||(d.touchedFields||u.touchedFields)&&t!==s)}l&&o&&p.state.next(m)}return l?m:{}},v=(e,s,i,r)=>{const o=fu(n.errors,e),l=(d.isValid||u.isValid)&&gu(s)&&n.isValid!==s;var m;if(a.delayError&&i?(m=()=>((e,t)=>{xu(n.errors,e,t),p.state.next({errors:n.errors})})(e,i),t=e=>{clearTimeout(c),c=setTimeout(m,e)},t(a.delayError)):(clearTimeout(c),t=null,i?xu(n.errors,e,i):ep(n.errors,e)),(i?!Gu(o,i):o)||!Ku(r)||l){const t={...r,...l&&gu(s)?{isValid:s}:{},errors:n.errors,name:e};n={...n,...t},p.state.next(t)}},b=async e=>{f(e,!0);const t=await a.resolver(r,a.context,((e,t,a,n)=>{const s={};for(const i of e){const e=fu(t,i);e&&xu(s,i,e._f)}return{criteriaMode:a,names:[...e],fields:s,shouldUseNativeValidation:n}})(e||l.mount,s,a.criteriaMode,a.shouldUseNativeValidation));return f(e),t},y=async(e,t,s={valid:!0})=>{for(const i in e){const o=e[i];if(o){const{_f:e,...c}=o;if(e){const c=l.array.has(e.name),u=o._f&&gp(o._f);u&&d.validatingFields&&f([i],!0);const p=await Np(o,l.disabled,r,m,a.shouldUseNativeValidation&&!t,c);if(u&&d.validatingFields&&f([i]),p[e.name]&&(s.valid=!1,t))break;!t&&(fu(p,e.name)?c?yp(n.errors,p,e.name):xu(n.errors,e.name,p[e.name]):ep(n.errors,e.name))}!Ku(c)&&await y(c,t,s)}}return s.valid},w=(e,t)=>!a.disabled&&(e&&t&&xu(r,e,t),!Gu(A(),i)),j=(e,t,a)=>Lu(e,l,{...o.mount?r:pu(t)?i:Fu(e)?{[e]:t}:t},a,t),k=(e,t,a={})=>{const n=fu(s,e);let i=t;if(n){const a=n._f;a&&(!a.disabled&&xu(r,e,lp(t,a)),i=Wu(a.ref)&&su(t)?"":t,Yu(a.ref)?[...a.ref.options].forEach(e=>e.selected=i.includes(e.value)):a.refs?au(a.ref)?a.refs.forEach(e=>{e.defaultChecked&&e.disabled||(Array.isArray(i)?e.checked=!!i.find(t=>t===e.value):e.checked=i===e.value||!!i)}):a.refs.forEach(e=>e.checked=e.value===i):Zu(a.ref)?a.ref.value="":(a.ref.value=i,a.ref.type||p.state.next({name:e,values:du(r)})))}(a.shouldDirty||a.shouldTouch)&&x(e,i,a.shouldTouch,a.shouldDirty,!0),a.shouldValidate&&R(e)},N=(e,t,a)=>{for(const n in t){if(!t.hasOwnProperty(n))return;const i=t[n],r=e+"."+n,o=fu(s,r);(l.array.has(e)||ru(i)||o&&!o._f)&&!nu(i)?N(r,i,a):k(r,i,a)}},E=(e,t,a={})=>{const c=fu(s,e),m=l.array.has(e),h=du(t);xu(r,e,h),m?(p.array.next({name:e,values:du(r)}),(d.isDirty||d.dirtyFields||u.isDirty||u.dirtyFields)&&a.shouldDirty&&p.state.next({name:e,dirtyFields:sp(i,r),isDirty:w(e,h)})):!c||c._f||su(h)?k(e,h,a):N(e,h,a),xp(e,l)&&p.state.next({...n}),p.state.next({name:o.mount?e:void 0,values:du(r)})},C=async e=>{o.mount=!0;const i=e.target;let c=i.name,g=!0;const w=fu(s,c),j=e=>{g=Number.isNaN(e)||nu(e)&&isNaN(e.getTime())||Gu(e,fu(r,c,e))},k=hp(a.mode),N=hp(a.reValidateMode);if(w){let o,C;const S=i.type?up(w._f):ou(e),A=e.type===vu||e.type===bu,_=!((E=w._f).mount&&(E.required||E.min||E.max||E.maxLength||E.minLength||E.pattern||E.validate)||a.resolver||fu(n.errors,c)||w._f.deps)||((e,t,a,n,s)=>!s.isOnAll&&(!a&&s.isOnTouch?!(t||e):(a?n.isOnBlur:s.isOnBlur)?!e:!(a?n.isOnChange:s.isOnChange)||e))(A,fu(n.touchedFields,c),n.isSubmitted,N,k),T=xp(c,l,A);xu(r,c,S),A?(w._f.onBlur&&w._f.onBlur(e),t&&t(0)):w._f.onChange&&w._f.onChange(e);const z=x(c,S,A),M=!Ku(z)||T;if(!A&&p.state.next({name:c,type:e.type,values:du(r)}),_)return(d.isValid||u.isValid)&&("onBlur"===a.mode?A&&h():A||h()),M&&p.state.next({name:c,...T?{}:z});if(!A&&T&&p.state.next({...n}),a.resolver){const{errors:e}=await b([c]);if(j(S),g){const t=bp(n.errors,s,c),a=bp(e,s,t.name||c);o=a.error,c=a.name,C=Ku(e)}}else f([c],!0),o=(await Np(w,l.disabled,r,m,a.shouldUseNativeValidation))[c],f([c]),j(S),g&&(o?C=!1:(d.isValid||u.isValid)&&(C=await y(s,!0)));g&&(w._f.deps&&R(w._f.deps),v(c,C,o,z))}var E},S=(e,t)=>{if(fu(n.errors,t)&&e.focus)return e.focus(),1},R=async(e,t={})=>{let i,r;const o=Bu(e);if(a.resolver){const t=await(async e=>{const{errors:t}=await b(e);if(e)for(const a of e){const e=fu(t,a);e?xu(n.errors,a,e):ep(n.errors,a)}else n.errors=t;return t})(pu(e)?e:o);i=Ku(t),r=e?!o.some(e=>fu(t,e)):i}else e?(r=(await Promise.all(o.map(async e=>{const t=fu(s,e);return await y(t&&t._f?{[e]:t}:t)}))).every(Boolean),(r||n.isValid)&&h()):r=i=await y(s);return p.state.next({...!Fu(e)||(d.isValid||u.isValid)&&i!==n.isValid?{}:{name:e},...a.resolver||!e?{isValid:i}:{},errors:n.errors}),t.shouldFocus&&!r&&vp(s,S,e?o:l.mount),r},A=e=>{const t={...o.mount?r:i};return pu(e)?t:Fu(e)?fu(t,e):e.map(e=>fu(t,e))},_=(e,t)=>({invalid:!!fu((t||n).errors,e),isDirty:!!fu((t||n).dirtyFields,e),error:fu((t||n).errors,e),isValidating:!!fu(n.validatingFields,e),isTouched:!!fu((t||n).touchedFields,e)}),T=(e,t,a)=>{const i=(fu(s,e,{_f:{}})._f||{}).ref,r=fu(n.errors,e)||{},{ref:o,message:l,type:c,...d}=r;xu(n.errors,e,{...d,...t,ref:i}),p.state.next({name:e,errors:n.errors,isValid:!1}),a&&a.shouldFocus&&i&&i.focus&&i.focus()},z=e=>p.state.subscribe({next:t=>{var a,s,i;a=e.name,s=t.name,i=e.exact,a&&s&&a!==s&&!Bu(a).some(e=>e&&(i?e===s:e.startsWith(s)||s.startsWith(e)))||!((e,t,a,n)=>{a(e);const{name:s,...i}=e;return Ku(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(e=>t[e]===(!n||Eu))})(t,e.formState||d,U,e.reRenderRoot)||e.callback({values:{...r},...n,...t})}}).unsubscribe,M=(e,t={})=>{for(const o of e?Bu(e):l.mount)l.mount.delete(o),l.array.delete(o),t.keepValue||(ep(s,o),ep(r,o)),!t.keepError&&ep(n.errors,o),!t.keepDirty&&ep(n.dirtyFields,o),!t.keepTouched&&ep(n.touchedFields,o),!t.keepIsValidating&&ep(n.validatingFields,o),!a.shouldUnregister&&!t.keepDefaultValue&&ep(i,o);p.state.next({values:du(r)}),p.state.next({...n,...t.keepDirty?{isDirty:w()}:{}}),!t.keepIsValid&&h()},O=({disabled:e,name:t})=>{(gu(e)&&o.mount||e||l.disabled.has(t))&&(e?l.disabled.add(t):l.disabled.delete(t))},I=(e,t={})=>{let n=fu(s,e);const r=gu(t.disabled)||gu(a.disabled);return xu(s,e,{...n||{},_f:{...n&&n._f?n._f:{ref:{name:e}},name:e,mount:!0,...t}}),l.mount.add(e),n?O({disabled:gu(t.disabled)?t.disabled:a.disabled,name:e}):g(e,!0,t.value),{...r?{disabled:t.disabled||a.disabled}:{},...a.progressive?{required:!!t.required,min:mp(t.min),max:mp(t.max),minLength:mp(t.minLength),maxLength:mp(t.maxLength),pattern:mp(t.pattern)}:{},name:e,onChange:C,onBlur:C,ref:r=>{if(r){I(e,t),n=fu(s,e);const a=pu(r.value)&&r.querySelectorAll&&r.querySelectorAll("input,select,textarea")[0]||r,o=(e=>Xu(e)||au(e))(a),l=n._f.refs||[];if(o?l.find(e=>e===a):a===n._f.ref)return;xu(s,e,{_f:{...n._f,...o?{refs:[...l.filter(Ju),a,...Array.isArray(fu(i,e))?[{}]:[]],ref:{type:a.type,name:e}}:{ref:a}}}),g(e,!1,void 0,a)}else n=fu(s,e,{}),n._f&&(n._f.mount=!1),(a.shouldUnregister||t.shouldUnregister)&&(!lu(l.array,e)||!o.action)&&l.unMount.add(e)}}},P=()=>a.shouldFocusError&&vp(s,S,l.mount),D=(e,t)=>async i=>{let o;i&&(i.preventDefault&&i.preventDefault(),i.persist&&i.persist());let c=du(r);if(p.state.next({isSubmitting:!0}),a.resolver){const{errors:e,values:t}=await b();n.errors=e,c=du(t)}else await y(s);if(l.disabled.size)for(const e of l.disabled)ep(c,e);if(ep(n.errors,"root"),Ku(n.errors)){p.state.next({errors:{}});try{await e(c,i)}catch(d){o=d}}else t&&await t({...n.errors},i),P(),setTimeout(P);if(p.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Ku(n.errors)&&!o,submitCount:n.submitCount+1,errors:n.errors}),o)throw o},F=(e,t={})=>{const c=e?du(e):i,u=du(c),m=Ku(e),h=m?i:u;if(t.keepDefaultValues||(i=c),!t.keepValues){if(t.keepDirtyValues){const e=new Set([...l.mount,...Object.keys(sp(i,r))]);for(const t of Array.from(e))fu(n.dirtyFields,t)?xu(h,t,fu(r,t)):E(t,fu(h,t))}else{if(cu&&pu(e))for(const e of l.mount){const t=fu(s,e);if(t&&t._f){const e=Array.isArray(t._f.refs)?t._f.refs[0]:t._f.ref;if(Wu(e)){const t=e.closest("form");if(t){t.reset();break}}}}if(t.keepFieldsRef)for(const e of l.mount)E(e,fu(h,e));else s={}}r=a.shouldUnregister?t.keepDefaultValues?du(i):{}:du(h),p.array.next({values:{...h}}),p.state.next({values:{...h}})}l={mount:t.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!d.isValid||!!t.keepIsValid||!!t.keepDirtyValues,o.watch=!!a.shouldUnregister,p.state.next({submitCount:t.keepSubmitCount?n.submitCount:0,isDirty:!m&&(t.keepDirty?n.isDirty:!(!t.keepDefaultValues||Gu(e,i))),isSubmitted:!!t.keepIsSubmitted&&n.isSubmitted,dirtyFields:m?{}:t.keepDirtyValues?t.keepDefaultValues&&r?sp(i,r):n.dirtyFields:t.keepDefaultValues&&e?sp(i,e):t.keepDirty?n.dirtyFields:{},touchedFields:t.keepTouched?n.touchedFields:{},errors:t.keepErrors?n.errors:{},isSubmitSuccessful:!!t.keepIsSubmitSuccessful&&n.isSubmitSuccessful,isSubmitting:!1})},L=(e,t)=>F(Qu(e)?e(r):e,t),U=e=>{n={...n,...e}},$={control:{register:I,unregister:M,getFieldState:_,handleSubmit:D,setError:T,_subscribe:z,_runSchema:b,_focusError:P,_getWatch:j,_getDirty:w,_setValid:h,_setFieldArray:(e,t=[],l,c,m=!0,h=!0)=>{if(c&&l&&!a.disabled){if(o.action=!0,h&&Array.isArray(fu(s,e))){const t=l(fu(s,e),c.argA,c.argB);m&&xu(s,e,t)}if(h&&Array.isArray(fu(n.errors,e))){const t=l(fu(n.errors,e),c.argA,c.argB);m&&xu(n.errors,e,t),((e,t)=>{!mu(fu(e,t)).length&&ep(e,t)})(n.errors,e)}if((d.touchedFields||u.touchedFields)&&h&&Array.isArray(fu(n.touchedFields,e))){const t=l(fu(n.touchedFields,e),c.argA,c.argB);m&&xu(n.touchedFields,e,t)}(d.dirtyFields||u.dirtyFields)&&(n.dirtyFields=sp(i,r)),p.state.next({name:e,isDirty:w(e,t),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else xu(r,e,t)},_setDisabledField:O,_setErrors:e=>{n.errors=e,p.state.next({errors:n.errors,isValid:!1})},_getFieldArray:e=>mu(fu(o.mount?r:i,e,a.shouldUnregister?fu(i,e,[]):[])),_reset:F,_resetDefaultValues:()=>Qu(a.defaultValues)&&a.defaultValues().then(e=>{L(e,a.resetOptions),p.state.next({isLoading:!1})}),_removeUnmounted:()=>{for(const e of l.unMount){const t=fu(s,e);t&&(t._f.refs?t._f.refs.every(e=>!Ju(e)):!Ju(t._f.ref))&&M(e)}l.unMount=new Set},_disableForm:e=>{gu(e)&&(p.state.next({disabled:e}),vp(s,(t,a)=>{const n=fu(s,a);n&&(t.disabled=n._f.disabled||e,Array.isArray(n._f.refs)&&n._f.refs.forEach(t=>{t.disabled=n._f.disabled||e}))},0,!1))},_subjects:p,_proxyFormState:d,get _fields(){return s},get _formValues(){return r},get _state(){return o},set _state(e){o=e},get _defaultValues(){return i},get _names(){return l},set _names(e){l=e},get _formState(){return n},get _options(){return a},set _options(e){a={...a,...e}}},subscribe:e=>(o.mount=!0,u={...u,...e.formState},z({...e,formState:u})),trigger:R,register:I,handleSubmit:D,watch:(e,t)=>Qu(e)?p.state.subscribe({next:a=>e(j(void 0,t),a)}):j(e,t,!0),setValue:E,getValues:A,reset:L,resetField:(e,t={})=>{fu(s,e)&&(pu(t.defaultValue)?E(e,du(fu(i,e))):(E(e,t.defaultValue),xu(i,e,du(t.defaultValue))),t.keepTouched||ep(n.touchedFields,e),t.keepDirty||(ep(n.dirtyFields,e),n.isDirty=t.defaultValue?w(e,du(fu(i,e))):w()),t.keepError||(ep(n.errors,e),d.isValid&&h()),p.state.next({...n}))},clearErrors:e=>{e&&Bu(e).forEach(e=>ep(n.errors,e)),p.state.next({errors:e?n.errors:{}})},unregister:M,setError:T,setFocus:(e,t={})=>{const a=fu(s,e),n=a&&a._f;if(n){const e=n.refs?n.refs[0]:n.ref;e.focus&&(e.focus(),t.shouldSelect&&Qu(e.select)&&e.select())}},getFieldState:_};return{...$,formControl:$}}function Sp(e={}){const t=a.useRef(void 0),n=a.useRef(void 0),[s,i]=a.useState({isDirty:!1,isValidating:!1,isLoading:Qu(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:Qu(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:s},e.defaultValues&&!Qu(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:a,...n}=Cp(e);t.current={...n,formState:s}}const r=t.current.control;return r._options=e,Pu(()=>{const e=r._subscribe({formState:r._proxyFormState,callback:()=>i({...r._formState}),reRenderRoot:!0});return i(e=>({...e,isReady:!0})),r._formState.isReady=!0,e},[r]),a.useEffect(()=>r._disableForm(e.disabled),[r,e.disabled]),a.useEffect(()=>{e.mode&&(r._options.mode=e.mode),e.reValidateMode&&(r._options.reValidateMode=e.reValidateMode)},[r,e.mode,e.reValidateMode]),a.useEffect(()=>{e.errors&&(r._setErrors(e.errors),r._focusError())},[r,e.errors]),a.useEffect(()=>{e.shouldUnregister&&r._subjects.state.next({values:r._getWatch()})},[r,e.shouldUnregister]),a.useEffect(()=>{if(r._proxyFormState.isDirty){const e=r._getDirty();e!==s.isDirty&&r._subjects.state.next({isDirty:e})}},[r,s.isDirty]),a.useEffect(()=>{e.values&&!Gu(e.values,n.current)?(r._reset(e.values,{keepFieldsRef:!0,...r._options.resetOptions}),n.current=e.values,i(e=>({...e}))):r._resetDefaultValues()},[r,e.values]),a.useEffect(()=>{r._state.mount||(r._setValid(),r._state.mount=!0),r._state.watch&&(r._state.watch=!1,r._subjects.state.next({...r._formState})),r._removeUnmounted()}),t.current.formState=Iu(s,r),t.current}const Rp=(e,t,a)=>{if(e&&"reportValidity"in e){const n=fu(a,t);e.setCustomValidity(n&&n.message||""),e.reportValidity()}},Ap=(e,t)=>{for(const a in t.fields){const n=t.fields[a];n&&n.ref&&"reportValidity"in n.ref?Rp(n.ref,a,e):n&&n.refs&&n.refs.forEach(t=>Rp(t,a,e))}},_p=(e,t)=>{t.shouldUseNativeValidation&&Ap(e,t);const a={};for(const n in e){const s=fu(t.fields,n),i=Object.assign(e[n]||{},{ref:s&&s.ref});if(Tp(t.names||Object.keys(e),n)){const e=Object.assign({},fu(a,n));xu(e,"root",i),xu(a,n,e)}else xu(a,n,i)}return a},Tp=(e,t)=>{const a=zp(t);return e.some(e=>zp(e).match(`^${a}\\.\\d+`))};function zp(e){return e.replace(/\]|\[/g,"")}function Mp(e,t){try{var a=e()}catch(n){return t(n)}return a&&a.then?a.then(void 0,t):a}function Op(e,t){for(var a={};e.length;){var n=e[0],s=n.code,i=n.message,r=n.path.join(".");if(!a[r])if("unionErrors"in n){var o=n.unionErrors[0].errors[0];a[r]={message:o.message,type:o.code}}else a[r]={message:i,type:s};if("unionErrors"in n&&n.unionErrors.forEach(function(t){return t.errors.forEach(function(t){return e.push(t)})}),t){var l=a[r].types,c=l&&l[n.code];a[r]=Vu(r,t,a,s,c?[].concat(c,n.message):n.message)}e.shift()}return a}function Ip(e,t){for(var a={};e.length;){var n=e[0],s=n.code,i=n.message,r=n.path.join(".");if(!a[r])if("invalid_union"===n.code){var o=n.errors[0][0];a[r]={message:o.message,type:o.code}}else a[r]={message:i,type:s};if("invalid_union"===n.code&&n.errors.forEach(function(t){return t.forEach(function(t){return e.push(t)})}),t){var l=a[r].types,c=l&&l[n.code];a[r]=Vu(r,t,a,s,c?[].concat(c,n.message):n.message)}e.shift()}return a}function Pp(e,t,a){if(void 0===a&&(a={}),"_def"in(n=e)&&"object"==typeof n._def&&"typeName"in n._def)return function(s,i,r){try{return Promise.resolve(Mp(function(){return Promise.resolve(e["sync"===a.mode?"parse":"parseAsync"](s,t)).then(function(e){return r.shouldUseNativeValidation&&Ap({},r),{errors:{},values:a.raw?Object.assign({},s):e}})},function(e){if(t=e,Array.isArray(null==t?void 0:t.issues))return{values:{},errors:_p(Op(e.errors,!r.shouldUseNativeValidation&&"all"===r.criteriaMode),r)};var t;throw e}))}catch(n){return Promise.reject(n)}};var n;if(function(e){return"_zod"in e&&"object"==typeof e._zod}(e))return function(s,i,r){try{return Promise.resolve(Mp(function(){return Promise.resolve(("sync"===a.mode?Qs:Ys)(e,s,t)).then(function(e){return r.shouldUseNativeValidation&&Ap({},r),{errors:{},values:a.raw?Object.assign({},s):e}})},function(e){if(e instanceof Gs)return{values:{},errors:_p(Ip(e.issues,!r.shouldUseNativeValidation&&"all"===r.criteriaMode),r)};throw e}))}catch(n){return Promise.reject(n)}};throw new Error("Invalid input: not a Zod schema")}function Dp({className:e,type:a,...n}){return t.jsx("input",{type:a,"data-slot":"input",className:Lc("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...n})}function Fp({className:e,...a}){return t.jsx(Ae,{"data-slot":"label",className:Lc("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...a})}const Lp=Xd("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Up=e.forwardRef(({className:e,variant:a,...n},s)=>t.jsx("div",{ref:s,role:"alert",className:Lc(Lp({variant:a}),e),...n}));Up.displayName="Alert";e.forwardRef(({className:e,...a},n)=>t.jsx("h5",{ref:n,className:Lc("mb-1 font-medium leading-none tracking-tight",e),...a})).displayName="AlertTitle";const $p=e.forwardRef(({className:e,...a},n)=>t.jsx("div",{ref:n,className:Lc("text-sm [&_p]:leading-relaxed",e),...a}));$p.displayName="AlertDescription";const Vp=cl({email:Ro().email("Invalid email address").min(1,"Email is required"),password:Ro().min(6,"Password must be at least 6 characters")});function Bp(){const a=Xa(),n=Qa(),s=n.state?.from?.pathname||"/",[i,r]=e.useState(!1),[o,l]=e.useState(!1),[c,d]=e.useState(""),{register:u,handleSubmit:p,formState:{errors:m}}=Sp({resolver:Pp(Vp),defaultValues:{email:"",password:""}});return t.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-900 py-12 px-4 sm:px-6 lg:px-8",children:t.jsxs(Uc,{className:"w-full max-w-md bg-slate-800 border-slate-700",children:[t.jsxs($c,{className:"space-y-1",children:[t.jsx(Vc,{className:"text-2xl font-bold text-center text-white",children:"Welcome Back"}),t.jsx(Bc,{className:"text-center text-slate-400",children:"Sign in to your AR Configurator account"})]}),t.jsxs("form",{onSubmit:p(async e=>{r(!0),d("");try{await vs.login(e.email,e.password),ls.success("Login successful!"),a(s,{replace:!0})}catch(t){d(t.message||"Login failed. Please try again."),ls.error(t.message||"Login failed")}finally{r(!1)}}),children:[t.jsxs(Hc,{className:"space-y-4",children:[c&&t.jsx(Up,{variant:"destructive",children:t.jsx($p,{children:c})}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(Fp,{htmlFor:"email",className:"text-white",children:"Email"}),t.jsx(Dp,{id:"email",type:"email",placeholder:"Enter your email",...u("email"),className:"bg-slate-700 border-slate-600 text-white placeholder-slate-400 "+(m.email?"border-red-500":"")}),m.email&&t.jsx("p",{className:"text-sm text-red-400",children:m.email.message})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(Fp,{htmlFor:"password",className:"text-white",children:"Password"}),t.jsxs("div",{className:"relative",children:[t.jsx(Dp,{id:"password",type:o?"text":"password",placeholder:"Enter your password",...u("password"),className:"bg-slate-700 border-slate-600 text-white placeholder-slate-400 "+(m.password?"border-red-500":"")}),t.jsxs(eu,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-slate-600 text-slate-400",onClick:()=>l(!o),children:[o?t.jsx(md,{className:"h-4 w-4"}):t.jsx(hd,{className:"h-4 w-4"}),t.jsx("span",{className:"sr-only",children:o?"Hide password":"Show password"})]})]}),m.password&&t.jsx("p",{className:"text-sm text-red-400",children:m.password.message})]})]}),t.jsxs(qc,{className:"flex flex-col space-y-4",children:[t.jsx(eu,{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700 text-white",disabled:i,children:i?t.jsxs(t.Fragment,{children:[t.jsx(jd,{className:"mr-2 h-4 w-4 animate-spin"}),"Signing In..."]}):"Sign In"}),t.jsx("div",{className:"text-center text-sm text-slate-400",children:t.jsxs("p",{children:["Don't have an account?"," ",t.jsx(Ln,{to:"/register",className:"font-medium text-blue-400 hover:text-blue-300 underline",children:"Create one now"})]})}),t.jsxs("div",{className:"text-center text-sm text-slate-500",children:[t.jsx("p",{children:"Demo accounts:"}),t.jsxs("p",{className:"text-xs",children:["Admin: admin@example.com / admin123",t.jsx("br",{}),"User: user@example.com / user123"]})]})]})]})]})})}let Hp=0;const qp=new Map,Gp=e=>{if(qp.has(e))return;const t=setTimeout(()=>{qp.delete(e),Wp({type:"REMOVE_TOAST",toastId:e})},1e6);qp.set(e,t)},Kp=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{const{toastId:a}=t;return a?Gp(a):e.toasts.forEach(e=>{Gp(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":return void 0===t.toastId?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},Zp=[];let Qp={toasts:[]};function Wp(e){Qp=Kp(Qp,e),Zp.forEach(e=>{e(Qp)})}function Yp({...e}){const t=(Hp=(Hp+1)%Number.MAX_SAFE_INTEGER,Hp.toString()),a=()=>Wp({type:"DISMISS_TOAST",toastId:t});return Wp({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||a()}}}),{id:t,dismiss:a,update:e=>Wp({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function Xp(){const[t,a]=e.useState(Qp);return e.useEffect(()=>(Zp.push(a),()=>{const e=Zp.indexOf(a);e>-1&&Zp.splice(e,1)}),[t]),{...t,toast:Yp,dismiss:e=>Wp({type:"DISMISS_TOAST",toastId:e})}}function Jp(){const[a,n]=e.useState({name:"",email:"",password:"",confirmPassword:""}),[s,i]=e.useState(!1),[r,o]=e.useState(!1),l=Xa(),{toast:c}=Xp(),d=ia({mutationFn:async e=>{const t=await fetch(qn("/api/auth/register"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)});if(!t.ok){const e=await t.json();throw new Error(e.message||"Registration failed")}return t.json()},onSuccess:e=>{c({title:"Account created successfully!",description:"Welcome to AR Experience Platform."}),localStorage.setItem("auth_token",e.token),l("/")},onError:e=>{c({title:"Registration failed",description:e instanceof Error?e.message:"Please try again",variant:"destructive"})}}),u=(e,t)=>{n(a=>({...a,[e]:t}))};return t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 flex items-center justify-center p-4",children:t.jsxs("div",{className:"w-full max-w-md",children:[t.jsxs("div",{className:"mb-8 text-center",children:[t.jsxs(eu,{variant:"ghost",onClick:()=>l("/"),className:"mb-4 text-slate-400 hover:text-white",children:[t.jsx(Xc,{className:"h-4 w-4 mr-2"}),"Back to Home"]}),t.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Create Account"}),t.jsx("p",{className:"text-slate-400",children:"Join us to create amazing AR experiences"})]}),t.jsxs(Uc,{className:"bg-slate-800 border-slate-700",children:[t.jsxs($c,{children:[t.jsx(Vc,{className:"text-white",children:"Sign Up"}),t.jsx(Bc,{className:"text-slate-400",children:"Create your account to get started"})]}),t.jsxs(Hc,{children:[t.jsxs("form",{onSubmit:e=>{e.preventDefault(),a.name&&a.email&&a.password&&a.confirmPassword?a.password===a.confirmPassword?a.password.length<6?c({title:"Password too short",description:"Password must be at least 6 characters long",variant:"destructive"}):d.mutate({name:a.name,email:a.email,password:a.password}):c({title:"Password mismatch",description:"Passwords do not match",variant:"destructive"}):c({title:"Missing fields",description:"Please fill in all required fields",variant:"destructive"})},className:"space-y-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(Fp,{htmlFor:"name",className:"text-slate-200",children:"Full Name"}),t.jsxs("div",{className:"relative",children:[t.jsx(Hd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-slate-400"}),t.jsx(Dp,{id:"name",type:"text",placeholder:"Enter your full name",value:a.name,onChange:e=>u("name",e.target.value),className:"bg-slate-700 border-slate-600 text-white placeholder-slate-400 focus:border-blue-500 pl-10",required:!0})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(Fp,{htmlFor:"email",className:"text-slate-200",children:"Email"}),t.jsxs("div",{className:"relative",children:[t.jsx(Nd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-slate-400"}),t.jsx(Dp,{id:"email",type:"email",placeholder:"Enter your email",value:a.email,onChange:e=>u("email",e.target.value),className:"bg-slate-700 border-slate-600 text-white placeholder-slate-400 focus:border-blue-500 pl-10",required:!0})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(Fp,{htmlFor:"password",className:"text-slate-200",children:"Password"}),t.jsxs("div",{className:"relative",children:[t.jsx(kd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-slate-400"}),t.jsx(Dp,{id:"password",type:s?"text":"password",placeholder:"Create a password",value:a.password,onChange:e=>u("password",e.target.value),className:"bg-slate-700 border-slate-600 text-white placeholder-slate-400 focus:border-blue-500 pl-10 pr-10",required:!0}),t.jsx(eu,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>i(!s),children:s?t.jsx(md,{className:"h-4 w-4 text-slate-400"}):t.jsx(hd,{className:"h-4 w-4 text-slate-400"})})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(Fp,{htmlFor:"confirmPassword",className:"text-slate-200",children:"Confirm Password"}),t.jsxs("div",{className:"relative",children:[t.jsx(kd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-slate-400"}),t.jsx(Dp,{id:"confirmPassword",type:r?"text":"password",placeholder:"Confirm your password",value:a.confirmPassword,onChange:e=>u("confirmPassword",e.target.value),className:"bg-slate-700 border-slate-600 text-white placeholder-slate-400 focus:border-blue-500 pl-10 pr-10",required:!0}),t.jsx(eu,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>o(!r),children:r?t.jsx(md,{className:"h-4 w-4 text-slate-400"}):t.jsx(hd,{className:"h-4 w-4 text-slate-400"})})]})]}),t.jsx(eu,{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700 text-white",disabled:d.isPending,children:d.isPending?"Creating account...":"Create Account"})]}),t.jsx("div",{className:"mt-6 text-center",children:t.jsxs("p",{className:"text-slate-400",children:["Already have an account?"," ",t.jsx(Ln,{to:"/login",className:"text-blue-400 hover:text-blue-300 font-medium",children:"Sign in here"})]})})]})]})]})})}const em=e=>{const{children:t,...n}=e;return a.createElement(Mu.Provider,{value:n},t)},tm=e.createContext({}),am=({...e})=>t.jsx(tm.Provider,{value:{name:e.name},children:t.jsx($u,{...e})}),nm=()=>{const t=e.useContext(tm),a=e.useContext(sm),{getFieldState:n}=Ou(),s=Du({name:t.name}),i=n(t.name,s);if(!t)throw new Error("useFormField should be used within <FormField>");const{id:r}=a;return{id:r,name:t.name,formItemId:`${r}-form-item`,formDescriptionId:`${r}-form-item-description`,formMessageId:`${r}-form-item-message`,...i}},sm=e.createContext({});function im({className:a,...n}){const s=e.useId();return t.jsx(sm.Provider,{value:{id:s},children:t.jsx("div",{"data-slot":"form-item",className:Lc("grid gap-2",a),...n})})}function rm({className:e,...a}){const{error:n,formItemId:s}=nm();return t.jsx(Fp,{"data-slot":"form-label","data-error":!!n,className:Lc("data-[error=true]:text-destructive",e),htmlFor:s,...a})}function om({className:e,...a}){const{error:n,formMessageId:s}=nm(),i=n?String(n?.message??""):a.children;return i?t.jsx("p",{"data-slot":"form-message",id:s,className:Lc("text-destructive text-sm",e),...a,children:i}):null}class lm extends a.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){console.error("Three.js Error Boundary caught an error:",e,t)}render(){return this.state.hasError?t.jsx("div",{className:"flex items-center justify-center w-full h-full bg-slate-800 text-white",children:t.jsxs("div",{className:"text-center",children:[t.jsx("h2",{children:"Something went wrong with the 3D scene."}),t.jsx("button",{onClick:()=>this.setState({hasError:!1}),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Try again"})]})}):this.props.children}}const cm=e=>e?e.startsWith("http://")||e.startsWith("https://")?e:e.startsWith("/")?`${e}`:e:e;function dm({sceneObjects:a,selectedObject:n,setSelectedObject:s,transformMode:i,onObjectChange:r,markerImage:o}){const{camera:p,gl:m,scene:h}=l(),f=e.useRef(),g=e.useRef(),x=e.useRef();e.useEffect(()=>{h.background=new c(16777215)},[h]);return e.useEffect(()=>{g.current&&n&&g.current.setMode(i)},[i]),e.useEffect(()=>{const e=()=>{g.current&&n?.mesh?(g.current.attach(n.mesh),g.current.enabled=!0,g.current.visible=!0):g.current&&g.current.detach()};if(n?.mesh){const t=setTimeout(e,100);return()=>clearTimeout(t)}e()},[n]),t.jsxs(t.Fragment,{children:[t.jsxs("mesh",{onClick:e=>{},position:[0,-.1,0],rotation:[-Math.PI/2,0,0],visible:!1,children:[t.jsx("planeGeometry",{args:[100,100]}),t.jsx("meshBasicMaterial",{transparent:!0,opacity:0})]}),t.jsx(d,{ref:f,enablePan:!0,enableZoom:!0,enableRotate:!0,dampingFactor:.05,screenSpacePanning:!1,minDistance:1,maxDistance:100,maxPolarAngle:Math.PI}),n?.mesh&&t.jsx(u,{ref:g,mode:i,onMouseDown:()=>{f.current&&(f.current.enabled=!1)},onMouseUp:()=>{if(f.current&&(f.current.enabled=!0),x.current&&clearTimeout(x.current),n&&n.mesh&&n.sceneObj){const e=n.mesh,t={...n.sceneObj,position:{x:Number(e.position.x.toFixed(3)),y:Number(e.position.y.toFixed(3)),z:Number(e.position.z.toFixed(3))},rotation:{x:Number(e.rotation.x.toFixed(3)),y:Number(e.rotation.y.toFixed(3)),z:Number(e.rotation.z.toFixed(3))},scale:{x:Number(e.scale.x.toFixed(3)),y:Number(e.scale.y.toFixed(3)),z:Number(e.scale.z.toFixed(3))}};r&&r(t)}},onChange:()=>{x.current&&clearTimeout(x.current),x.current=setTimeout(()=>{if(n&&n.mesh&&n.sceneObj){const e=n.mesh,t={...n.sceneObj,position:{x:Number(e.position.x.toFixed(3)),y:Number(e.position.y.toFixed(3)),z:Number(e.position.z.toFixed(3))},rotation:{x:Number(e.rotation.x.toFixed(3)),y:Number(e.rotation.y.toFixed(3)),z:Number(e.rotation.z.toFixed(3))},scale:{x:Number(e.scale.x.toFixed(3)),y:Number(e.scale.y.toFixed(3)),z:Number(e.scale.z.toFixed(3))}};r&&r(t)}},50)},size:1,showX:!0,showY:!0,showZ:!0,space:"world",translationSnap:null,rotationSnap:null,scaleSnap:null}),t.jsx("ambientLight",{intensity:.6}),t.jsx("hemisphereLight",{args:[16777215,4473924,.8]}),t.jsx("directionalLight",{position:[5,5,5],intensity:1,castShadow:!0,"shadow-mapSize-width":1024,"shadow-mapSize-height":1024}),t.jsx("gridHelper",{args:[10,10]}),o&&t.jsx(um,{markerImage:o}),a.map(e=>t.jsx(pm,{sceneObject:e,onSelect:(e,t)=>s({mesh:e,sceneObj:t}),isSelected:n?.sceneObj?.id===e.id},e.id))]})}function um({markerImage:a}){const[n,i]=e.useState(null),[r,o]=e.useState({width:2,height:2}),[l,c]=e.useState(!1);return e.useEffect(()=>{if(a){console.log("MarkerPlane: Loading marker image:",a);const e=new s,t=new Image;t.onload=()=>{console.log("MarkerPlane: Image loaded successfully");const n=t.width/t.height;let s,r;n>1?(s=3,r=3/n):(r=3,s=3*n),o({width:s,height:r}),e.load(a,e=>{console.log("MarkerPlane: Texture loaded successfully"),i(e),c(!1)},void 0,e=>{console.error("MarkerPlane: Error loading texture:",e),c(!0)})},t.onerror=e=>{console.error("MarkerPlane: Error loading image:",e),c(!0)},t.crossOrigin="anonymous",t.src=a}},[a]),l?(console.log("MarkerPlane: Showing fallback due to load error"),t.jsxs("mesh",{position:[0,0,0],rotation:[-Math.PI/2,0,0],children:[t.jsx("planeGeometry",{args:[2,2]}),t.jsx("meshBasicMaterial",{color:"red",transparent:!0,opacity:.3})]})):n?t.jsxs("mesh",{position:[0,0,0],rotation:[-Math.PI/2,0,0],children:[t.jsx("planeGeometry",{args:[r.width,r.height]}),t.jsx("meshBasicMaterial",{map:n,transparent:!1,opacity:1})]}):null}function pm({sceneObject:a,onSelect:n,isSelected:s}){const i=e.useRef(),{content:r,position:o,rotation:l,scale:c}=a,d=e=>{e.stopPropagation(),i.current&&n(i.current,a)};return e.useEffect(()=>{i.current&&(i.current.position.set(o.x,o.y,o.z),i.current.rotation.set(l.x,l.y,l.z),i.current.scale.set(c.x,c.y,c.z),a.meshRef=i)},[o.x,o.y,o.z,l.x,l.y,l.z,c.x,c.y,c.z]),t.jsxs(e.Suspense,{fallback:null,children:["model"===r.type&&t.jsx(mm,{ref:i,content:r,onClick:d}),"image"===r.type&&t.jsx(hm,{ref:i,content:r,onClick:d}),"video"===r.type&&t.jsx(fm,{ref:i,content:r,onClick:d}),"primitive"===r.type&&t.jsx(gm,{ref:i,content:r,onClick:d}),"light"===r.type&&t.jsx(xm,{ref:i,content:r,onClick:d}),"audio"===r.type&&t.jsx(vm,{ref:i,content:r,onClick:d})]})}const mm=a.forwardRef(({content:e,onClick:a},s)=>{const i=cm(e.url),{scene:r}=n(i),o=r.clone();return t.jsx("group",{ref:s,onClick:a,onPointerOver:e=>{e.stopPropagation(),document.body.style.cursor="pointer"},onPointerOut:e=>{e.stopPropagation(),document.body.style.cursor="default"},children:t.jsx("primitive",{object:o})})}),hm=a.forwardRef(({content:a,onClick:n},i)=>{const[r,o]=e.useState(null),l=cm(a.url);return e.useEffect(()=>{(new s).load(l,o)},[l]),t.jsxs("mesh",{ref:i,onClick:n,children:[t.jsx("planeGeometry",{args:[1,1]}),t.jsx("meshBasicMaterial",{map:r,transparent:!0})]})}),fm=a.forwardRef(({content:a,onClick:n},s)=>{const[r,o]=e.useState(null),[l,c]=e.useState(null),d=cm(a.url);return e.useEffect(()=>{const e=document.createElement("video");e.src=d,e.crossOrigin="anonymous",e.loop=!0,e.muted=!0,e.play();const t=new i(e);o(e),c(t)},[d]),t.jsxs("mesh",{ref:s,onClick:n,children:[t.jsx("planeGeometry",{args:[1,1]}),t.jsx("meshBasicMaterial",{map:l})]})}),gm=a.forwardRef(({content:e,onClick:a},n)=>t.jsxs("mesh",{ref:n,onClick:a,children:[(()=>{switch(e.primitiveType){case"box":default:return t.jsx("boxGeometry",{args:[1,1,1]});case"sphere":return t.jsx("sphereGeometry",{args:[.5,32,32]});case"cylinder":return t.jsx("cylinderGeometry",{args:[.5,.5,1,32]});case"plane":return t.jsx("planeGeometry",{args:[1,1]})}})(),t.jsx("meshStandardMaterial",{color:e.color||8947848})]})),xm=a.forwardRef(({content:e,onClick:a},n)=>t.jsxs("group",{ref:n,onClick:a,children:[t.jsx("pointLight",{intensity:e.intensity||1,color:e.color||16777215,distance:e.distance||0}),t.jsxs("mesh",{children:[t.jsx("sphereGeometry",{args:[.1]}),t.jsx("meshBasicMaterial",{color:16776960})]})]})),vm=a.forwardRef(({content:e,onClick:a},n)=>t.jsxs("mesh",{ref:n,onClick:a,children:[t.jsx("sphereGeometry",{args:[.2]}),t.jsx("meshStandardMaterial",{color:65280})]}));function bm({sceneObjects:e,selectedObject:a,setSelectedObject:n,transformMode:s,onObjectChange:i,markerImage:l,className:c}){return t.jsx("div",{className:c,children:t.jsx(lm,{children:t.jsx(r,{camera:{position:[2,2,2],fov:75,near:.1,far:1e3},gl:{antialias:!0,alpha:!1,preserveDrawingBuffer:!1,shadowMap:{enabled:!0,type:o}},style:{background:"white"},onError:e=>{console.error("Canvas error:",e)},children:t.jsx(dm,{sceneObjects:e,selectedObject:a,setSelectedObject:n,transformMode:s,onObjectChange:i,markerImage:l})})})})}var ym="rovingFocusGroup.onEntryFocus",wm={bubbles:!1,cancelable:!0},jm="RovingFocusGroup",[km,Nm,Em]=Te(jm),[Cm,Sm]=_e(jm,[Em]),[Rm,Am]=Cm(jm),_m=e.forwardRef((e,a)=>t.jsx(km.Provider,{scope:e.__scopeRovingFocusGroup,children:t.jsx(km.Slot,{scope:e.__scopeRovingFocusGroup,children:t.jsx(Tm,{...e,ref:a})})}));_m.displayName=jm;var Tm=e.forwardRef((a,n)=>{const{__scopeRovingFocusGroup:s,orientation:i,loop:r=!1,dir:o,currentTabStopId:l,defaultCurrentTabStopId:c,onCurrentTabStopIdChange:d,onEntryFocus:u,preventScrollOnEntryFocus:p=!1,...m}=a,h=e.useRef(null),f=Ie(n,h),g=Pe(o),[x,v]=De({prop:l,defaultProp:c??null,onChange:d,caller:jm}),[b,y]=e.useState(!1),w=Fe(u),j=Nm(s),k=e.useRef(!1),[N,E]=e.useState(0);return e.useEffect(()=>{const e=h.current;if(e)return e.addEventListener(ym,w),()=>e.removeEventListener(ym,w)},[w]),t.jsx(Rm,{scope:s,orientation:i,dir:g,loop:r,currentTabStopId:x,onItemFocus:e.useCallback(e=>v(e),[v]),onItemShiftTab:e.useCallback(()=>y(!0),[]),onFocusableItemAdd:e.useCallback(()=>E(e=>e+1),[]),onFocusableItemRemove:e.useCallback(()=>E(e=>e-1),[]),children:t.jsx(Me.div,{tabIndex:b||0===N?-1:0,"data-orientation":i,...m,ref:f,style:{outline:"none",...a.style},onMouseDown:Oe(a.onMouseDown,()=>{k.current=!0}),onFocus:Oe(a.onFocus,e=>{const t=!k.current;if(e.target===e.currentTarget&&t&&!b){const t=new CustomEvent(ym,wm);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){const e=j().filter(e=>e.focusable);Im([e.find(e=>e.active),e.find(e=>e.id===x),...e].filter(Boolean).map(e=>e.ref.current),p)}}k.current=!1}),onBlur:Oe(a.onBlur,()=>y(!1))})})}),zm="RovingFocusGroupItem",Mm=e.forwardRef((a,n)=>{const{__scopeRovingFocusGroup:s,focusable:i=!0,active:r=!1,tabStopId:o,children:l,...c}=a,d=ze(),u=o||d,p=Am(zm,s),m=p.currentTabStopId===u,h=Nm(s),{onFocusableItemAdd:f,onFocusableItemRemove:g,currentTabStopId:x}=p;return e.useEffect(()=>{if(i)return f(),()=>g()},[i,f,g]),t.jsx(km.ItemSlot,{scope:s,id:u,focusable:i,active:r,children:t.jsx(Me.span,{tabIndex:m?0:-1,"data-orientation":p.orientation,...c,ref:n,onMouseDown:Oe(a.onMouseDown,e=>{i?p.onItemFocus(u):e.preventDefault()}),onFocus:Oe(a.onFocus,()=>p.onItemFocus(u)),onKeyDown:Oe(a.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey)return void p.onItemShiftTab();if(e.target!==e.currentTarget)return;const t=function(e,t,a){const n=function(e,t){return"rtl"!==t?e:"ArrowLeft"===e?"ArrowRight":"ArrowRight"===e?"ArrowLeft":e}(e.key,a);return"vertical"===t&&["ArrowLeft","ArrowRight"].includes(n)||"horizontal"===t&&["ArrowUp","ArrowDown"].includes(n)?void 0:Om[n]}(e,p.orientation,p.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let s=h().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===t)s.reverse();else if("prev"===t||"next"===t){"prev"===t&&s.reverse();const i=s.indexOf(e.currentTarget);s=p.loop?(n=i+1,(a=s).map((e,t)=>a[(n+t)%a.length])):s.slice(i+1)}setTimeout(()=>Im(s))}var a,n}),children:"function"==typeof l?l({isCurrentTabStop:m,hasTabStop:null!=x}):l})})});Mm.displayName=zm;var Om={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Im(e,t=!1){const a=document.activeElement;for(const n of e){if(n===a)return;if(n.focus({preventScroll:t}),document.activeElement!==a)return}}var Pm=_m,Dm=Mm,Fm="Tabs",[Lm,Um]=_e(Fm,[Sm]),$m=Sm(),[Vm,Bm]=Lm(Fm),Hm=e.forwardRef((e,a)=>{const{__scopeTabs:n,value:s,onValueChange:i,defaultValue:r,orientation:o="horizontal",dir:l,activationMode:c="automatic",...d}=e,u=Pe(l),[p,m]=De({prop:s,onChange:i,defaultProp:r??"",caller:Fm});return t.jsx(Vm,{scope:n,baseId:ze(),value:p,onValueChange:m,orientation:o,dir:u,activationMode:c,children:t.jsx(Me.div,{dir:u,"data-orientation":o,...d,ref:a})})});Hm.displayName=Fm;var qm="TabsList",Gm=e.forwardRef((e,a)=>{const{__scopeTabs:n,loop:s=!0,...i}=e,r=Bm(qm,n),o=$m(n);return t.jsx(Pm,{asChild:!0,...o,orientation:r.orientation,dir:r.dir,loop:s,children:t.jsx(Me.div,{role:"tablist","aria-orientation":r.orientation,...i,ref:a})})});Gm.displayName=qm;var Km="TabsTrigger",Zm=e.forwardRef((e,a)=>{const{__scopeTabs:n,value:s,disabled:i=!1,...r}=e,o=Bm(Km,n),l=$m(n),c=Ym(o.baseId,s),d=Xm(o.baseId,s),u=s===o.value;return t.jsx(Dm,{asChild:!0,...l,focusable:!i,active:u,children:t.jsx(Me.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":d,"data-state":u?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:c,...r,ref:a,onMouseDown:Oe(e.onMouseDown,e=>{i||0!==e.button||!1!==e.ctrlKey?e.preventDefault():o.onValueChange(s)}),onKeyDown:Oe(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&o.onValueChange(s)}),onFocus:Oe(e.onFocus,()=>{const e="manual"!==o.activationMode;u||i||!e||o.onValueChange(s)})})})});Zm.displayName=Km;var Qm="TabsContent",Wm=e.forwardRef((a,n)=>{const{__scopeTabs:s,value:i,forceMount:r,children:o,...l}=a,c=Bm(Qm,s),d=Ym(c.baseId,i),u=Xm(c.baseId,i),p=i===c.value,m=e.useRef(p);return e.useEffect(()=>{const e=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(e)},[]),t.jsx(Le,{present:r||p,children:({present:e})=>t.jsx(Me.div,{"data-state":p?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":d,hidden:!e,id:u,tabIndex:0,...l,ref:n,style:{...a.style,animationDuration:m.current?"0s":void 0},children:e&&o})})});function Ym(e,t){return`${e}-trigger-${t}`}function Xm(e,t){return`${e}-content-${t}`}Wm.displayName=Qm;var Jm=Hm,eh=Gm,th=Zm,ah=Wm;function nh({className:e,...a}){return t.jsx(Jm,{"data-slot":"tabs",className:Lc("flex flex-col gap-2",e),...a})}function sh({className:e,...a}){return t.jsx(eh,{"data-slot":"tabs-list",className:Lc("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",e),...a})}function ih({className:e,...a}){return t.jsx(th,{"data-slot":"tabs-trigger",className:Lc("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...a})}function rh({className:e,...a}){return t.jsx(ah,{"data-slot":"tabs-content",className:Lc("flex-1 outline-none",e),...a})}var oh="ScrollArea",[lh,ch]=_e(oh),[dh,uh]=lh(oh),ph=e.forwardRef((a,n)=>{const{__scopeScrollArea:s,type:i="hover",dir:r,scrollHideDelay:o=600,...l}=a,[c,d]=e.useState(null),[u,p]=e.useState(null),[m,h]=e.useState(null),[f,g]=e.useState(null),[x,v]=e.useState(null),[b,y]=e.useState(0),[w,j]=e.useState(0),[k,N]=e.useState(!1),[E,C]=e.useState(!1),S=Ie(n,e=>d(e)),R=Pe(r);return t.jsx(dh,{scope:s,type:i,dir:R,scrollHideDelay:o,scrollArea:c,viewport:u,onViewportChange:p,content:m,onContentChange:h,scrollbarX:f,onScrollbarXChange:g,scrollbarXEnabled:k,onScrollbarXEnabledChange:N,scrollbarY:x,onScrollbarYChange:v,scrollbarYEnabled:E,onScrollbarYEnabledChange:C,onCornerWidthChange:y,onCornerHeightChange:j,children:t.jsx(Me.div,{dir:R,...l,ref:S,style:{position:"relative","--radix-scroll-area-corner-width":b+"px","--radix-scroll-area-corner-height":w+"px",...a.style}})})});ph.displayName=oh;var mh="ScrollAreaViewport",hh=e.forwardRef((a,n)=>{const{__scopeScrollArea:s,children:i,nonce:r,...o}=a,l=uh(mh,s),c=e.useRef(null),d=Ie(n,c,l.onViewportChange);return t.jsxs(t.Fragment,{children:[t.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),t.jsx(Me.div,{"data-radix-scroll-area-viewport":"",...o,ref:d,style:{overflowX:l.scrollbarXEnabled?"scroll":"hidden",overflowY:l.scrollbarYEnabled?"scroll":"hidden",...a.style},children:t.jsx("div",{ref:l.onContentChange,style:{minWidth:"100%",display:"table"},children:i})})]})});hh.displayName=mh;var fh="ScrollAreaScrollbar",gh=e.forwardRef((a,n)=>{const{forceMount:s,...i}=a,r=uh(fh,a.__scopeScrollArea),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:l}=r,c="horizontal"===a.orientation;return e.useEffect(()=>(c?o(!0):l(!0),()=>{c?o(!1):l(!1)}),[c,o,l]),"hover"===r.type?t.jsx(xh,{...i,ref:n,forceMount:s}):"scroll"===r.type?t.jsx(vh,{...i,ref:n,forceMount:s}):"auto"===r.type?t.jsx(bh,{...i,ref:n,forceMount:s}):"always"===r.type?t.jsx(yh,{...i,ref:n}):null});gh.displayName=fh;var xh=e.forwardRef((a,n)=>{const{forceMount:s,...i}=a,r=uh(fh,a.__scopeScrollArea),[o,l]=e.useState(!1);return e.useEffect(()=>{const e=r.scrollArea;let t=0;if(e){const a=()=>{window.clearTimeout(t),l(!0)},n=()=>{t=window.setTimeout(()=>l(!1),r.scrollHideDelay)};return e.addEventListener("pointerenter",a),e.addEventListener("pointerleave",n),()=>{window.clearTimeout(t),e.removeEventListener("pointerenter",a),e.removeEventListener("pointerleave",n)}}},[r.scrollArea,r.scrollHideDelay]),t.jsx(Le,{present:s||o,children:t.jsx(bh,{"data-state":o?"visible":"hidden",...i,ref:n})})}),vh=e.forwardRef((a,n)=>{const{forceMount:s,...i}=a,r=uh(fh,a.__scopeScrollArea),o="horizontal"===a.orientation,l=Lh(()=>d("SCROLL_END"),100),[c,d]=(u="hidden",p={hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}},e.useReducer((e,t)=>p[e][t]??e,u));var u,p;return e.useEffect(()=>{if("idle"===c){const e=window.setTimeout(()=>d("HIDE"),r.scrollHideDelay);return()=>window.clearTimeout(e)}},[c,r.scrollHideDelay,d]),e.useEffect(()=>{const e=r.viewport,t=o?"scrollLeft":"scrollTop";if(e){let a=e[t];const n=()=>{const n=e[t];a!==n&&(d("SCROLL"),l()),a=n};return e.addEventListener("scroll",n),()=>e.removeEventListener("scroll",n)}},[r.viewport,o,d,l]),t.jsx(Le,{present:s||"hidden"!==c,children:t.jsx(yh,{"data-state":"hidden"===c?"hidden":"visible",...i,ref:n,onPointerEnter:Oe(a.onPointerEnter,()=>d("POINTER_ENTER")),onPointerLeave:Oe(a.onPointerLeave,()=>d("POINTER_LEAVE"))})})}),bh=e.forwardRef((a,n)=>{const s=uh(fh,a.__scopeScrollArea),{forceMount:i,...r}=a,[o,l]=e.useState(!1),c="horizontal"===a.orientation,d=Lh(()=>{if(s.viewport){const e=s.viewport.offsetWidth<s.viewport.scrollWidth,t=s.viewport.offsetHeight<s.viewport.scrollHeight;l(c?e:t)}},10);return Uh(s.viewport,d),Uh(s.content,d),t.jsx(Le,{present:i||o,children:t.jsx(yh,{"data-state":o?"visible":"hidden",...r,ref:n})})}),yh=e.forwardRef((a,n)=>{const{orientation:s="vertical",...i}=a,r=uh(fh,a.__scopeScrollArea),o=e.useRef(null),l=e.useRef(0),[c,d]=e.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=Mh(c.viewport,c.content),p={...i,sizes:c,onSizesChange:d,hasThumb:Boolean(u>0&&u<1),onThumbChange:e=>o.current=e,onThumbPointerUp:()=>l.current=0,onThumbPointerDown:e=>l.current=e};function m(e,t){return function(e,t,a,n="ltr"){const s=Oh(a),i=s/2,r=t||i,o=s-r,l=a.scrollbar.paddingStart+r,c=a.scrollbar.size-a.scrollbar.paddingEnd-o,d=a.content-a.viewport,u="ltr"===n?[0,d]:[-1*d,0];return Ph([l,c],u)(e)}(e,l.current,c,t)}return"horizontal"===s?t.jsx(wh,{...p,ref:n,onThumbPositionChange:()=>{if(r.viewport&&o.current){const e=Ih(r.viewport.scrollLeft,c,r.dir);o.current.style.transform=`translate3d(${e}px, 0, 0)`}},onWheelScroll:e=>{r.viewport&&(r.viewport.scrollLeft=e)},onDragScroll:e=>{r.viewport&&(r.viewport.scrollLeft=m(e,r.dir))}}):"vertical"===s?t.jsx(jh,{...p,ref:n,onThumbPositionChange:()=>{if(r.viewport&&o.current){const e=Ih(r.viewport.scrollTop,c);o.current.style.transform=`translate3d(0, ${e}px, 0)`}},onWheelScroll:e=>{r.viewport&&(r.viewport.scrollTop=e)},onDragScroll:e=>{r.viewport&&(r.viewport.scrollTop=m(e))}}):null}),wh=e.forwardRef((a,n)=>{const{sizes:s,onSizesChange:i,...r}=a,o=uh(fh,a.__scopeScrollArea),[l,c]=e.useState(),d=e.useRef(null),u=Ie(n,d,o.onScrollbarXChange);return e.useEffect(()=>{d.current&&c(getComputedStyle(d.current))},[d]),t.jsx(Eh,{"data-orientation":"horizontal",...r,ref:u,sizes:s,style:{bottom:0,left:"rtl"===o.dir?"var(--radix-scroll-area-corner-width)":0,right:"ltr"===o.dir?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Oh(s)+"px",...a.style},onThumbPointerDown:e=>a.onThumbPointerDown(e.x),onDragScroll:e=>a.onDragScroll(e.x),onWheelScroll:(e,t)=>{if(o.viewport){const n=o.viewport.scrollLeft+e.deltaX;a.onWheelScroll(n),Dh(n,t)&&e.preventDefault()}},onResize:()=>{d.current&&o.viewport&&l&&i({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:zh(l.paddingLeft),paddingEnd:zh(l.paddingRight)}})}})}),jh=e.forwardRef((a,n)=>{const{sizes:s,onSizesChange:i,...r}=a,o=uh(fh,a.__scopeScrollArea),[l,c]=e.useState(),d=e.useRef(null),u=Ie(n,d,o.onScrollbarYChange);return e.useEffect(()=>{d.current&&c(getComputedStyle(d.current))},[d]),t.jsx(Eh,{"data-orientation":"vertical",...r,ref:u,sizes:s,style:{top:0,right:"ltr"===o.dir?0:void 0,left:"rtl"===o.dir?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Oh(s)+"px",...a.style},onThumbPointerDown:e=>a.onThumbPointerDown(e.y),onDragScroll:e=>a.onDragScroll(e.y),onWheelScroll:(e,t)=>{if(o.viewport){const n=o.viewport.scrollTop+e.deltaY;a.onWheelScroll(n),Dh(n,t)&&e.preventDefault()}},onResize:()=>{d.current&&o.viewport&&l&&i({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:zh(l.paddingTop),paddingEnd:zh(l.paddingBottom)}})}})}),[kh,Nh]=lh(fh),Eh=e.forwardRef((a,n)=>{const{__scopeScrollArea:s,sizes:i,hasThumb:r,onThumbChange:o,onThumbPointerUp:l,onThumbPointerDown:c,onThumbPositionChange:d,onDragScroll:u,onWheelScroll:p,onResize:m,...h}=a,f=uh(fh,s),[g,x]=e.useState(null),v=Ie(n,e=>x(e)),b=e.useRef(null),y=e.useRef(""),w=f.viewport,j=i.content-i.viewport,k=Fe(p),N=Fe(d),E=Lh(m,10);function C(e){if(b.current){const t=e.clientX-b.current.left,a=e.clientY-b.current.top;u({x:t,y:a})}}return e.useEffect(()=>{const e=e=>{const t=e.target,a=g?.contains(t);a&&k(e,j)};return document.addEventListener("wheel",e,{passive:!1}),()=>document.removeEventListener("wheel",e,{passive:!1})},[w,g,j,k]),e.useEffect(N,[i,N]),Uh(g,E),Uh(f.content,E),t.jsx(kh,{scope:s,scrollbar:g,hasThumb:r,onThumbChange:Fe(o),onThumbPointerUp:Fe(l),onThumbPositionChange:N,onThumbPointerDown:Fe(c),children:t.jsx(Me.div,{...h,ref:v,style:{position:"absolute",...h.style},onPointerDown:Oe(a.onPointerDown,e=>{if(0===e.button){e.target.setPointerCapture(e.pointerId),b.current=g.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",f.viewport&&(f.viewport.style.scrollBehavior="auto"),C(e)}}),onPointerMove:Oe(a.onPointerMove,C),onPointerUp:Oe(a.onPointerUp,e=>{const t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),document.body.style.webkitUserSelect=y.current,f.viewport&&(f.viewport.style.scrollBehavior=""),b.current=null})})})}),Ch="ScrollAreaThumb",Sh=e.forwardRef((e,a)=>{const{forceMount:n,...s}=e,i=Nh(Ch,e.__scopeScrollArea);return t.jsx(Le,{present:n||i.hasThumb,children:t.jsx(Rh,{ref:a,...s})})}),Rh=e.forwardRef((a,n)=>{const{__scopeScrollArea:s,style:i,...r}=a,o=uh(Ch,s),l=Nh(Ch,s),{onThumbPositionChange:c}=l,d=Ie(n,e=>l.onThumbChange(e)),u=e.useRef(void 0),p=Lh(()=>{u.current&&(u.current(),u.current=void 0)},100);return e.useEffect(()=>{const e=o.viewport;if(e){const t=()=>{if(p(),!u.current){const t=Fh(e,c);u.current=t,c()}};return c(),e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)}},[o.viewport,p,c]),t.jsx(Me.div,{"data-state":l.hasThumb?"visible":"hidden",...r,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...i},onPointerDownCapture:Oe(a.onPointerDownCapture,e=>{const t=e.target.getBoundingClientRect(),a=e.clientX-t.left,n=e.clientY-t.top;l.onThumbPointerDown({x:a,y:n})}),onPointerUp:Oe(a.onPointerUp,l.onThumbPointerUp)})});Sh.displayName=Ch;var Ah="ScrollAreaCorner",_h=e.forwardRef((e,a)=>{const n=uh(Ah,e.__scopeScrollArea),s=Boolean(n.scrollbarX&&n.scrollbarY);return"scroll"!==n.type&&s?t.jsx(Th,{...e,ref:a}):null});_h.displayName=Ah;var Th=e.forwardRef((a,n)=>{const{__scopeScrollArea:s,...i}=a,r=uh(Ah,s),[o,l]=e.useState(0),[c,d]=e.useState(0),u=Boolean(o&&c);return Uh(r.scrollbarX,()=>{const e=r.scrollbarX?.offsetHeight||0;r.onCornerHeightChange(e),d(e)}),Uh(r.scrollbarY,()=>{const e=r.scrollbarY?.offsetWidth||0;r.onCornerWidthChange(e),l(e)}),u?t.jsx(Me.div,{...i,ref:n,style:{width:o,height:c,position:"absolute",right:"ltr"===r.dir?0:void 0,left:"rtl"===r.dir?0:void 0,bottom:0,...a.style}}):null});function zh(e){return e?parseInt(e,10):0}function Mh(e,t){const a=e/t;return isNaN(a)?0:a}function Oh(e){const t=Mh(e.viewport,e.content),a=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,n=(e.scrollbar.size-a)*t;return Math.max(n,18)}function Ih(e,t,a="ltr"){const n=Oh(t),s=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-s,r=t.content-t.viewport,o=i-n,l=$e(e,"ltr"===a?[0,r]:[-1*r,0]);return Ph([0,r],[0,o])(l)}function Ph(e,t){return a=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(a-e[0])}}function Dh(e,t){return e>0&&e<t}var Fh=(e,t=()=>{})=>{let a={left:e.scrollLeft,top:e.scrollTop},n=0;return function s(){const i={left:e.scrollLeft,top:e.scrollTop},r=a.left!==i.left,o=a.top!==i.top;(r||o)&&t(),a=i,n=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(n)};function Lh(t,a){const n=Fe(t),s=e.useRef(0);return e.useEffect(()=>()=>window.clearTimeout(s.current),[]),e.useCallback(()=>{window.clearTimeout(s.current),s.current=window.setTimeout(n,a)},[n,a])}function Uh(e,t){const a=Fe(t);Ue(()=>{let t=0;if(e){const n=new ResizeObserver(()=>{cancelAnimationFrame(t),t=window.requestAnimationFrame(a)});return n.observe(e),()=>{window.cancelAnimationFrame(t),n.unobserve(e)}}},[e,a])}var $h=ph,Vh=hh,Bh=_h;function Hh({className:e,children:a,...n}){return t.jsxs($h,{"data-slot":"scroll-area",className:Lc("relative",e),...n,children:[t.jsx(Vh,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:a}),t.jsx(qh,{}),t.jsx(Bh,{})]})}function qh({className:e,orientation:a="vertical",...n}){return t.jsx(gh,{"data-slot":"scroll-area-scrollbar",orientation:a,className:Lc("flex touch-none p-px transition-colors select-none","vertical"===a&&"h-full w-2.5 border-l border-l-transparent","horizontal"===a&&"h-2.5 flex-col border-t border-t-transparent",e),...n,children:t.jsx(Sh,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}function Gh({onContentSelect:a,sceneObjects:n=[],onRemoveObject:s}){const[i,r]=e.useState({models:[],images:[],videos:[],audios:[]}),[o,l]=e.useState({}),[c,d]=e.useState(!1);e.useEffect(()=>{u()},[]);const u=async()=>{try{const[e,t,a,n]=await Promise.all([fetch(qn("/api/library/models"),{credentials:"include"}),fetch(qn("/api/library/images"),{credentials:"include"}),fetch(qn("/api/library/videos"),{credentials:"include"}),fetch(qn("/api/library/audios"),{credentials:"include"})]),[s,i,o,l]=await Promise.all([e.json(),t.json(),a.json(),n.json()]);r({models:s||[],images:i||[],videos:o||[],audios:l||[]})}catch(e){console.error("Error fetching libraries:",e)}},p=({items:e,type:n,icon:s,accept:i})=>t.jsxs("div",{className:"space-y-4",children:[t.jsx(Uc,{className:"p-4 bg-slate-700 border-slate-600",children:t.jsxs("div",{className:"space-y-2",children:[t.jsxs(Fp,{className:"text-sm font-medium text-slate-200",children:["Upload ",n.charAt(0).toUpperCase()+n.slice(1)]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(Dp,{type:"file",accept:i,onChange:e=>{const t=e.target.files?.[0];t&&l({...o,[n]:t})},className:"flex-1 text-sm bg-slate-600 border-slate-500 text-slate-200"}),t.jsx(eu,{onClick:()=>(async(e,t)=>{if(!e)return;d(!0);const n=new FormData;n.append("file",e),n.append("type",t);try{const e=await fetch(qn("/api/content"),{method:"POST",body:n,credentials:"include"});if(!e.ok){const t=await e.json();throw new Error(t.message||"Upload failed")}{const n=await e.json();setTimeout(()=>{a({type:t,url:n.url})},100),await u(),l({...o,[t]:null})}}catch(s){console.error(`Error uploading ${t}:`,s)}finally{d(!1)}})(o[n],n),disabled:!o[n]||c,size:"sm",className:"bg-blue-600 hover:bg-blue-700",children:t.jsx(Vd,{className:"w-4 h-4"})})]})]})}),t.jsx(Hh,{className:"h-64",children:t.jsx("div",{className:"grid grid-cols-2 gap-2",children:(e||[]).map(e=>t.jsx(Uc,{className:"p-2 bg-slate-700 border-slate-600 hover:bg-slate-600 cursor-pointer transition-colors",onClick:()=>{return t={type:n,url:e.fileUrl,name:e.name,id:e.id},void a(t);var t},children:t.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[t.jsx(s,{className:"w-8 h-8 text-slate-400"}),t.jsx("span",{className:"text-xs text-slate-300 text-center truncate w-full",children:e.name})]})},e.id))})})]}),m=()=>t.jsx(Hh,{className:"h-64",children:t.jsxs("div",{className:"space-y-2",children:[n.map((e,a)=>t.jsx(Uc,{className:"p-3 bg-slate-700 border-slate-600",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:["model"===e.content.type&&t.jsx(td,{className:"w-4 h-4 text-blue-400"}),"image"===e.content.type&&t.jsx(vd,{className:"w-4 h-4 text-green-400"}),"video"===e.content.type&&t.jsx(Gd,{className:"w-4 h-4 text-purple-400"}),"audio"===e.content.type&&t.jsx(Sd,{className:"w-4 h-4 text-yellow-400"}),"light"===e.content.type&&t.jsx(yd,{className:"w-4 h-4 text-orange-400"}),t.jsx("span",{className:"text-sm text-slate-200",children:e.content.name||`${e.content.type.charAt(0).toUpperCase()+e.content.type.slice(1)} ${a+1}`})]}),t.jsx(eu,{onClick:()=>s(e.id),size:"sm",variant:"ghost",className:"h-8 w-8 p-0 hover:bg-red-600/20 hover:text-red-400",children:t.jsx($d,{className:"w-4 h-4"})})]})},e.id||a)),0===n.length&&t.jsx("div",{className:"text-center py-8 text-slate-400",children:"No objects in scene"})]})});return t.jsx("div",{className:"h-full",children:t.jsxs(nh,{defaultValue:"library",className:"h-full flex flex-col",children:[t.jsxs(sh,{className:"grid w-full grid-cols-2 bg-slate-700",children:[t.jsx(ih,{value:"library",className:"text-slate-200",children:"Library"}),t.jsx(ih,{value:"scene",className:"text-slate-200",children:"Scene Objects"})]}),t.jsx(rh,{value:"library",className:"flex-1 p-4 space-y-6",children:t.jsxs(nh,{defaultValue:"models",orientation:"horizontal",children:[t.jsxs(sh,{className:"grid w-full grid-cols-5 bg-slate-700",children:[t.jsx(ih,{value:"models",className:"text-slate-200",children:t.jsx(td,{className:"w-4 h-4"})}),t.jsx(ih,{value:"images",className:"text-slate-200",children:t.jsx(vd,{className:"w-4 h-4"})}),t.jsx(ih,{value:"videos",className:"text-slate-200",children:t.jsx(Gd,{className:"w-4 h-4"})}),t.jsx(ih,{value:"audios",className:"text-slate-200",children:t.jsx(Sd,{className:"w-4 h-4"})}),t.jsx(ih,{value:"lights",className:"text-slate-200",children:t.jsx(yd,{className:"w-4 h-4"})})]}),t.jsx(rh,{value:"models",children:t.jsx(p,{items:i.models,type:"model",icon:td,accept:".glb,.gltf,.obj,.fbx"})}),t.jsx(rh,{value:"images",children:t.jsx(p,{items:i.images,type:"image",icon:vd,accept:"image/*"})}),t.jsx(rh,{value:"videos",children:t.jsx(p,{items:i.videos,type:"video",icon:Gd,accept:"video/*"})}),t.jsx(rh,{value:"audios",children:t.jsx(p,{items:i.audios,type:"audio",icon:Sd,accept:"audio/*"})}),t.jsx(rh,{value:"lights",children:t.jsx("div",{className:"space-y-4",children:t.jsx(Uc,{className:"p-4 bg-slate-700 border-slate-600",children:t.jsxs("div",{className:"space-y-2",children:[t.jsx(Fp,{className:"text-sm font-medium text-slate-200",children:"Add Light Source"}),t.jsxs(eu,{onClick:()=>{a({type:"light",intensity:1,color:"#ffffff"})},className:"w-full bg-orange-600 hover:bg-orange-700",children:[t.jsx(yd,{className:"w-4 h-4 mr-2"}),"Add Directional Light"]})]})})})})]})}),t.jsx(rh,{value:"scene",className:"flex-1 p-4",children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs(Fp,{className:"text-sm font-medium text-slate-200",children:["Scene Objects (",n.length,")"]}),t.jsx(m,{})]})})]})})}function Kh({className:a,defaultValue:n,value:s,min:i=0,max:r=100,...o}){const l=e.useMemo(()=>Array.isArray(s)?s:Array.isArray(n)?n:[i,r],[s,n,i,r]);return t.jsxs(Ve,{"data-slot":"slider",defaultValue:n,value:s,min:i,max:r,className:Lc("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",a),...o,children:[t.jsx(Be,{"data-slot":"slider-track",className:Lc("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:t.jsx(He,{"data-slot":"slider-range",className:Lc("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:l.length},(e,a)=>t.jsx(qe,{"data-slot":"slider-thumb",className:"border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},a))]})}const Zh=(e,t)=>new Promise(a=>{const n=e.type;if(n.startsWith("image/")){const e=new Image;e.onload=function(){const e={width:this.width,height:this.height,aspectRatio:this.width/this.height,type:"image"};console.log("[DEBUG] Image dimensions captured:",e),a(e)},e.onerror=()=>a({type:"image",width:512,height:512,aspectRatio:1}),e.src=t}else if(n.startsWith("video/")){const e=document.createElement("video");e.onloadedmetadata=function(){const e={width:this.videoWidth,height:this.videoHeight,aspectRatio:this.videoWidth/this.videoHeight,duration:this.duration,type:"video"};console.log("[DEBUG] Video dimensions captured:",e),a(e)},e.onerror=()=>a({type:"video",width:640,height:480,aspectRatio:1.33}),e.src=t}else if(n.startsWith("audio/")){const e=new Audio;e.onloadedmetadata=function(){const e={duration:this.duration,type:"audio"};console.log("[DEBUG] Audio metadata captured:",e),a(e)},e.onerror=()=>a({type:"audio",duration:0}),e.src=t}else a({type:"model",width:1,height:1,aspectRatio:1})});function Qh({markerImage:a,config:n,onChange:s,onMindFileUpload:i,onMarkerImageUpload:r,transformMode:o,setTransformMode:l,uploadedMindFile:c,form:d}){Xp();const[u,p]=e.useState(null),[m,h]=e.useState(null),[f,g]=e.useState([]),x=e.useRef(null),v=e.useRef(null);e.useEffect(()=>{n.sceneObjects&&g(n.sceneObjects)},[n.sceneObjects]),e.useEffect(()=>{u&&!m&&(h("position"),l("translate"))},[u,m,l]),e.useEffect(()=>{const e=e=>{if("INPUT"!==document.activeElement.tagName&&"TEXTAREA"!==document.activeElement.tagName)switch(e.key.toLowerCase()){case"g":l("translate"),h("position");break;case"r":l("rotate"),h("rotation");break;case"s":l("scale"),h("scale")}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[l]);const b=e.useCallback(()=>{const e=f.map(e=>{if(e.meshRef?.current){const t=e.meshRef.current;return{...e,position:{x:t.position.x,y:t.position.y,z:t.position.z},rotation:{x:t.rotation.x,y:t.rotation.y,z:t.rotation.z},scale:{x:t.scale.x,y:t.scale.y,z:t.scale.z}}}return e});s({...n,sceneObjects:e})},[f,n,s]),y=e.useCallback(e=>{const t={id:Date.now().toString()+Math.random().toString(36).substr(2,9),...e},a=[...f,t];g(a),s({...n,sceneObjects:a})},[f,n,s]),w=e.useCallback(e=>{const t=e.id,a=f.filter(e=>e.id!==t);g(a),u?.sceneObj?.id===t&&p(null),s({...n,sceneObjects:a})},[f,u,n,s]),j=e.useCallback((e,t,a)=>{const i=f.map(n=>{if(n.id===e){const e={...n,[t]:a};if(n.meshRef?.current){const e=n.meshRef.current;"position"===t?e.position.set(a.x,a.y,a.z):"rotation"===t?e.rotation.set(a.x,a.y,a.z):"scale"===t&&e.scale.set(a.x,a.y,a.z)}return e}return n});g(i),s({...n,sceneObjects:i})},[f,n,s]),k=e.useCallback(e=>{p(e)},[]);return t.jsxs("div",{className:"flex w-full h-full",children:[t.jsx("input",{type:"file",accept:".mind",style:{display:"none"},ref:x,onChange:e=>{const t=e.target.files?.[0];t&&i(t)}}),t.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},ref:v,onChange:e=>{const t=e.target.files?.[0];if(t){const e=new FileReader;e.onload=e=>{const t=e.target?.result;if(t){const e=new Image;e.onload=function(){const e={dataUrl:t,dimensions:{width:this.width,height:this.height,aspectRatio:this.width/this.height}};console.log("[DEBUG] Marker image dimensions captured:",e.dimensions),r(e)},e.src=t}},e.readAsDataURL(t)}}}),t.jsxs("div",{className:"w-64 bg-slate-900 border-r border-slate-700 h-full flex flex-col",children:[t.jsx("div",{className:"bg-slate-800 p-4 border-b border-slate-700 flex-shrink-0",children:t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{children:t.jsx(am,{control:d.control,name:"title",render:({field:e})=>t.jsxs(im,{children:[t.jsx(rm,{className:"text-white",children:"Title"}),t.jsx(Dp,{...e,placeholder:"Experience Title",className:"bg-slate-700 border-slate-600 text-white"}),t.jsx(om,{})]})})}),t.jsx("div",{children:t.jsx(am,{control:d.control,name:"description",render:({field:e})=>t.jsxs(im,{children:[t.jsx(rm,{className:"text-white",children:"Description"}),t.jsx(Dp,{...e,placeholder:"Experience Description",className:"bg-slate-700 border-slate-600 text-white"}),t.jsx(om,{})]})})}),t.jsxs("div",{children:[t.jsx(rm,{className:"block mb-2 text-white",children:"Mind File"}),c&&t.jsx("p",{className:"text-sm text-gray-100 font-medium truncate bg-slate-700 px-3 py-2 rounded border border-slate-600",children:c})]})]})}),t.jsx("div",{className:"flex-1 overflow-y-auto",children:t.jsx(Gh,{onContentSelect:async e=>{console.log("[DEBUG] Content selected:",e);const t={x:0,y:.1,z:0};let n={x:.5,y:.5,z:.5},s=null;if(e.url)try{const t=await fetch(e.url),a=await t.blob(),n=new File([a],e.filename||"content",{type:a.type});s=await Zh(n,e.url),console.log("[DEBUG] Content dimensions:",s)}catch(o){console.warn("Could not capture content dimensions:",o)}const i=a?.dimensions||null;if(s&&i)n=((e,t)=>{let a=1;if(t&&e){const n=Math.min(t.width,t.height),s=Math.max(e.width||1,e.height||1),i=.4;a=n*i/s,a=Math.max(.1,Math.min(2,a)),console.log("[DEBUG] Calculated initial scale:",{markerSize:n,contentSize:s,targetRatio:i,baseScale:a})}return{x:a,y:a,z:a}})(s,i),console.log("[DEBUG] Calculated scale:",n);else switch(e.type){case"image":case"video":n={x:.6,y:.6,z:.6};break;case"model":n={x:.3,y:.3,z:.3};break;case"light":t.y=2,n={x:1,y:1,z:1};break;case"audio":n={x:.1,y:.1,z:.1}}const r={position:t,rotation:{x:0,y:0,z:0},scale:n,content:{...e,dimensions:s,intensity:"light"===e.type?1:void 0,color:"light"===e.type?"#ffffff":void 0}};y(r)},sceneObjects:n.sceneObjects||[],onRemoveObject:e=>{w({id:e})}})})]}),t.jsx("div",{className:"flex-1 h-full",children:t.jsx(bm,{sceneObjects:f,selectedObject:u,setSelectedObject:k,transformMode:o,onObjectChange:e=>{if(e){const t=f.map(t=>t.id===e.id?e:t);g(t),s({...n,sceneObjects:t})}else b()},markerImage:a,className:"w-full h-full bg-slate-800 relative"})}),t.jsx("div",{className:"w-64 bg-slate-800 border-l border-slate-700 h-full flex flex-col",children:t.jsxs(Uc,{className:"h-full bg-slate-800 border-0 rounded-none flex flex-col",children:[t.jsxs("div",{className:"p-4 border-b border-slate-700 flex-shrink-0",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-4",children:[t.jsxs(eu,{variant:"position"===m?"default":"outline",size:"sm",onClick:()=>{const e="position"===m?null:"position";h(e),"position"===e&&l("translate")},className:"flex items-center gap-2",children:[t.jsx(Cd,{className:"h-4 w-4"}),t.jsx("span",{className:"text-xs",children:"Move"})]}),t.jsxs(eu,{variant:"rotation"===m?"default":"outline",size:"sm",onClick:()=>{const e="rotation"===m?null:"rotation";h(e),"rotation"===e&&l("rotate")},className:"flex items-center gap-2",children:[t.jsx(zd,{className:"h-4 w-4"}),t.jsx("span",{className:"text-xs",children:"Rotate"})]}),t.jsxs(eu,{variant:"scale"===m?"default":"outline",size:"sm",onClick:()=>{const e="scale"===m?null:"scale";h(e),"scale"===e&&l("scale")},className:"flex items-center gap-2",children:[t.jsx(Ed,{className:"h-4 w-4"}),t.jsx("span",{className:"text-xs",children:"Scale"})]}),t.jsxs(eu,{variant:"lighting"===m?"default":"outline",size:"sm",onClick:()=>h(e=>"lighting"===e?null:"lighting"),className:"flex items-center gap-2",children:[t.jsx(Ld,{className:"h-4 w-4"}),t.jsx("span",{className:"text-xs",children:"Light"})]})]}),t.jsxs("div",{className:"space-y-2 mb-4",children:[t.jsxs(eu,{variant:"outline",size:"sm",onClick:()=>x.current?.click(),className:"w-full flex items-center gap-2",children:[t.jsx(Vd,{className:"h-4 w-4"}),t.jsx("span",{className:"text-xs",children:"Upload Mind"})]}),t.jsxs(eu,{variant:"outline",size:"sm",onClick:()=>v.current?.click(),className:"w-full flex items-center gap-2",children:[t.jsx(vd,{className:"h-4 w-4"}),t.jsx("span",{className:"text-xs",children:"Upload Marker"})]})]})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[u&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h3",{className:"text-white font-semibold",children:"Selected Object"}),t.jsxs(eu,{variant:"outline",size:"sm",onClick:()=>{p(null),h(null)},className:"flex items-center gap-1 text-xs",children:[t.jsx(Zd,{className:"h-3 w-3"}),"Clear"]})]}),"position"===m&&t.jsxs("div",{className:"space-y-3",children:[t.jsx(Fp,{className:"text-white",children:"Position"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{children:[t.jsxs(Fp,{className:"text-sm text-gray-300",children:["X-Position: ",u.sceneObj.position?.x?.toFixed(3)||0]}),t.jsx(Kh,{value:[u.sceneObj.position?.x||0],onValueChange:([e])=>j(u.sceneObj.id,"position",{...u.sceneObj.position,x:Number(e.toFixed(3))}),min:-5,max:5,step:.01,className:"w-full"})]}),t.jsxs("div",{children:[t.jsxs(Fp,{className:"text-sm text-gray-300",children:["Y-Height: ",u.sceneObj.position?.y?.toFixed(3)||0,t.jsx("span",{className:"text-xs ml-2 text-gray-400",children:"(above marker)"})]}),t.jsx(Kh,{value:[u.sceneObj.position?.y||0],onValueChange:([e])=>j(u.sceneObj.id,"position",{...u.sceneObj.position,y:Number(e.toFixed(3))}),min:0,max:8,step:.05,className:"w-full"})]}),t.jsxs("div",{children:[t.jsxs(Fp,{className:"text-sm text-gray-300",children:["Z-Depth: ",u.sceneObj.position?.z?.toFixed(3)||0,t.jsx("span",{className:"text-xs ml-2 text-gray-400",children:"(forward/backward)"})]}),t.jsx(Kh,{value:[u.sceneObj.position?.z||0],onValueChange:([e])=>j(u.sceneObj.id,"position",{...u.sceneObj.position,z:Number(e.toFixed(3))}),min:-8,max:8,step:.05,className:"w-full"})]})]})]}),"rotation"===m&&t.jsxs("div",{className:"space-y-3",children:[t.jsx(Fp,{className:"text-white",children:"Rotation"}),t.jsxs("div",{className:"flex gap-2 mb-3",children:[t.jsx("button",{onClick:()=>j(u.sceneObj.id,"rotation",{x:0,y:0,z:0}),className:"px-2 py-1 text-xs bg-blue-600 hover:bg-blue-700 text-white rounded",children:"Vertical"}),t.jsx("button",{onClick:()=>j(u.sceneObj.id,"rotation",{x:Math.PI/2,y:0,z:0}),className:"px-2 py-1 text-xs bg-green-600 hover:bg-green-700 text-white rounded",children:"Horizontal"}),t.jsx("button",{onClick:()=>j(u.sceneObj.id,"rotation",{x:0,y:Math.PI/2,z:0}),className:"px-2 py-1 text-xs bg-purple-600 hover:bg-purple-700 text-white rounded",children:"Turn Right"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{children:[t.jsxs(Fp,{className:"text-sm text-gray-300",children:["X-Axis (Pitch): ",(180*u.sceneObj.rotation?.x/Math.PI||0).toFixed(1),"°",t.jsx("span",{className:"text-xs ml-2 text-gray-400",children:"(0°=vertical in AR, 90°=horizontal, -90°=upside down)"})]}),t.jsx(Kh,{value:[180*u.sceneObj.rotation?.x/Math.PI||0],onValueChange:([e])=>j(u.sceneObj.id,"rotation",{...u.sceneObj.rotation,x:e*Math.PI/180}),min:-180,max:180,step:5,className:"w-full"})]}),t.jsxs("div",{children:[t.jsxs(Fp,{className:"text-sm text-gray-300",children:["Y-Axis (Yaw): ",(180*u.sceneObj.rotation?.y/Math.PI||0).toFixed(1),"°",t.jsx("span",{className:"text-xs ml-2 text-gray-400",children:"(90°=turn right, 0°=forward, -90°=turn left)"})]}),t.jsx(Kh,{value:[180*u.sceneObj.rotation?.y/Math.PI||0],onValueChange:([e])=>j(u.sceneObj.id,"rotation",{...u.sceneObj.rotation,y:e*Math.PI/180}),min:-180,max:180,step:5,className:"w-full"})]}),t.jsxs("div",{children:[t.jsxs(Fp,{className:"text-sm text-gray-300",children:["Z-Axis (Roll): ",(180*u.sceneObj.rotation?.z/Math.PI||0).toFixed(1),"°",t.jsx("span",{className:"text-xs ml-2 text-gray-400",children:"(tilt clockwise/counter-clockwise)"})]}),t.jsx(Kh,{value:[180*u.sceneObj.rotation?.z/Math.PI||0],onValueChange:([e])=>j(u.sceneObj.id,"rotation",{...u.sceneObj.rotation,z:e*Math.PI/180}),min:-180,max:180,step:5,className:"w-full"})]})]})]}),"scale"===m&&t.jsxs("div",{className:"space-y-3",children:[t.jsx(Fp,{className:"text-white",children:"Scale"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{children:[t.jsxs(Fp,{className:"text-sm text-gray-300",children:["X: ",u.sceneObj.scale?.x?.toFixed(2)||1]}),t.jsx(Kh,{value:[u.sceneObj.scale?.x||1],onValueChange:([e])=>j(u.sceneObj.id,"scale",{...u.sceneObj.scale,x:e}),min:.1,max:5,step:.1,className:"w-full"})]}),t.jsxs("div",{children:[t.jsxs(Fp,{className:"text-sm text-gray-300",children:["Y: ",u.sceneObj.scale?.y?.toFixed(2)||1]}),t.jsx(Kh,{value:[u.sceneObj.scale?.y||1],onValueChange:([e])=>j(u.sceneObj.id,"scale",{...u.sceneObj.scale,y:e}),min:.1,max:5,step:.1,className:"w-full"})]}),t.jsxs("div",{children:[t.jsxs(Fp,{className:"text-sm text-gray-300",children:["Z: ",u.sceneObj.scale?.z?.toFixed(2)||1]}),t.jsx(Kh,{value:[u.sceneObj.scale?.z||1],onValueChange:([e])=>j(u.sceneObj.id,"scale",{...u.sceneObj.scale,z:e}),min:.1,max:5,step:.1,className:"w-full"})]})]})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"flex items-center justify-between border-b border-slate-600 pb-2",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("h3",{className:"text-white font-semibold",children:"Scene Objects"}),t.jsx("span",{className:"text-xs bg-slate-600 text-gray-300 px-2 py-1 rounded-full",children:f.length})]})}),f.length>0?t.jsx("div",{className:"space-y-2",children:f.map(e=>t.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border transition-colors cursor-pointer "+(u?.sceneObj?.id===e.id?"border-blue-500 bg-blue-500/10":"border-slate-600 bg-slate-700/50 hover:bg-slate-700"),onClick:()=>{const t=e.meshRef?.current;t&&(p({mesh:t,sceneObj:e}),m||(h("position"),l("translate")))},children:[t.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[t.jsxs("div",{className:"flex-shrink-0 relative",children:["model"===e.content.type&&t.jsx(td,{className:"h-4 w-4 text-blue-400"}),"image"===e.content.type&&t.jsx(vd,{className:"h-4 w-4 text-green-400"}),"video"===e.content.type&&t.jsx(Gd,{className:"h-4 w-4 text-purple-400"}),"primitive"===e.content.type&&t.jsx(td,{className:"h-4 w-4 text-yellow-400"}),"light"===e.content.type&&t.jsx(yd,{className:"h-4 w-4 text-orange-400"}),"audio"===e.content.type&&t.jsx(Kd,{className:"h-4 w-4 text-pink-400"}),u?.sceneObj?.id===e.id&&t.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 bg-blue-500 rounded-full"})]}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm text-white font-medium truncate",children:e.content.name||e.content.url?.split("/").pop()?.replace(/^\d+-/,"")||`${e.content.type} Object`}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("p",{className:"text-xs text-gray-400 capitalize",children:e.content.type}),t.jsx("span",{className:"text-xs text-gray-500",children:"•"}),t.jsx("p",{className:"text-xs text-gray-500",children:`(${e.position.x.toFixed(1)}, ${e.position.y.toFixed(1)}, ${e.position.z.toFixed(1)})`})]})]})]}),t.jsx(eu,{variant:"ghost",size:"sm",onClick:t=>{t.stopPropagation(),w(e)},className:"flex-shrink-0 h-8 w-8 p-0 text-red-400 hover:text-red-300 hover:bg-red-500/10",children:t.jsx($d,{className:"h-3 w-3"})})]},e.id))}):t.jsxs("div",{className:"text-center text-gray-400 py-4",children:[t.jsx(td,{className:"h-8 w-8 mx-auto mb-2 text-gray-500"}),t.jsx("p",{className:"text-sm",children:"No objects in scene"}),t.jsx("p",{className:"text-xs text-gray-500",children:"Upload files to get started"})]})]}),!u&&t.jsx("div",{className:"text-center text-gray-400",children:t.jsx("p",{className:"text-sm",children:"Select an object to edit its properties"})})]})]})})]})}function Wh(e,t){if(t===p)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),e;if(t===m||t===h){let a=e.getIndex();if(null===a){const t=[],n=e.getAttribute("position");if(void 0===n)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(let e=0;e<n.count;e++)t.push(e);e.setIndex(t),a=e.getIndex()}const n=a.count-2,s=[];if(t===m)for(let e=1;e<=n;e++)s.push(a.getX(0)),s.push(a.getX(e)),s.push(a.getX(e+1));else for(let e=0;e<n;e++)e%2==0?(s.push(a.getX(e)),s.push(a.getX(e+1)),s.push(a.getX(e+2))):(s.push(a.getX(e+2)),s.push(a.getX(e+1)),s.push(a.getX(e)));s.length/3!==n&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const i=e.clone();return i.setIndex(s),i.clearGroups(),i}return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),e}class Yh extends f{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(e){return new nf(e)}),this.register(function(e){return new sf(e)}),this.register(function(e){return new hf(e)}),this.register(function(e){return new ff(e)}),this.register(function(e){return new gf(e)}),this.register(function(e){return new of(e)}),this.register(function(e){return new lf(e)}),this.register(function(e){return new cf(e)}),this.register(function(e){return new df(e)}),this.register(function(e){return new af(e)}),this.register(function(e){return new uf(e)}),this.register(function(e){return new rf(e)}),this.register(function(e){return new mf(e)}),this.register(function(e){return new pf(e)}),this.register(function(e){return new ef(e)}),this.register(function(e){return new xf(e)}),this.register(function(e){return new vf(e)})}load(e,t,a,n){const s=this;let i;if(""!==this.resourcePath)i=this.resourcePath;else if(""!==this.path){const t=g.extractUrlBase(e);i=g.resolveURL(t,this.path)}else i=g.extractUrlBase(e);this.manager.itemStart(e);const r=function(t){n?n(t):console.error(t),s.manager.itemError(e),s.manager.itemEnd(e)},o=new x(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{s.parse(a,i,function(a){t(a),s.manager.itemEnd(e)},r)}catch(Cv){r(Cv)}},a,r)}setDRACOLoader(e){return this.dracoLoader=e,this}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,a,n){let s;const i={},r={},o=new TextDecoder;if("string"==typeof e)s=JSON.parse(e);else if(e instanceof ArrayBuffer){if(o.decode(new Uint8Array(e,0,4))===bf){try{i[Jh.KHR_BINARY_GLTF]=new jf(e)}catch(c){return void(n&&n(c))}s=JSON.parse(i[Jh.KHR_BINARY_GLTF].content)}else s=JSON.parse(o.decode(e))}else s=e;if(void 0===s.asset||s.asset.version[0]<2)return void(n&&n(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const l=new Zf(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let d=0;d<this.pluginCallbacks.length;d++){const e=this.pluginCallbacks[d](l);e.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),r[e.name]=e,i[e.name]=!0}if(s.extensionsUsed)for(let d=0;d<s.extensionsUsed.length;++d){const e=s.extensionsUsed[d],t=s.extensionsRequired||[];switch(e){case Jh.KHR_MATERIALS_UNLIT:i[e]=new tf;break;case Jh.KHR_DRACO_MESH_COMPRESSION:i[e]=new kf(s,this.dracoLoader);break;case Jh.KHR_TEXTURE_TRANSFORM:i[e]=new Nf;break;case Jh.KHR_MESH_QUANTIZATION:i[e]=new Ef;break;default:t.indexOf(e)>=0&&void 0===r[e]&&console.warn('THREE.GLTFLoader: Unknown extension "'+e+'".')}}l.setExtensions(i),l.setPlugins(r),l.parse(a,n)}parseAsync(e,t){const a=this;return new Promise(function(n,s){a.parse(e,t,n,s)})}}function Xh(){let e={};return{get:function(t){return e[t]},add:function(t,a){e[t]=a},remove:function(t){delete e[t]},removeAll:function(){e={}}}}const Jh={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class ef{constructor(e){this.parser=e,this.name=Jh.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let a=0,n=t.length;a<n;a++){const n=t[a];n.extensions&&n.extensions[this.name]&&void 0!==n.extensions[this.name].light&&e._addNodeRef(this.cache,n.extensions[this.name].light)}}_loadLight(e){const t=this.parser,a="light:"+e;let n=t.cache.get(a);if(n)return n;const s=t.json,i=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let r;const o=new c(16777215);void 0!==i.color&&o.setRGB(i.color[0],i.color[1],i.color[2],y);const l=void 0!==i.range?i.range:0;switch(i.type){case"directional":r=new N(o),r.target.position.set(0,0,-1),r.add(r.target);break;case"point":r=new k(o),r.distance=l;break;case"spot":r=new j(o),r.distance=l,i.spot=i.spot||{},i.spot.innerConeAngle=void 0!==i.spot.innerConeAngle?i.spot.innerConeAngle:0,i.spot.outerConeAngle=void 0!==i.spot.outerConeAngle?i.spot.outerConeAngle:Math.PI/4,r.angle=i.spot.outerConeAngle,r.penumbra=1-i.spot.innerConeAngle/i.spot.outerConeAngle,r.target.position.set(0,0,-1),r.add(r.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+i.type)}return r.position.set(0,0,0),Vf(r,i),void 0!==i.intensity&&(r.intensity=i.intensity),r.name=t.createUniqueName(i.name||"light_"+e),n=Promise.resolve(r),t.cache.add(a,n),n}getDependency(e,t){if("light"===e)return this._loadLight(t)}createNodeAttachment(e){const t=this,a=this.parser,n=a.json.nodes[e],s=(n.extensions&&n.extensions[this.name]||{}).light;return void 0===s?null:this._loadLight(s).then(function(e){return a._getNodeRef(t.cache,s,e)})}}class tf{constructor(){this.name=Jh.KHR_MATERIALS_UNLIT}getMaterialType(){return Z}extendParams(e,t,a){const n=[];e.color=new c(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const t=s.baseColorFactor;e.color.setRGB(t[0],t[1],t[2],y),e.opacity=t[3]}void 0!==s.baseColorTexture&&n.push(a.assignTexture(e,"map",s.baseColorTexture,w))}return Promise.all(n)}}class af{constructor(e){this.parser=e,this.name=Jh.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const a=this.parser.json.materials[e];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const n=a.extensions[this.name].emissiveStrength;return void 0!==n&&(t.emissiveIntensity=n),Promise.resolve()}}class nf{constructor(e){this.parser=e,this.name=Jh.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?v:null}extendMaterialParams(e,t){const a=this.parser,n=a.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const s=[],i=n.extensions[this.name];if(void 0!==i.clearcoatFactor&&(t.clearcoat=i.clearcoatFactor),void 0!==i.clearcoatTexture&&s.push(a.assignTexture(t,"clearcoatMap",i.clearcoatTexture)),void 0!==i.clearcoatRoughnessFactor&&(t.clearcoatRoughness=i.clearcoatRoughnessFactor),void 0!==i.clearcoatRoughnessTexture&&s.push(a.assignTexture(t,"clearcoatRoughnessMap",i.clearcoatRoughnessTexture)),void 0!==i.clearcoatNormalTexture&&(s.push(a.assignTexture(t,"clearcoatNormalMap",i.clearcoatNormalTexture)),void 0!==i.clearcoatNormalTexture.scale)){const e=i.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new b(e,e)}return Promise.all(s)}}class sf{constructor(e){this.parser=e,this.name=Jh.KHR_MATERIALS_DISPERSION}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?v:null}extendMaterialParams(e,t){const a=this.parser.json.materials[e];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const n=a.extensions[this.name];return t.dispersion=void 0!==n.dispersion?n.dispersion:0,Promise.resolve()}}class rf{constructor(e){this.parser=e,this.name=Jh.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?v:null}extendMaterialParams(e,t){const a=this.parser,n=a.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const s=[],i=n.extensions[this.name];return void 0!==i.iridescenceFactor&&(t.iridescence=i.iridescenceFactor),void 0!==i.iridescenceTexture&&s.push(a.assignTexture(t,"iridescenceMap",i.iridescenceTexture)),void 0!==i.iridescenceIor&&(t.iridescenceIOR=i.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==i.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=i.iridescenceThicknessMinimum),void 0!==i.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=i.iridescenceThicknessMaximum),void 0!==i.iridescenceThicknessTexture&&s.push(a.assignTexture(t,"iridescenceThicknessMap",i.iridescenceThicknessTexture)),Promise.all(s)}}class of{constructor(e){this.parser=e,this.name=Jh.KHR_MATERIALS_SHEEN}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?v:null}extendMaterialParams(e,t){const a=this.parser,n=a.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new c(0,0,0),t.sheenRoughness=0,t.sheen=1;const i=n.extensions[this.name];if(void 0!==i.sheenColorFactor){const e=i.sheenColorFactor;t.sheenColor.setRGB(e[0],e[1],e[2],y)}return void 0!==i.sheenRoughnessFactor&&(t.sheenRoughness=i.sheenRoughnessFactor),void 0!==i.sheenColorTexture&&s.push(a.assignTexture(t,"sheenColorMap",i.sheenColorTexture,w)),void 0!==i.sheenRoughnessTexture&&s.push(a.assignTexture(t,"sheenRoughnessMap",i.sheenRoughnessTexture)),Promise.all(s)}}class lf{constructor(e){this.parser=e,this.name=Jh.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?v:null}extendMaterialParams(e,t){const a=this.parser,n=a.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const s=[],i=n.extensions[this.name];return void 0!==i.transmissionFactor&&(t.transmission=i.transmissionFactor),void 0!==i.transmissionTexture&&s.push(a.assignTexture(t,"transmissionMap",i.transmissionTexture)),Promise.all(s)}}class cf{constructor(e){this.parser=e,this.name=Jh.KHR_MATERIALS_VOLUME}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?v:null}extendMaterialParams(e,t){const a=this.parser,n=a.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const s=[],i=n.extensions[this.name];t.thickness=void 0!==i.thicknessFactor?i.thicknessFactor:0,void 0!==i.thicknessTexture&&s.push(a.assignTexture(t,"thicknessMap",i.thicknessTexture)),t.attenuationDistance=i.attenuationDistance||1/0;const r=i.attenuationColor||[1,1,1];return t.attenuationColor=(new c).setRGB(r[0],r[1],r[2],y),Promise.all(s)}}class df{constructor(e){this.parser=e,this.name=Jh.KHR_MATERIALS_IOR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?v:null}extendMaterialParams(e,t){const a=this.parser.json.materials[e];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const n=a.extensions[this.name];return t.ior=void 0!==n.ior?n.ior:1.5,Promise.resolve()}}class uf{constructor(e){this.parser=e,this.name=Jh.KHR_MATERIALS_SPECULAR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?v:null}extendMaterialParams(e,t){const a=this.parser,n=a.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const s=[],i=n.extensions[this.name];t.specularIntensity=void 0!==i.specularFactor?i.specularFactor:1,void 0!==i.specularTexture&&s.push(a.assignTexture(t,"specularIntensityMap",i.specularTexture));const r=i.specularColorFactor||[1,1,1];return t.specularColor=(new c).setRGB(r[0],r[1],r[2],y),void 0!==i.specularColorTexture&&s.push(a.assignTexture(t,"specularColorMap",i.specularColorTexture,w)),Promise.all(s)}}class pf{constructor(e){this.parser=e,this.name=Jh.EXT_MATERIALS_BUMP}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?v:null}extendMaterialParams(e,t){const a=this.parser,n=a.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const s=[],i=n.extensions[this.name];return t.bumpScale=void 0!==i.bumpFactor?i.bumpFactor:1,void 0!==i.bumpTexture&&s.push(a.assignTexture(t,"bumpMap",i.bumpTexture)),Promise.all(s)}}class mf{constructor(e){this.parser=e,this.name=Jh.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?v:null}extendMaterialParams(e,t){const a=this.parser,n=a.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const s=[],i=n.extensions[this.name];return void 0!==i.anisotropyStrength&&(t.anisotropy=i.anisotropyStrength),void 0!==i.anisotropyRotation&&(t.anisotropyRotation=i.anisotropyRotation),void 0!==i.anisotropyTexture&&s.push(a.assignTexture(t,"anisotropyMap",i.anisotropyTexture)),Promise.all(s)}}class hf{constructor(e){this.parser=e,this.name=Jh.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,a=t.json,n=a.textures[e];if(!n.extensions||!n.extensions[this.name])return null;const s=n.extensions[this.name],i=t.options.ktx2Loader;if(!i){if(a.extensionsRequired&&a.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,i)}}class ff{constructor(e){this.parser=e,this.name=Jh.EXT_TEXTURE_WEBP}loadTexture(e){const t=this.name,a=this.parser,n=a.json,s=n.textures[e];if(!s.extensions||!s.extensions[t])return null;const i=s.extensions[t],r=n.images[i.source];let o=a.textureLoader;if(r.uri){const e=a.options.manager.getHandler(r.uri);null!==e&&(o=e)}return a.loadTextureImage(e,i.source,o)}}class gf{constructor(e){this.parser=e,this.name=Jh.EXT_TEXTURE_AVIF}loadTexture(e){const t=this.name,a=this.parser,n=a.json,s=n.textures[e];if(!s.extensions||!s.extensions[t])return null;const i=s.extensions[t],r=n.images[i.source];let o=a.textureLoader;if(r.uri){const e=a.options.manager.getHandler(r.uri);null!==e&&(o=e)}return a.loadTextureImage(e,i.source,o)}}class xf{constructor(e){this.name=Jh.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,a=t.bufferViews[e];if(a.extensions&&a.extensions[this.name]){const e=a.extensions[this.name],n=this.parser.getDependency("buffer",e.buffer),s=this.parser.options.meshoptDecoder;if(!s||!s.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return n.then(function(t){const a=e.byteOffset||0,n=e.byteLength||0,i=e.count,r=e.byteStride,o=new Uint8Array(t,a,n);return s.decodeGltfBufferAsync?s.decodeGltfBufferAsync(i,r,o,e.mode,e.filter).then(function(e){return e.buffer}):s.ready.then(function(){const t=new ArrayBuffer(i*r);return s.decodeGltfBuffer(new Uint8Array(t),i,r,o,e.mode,e.filter),t})})}return null}}class vf{constructor(e){this.name=Jh.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,a=t.nodes[e];if(!a.extensions||!a.extensions[this.name]||void 0===a.mesh)return null;const n=t.meshes[a.mesh];for(const o of n.primitives)if(o.mode!==Af.TRIANGLES&&o.mode!==Af.TRIANGLE_STRIP&&o.mode!==Af.TRIANGLE_FAN&&void 0!==o.mode)return null;const s=a.extensions[this.name].attributes,i=[],r={};for(const o in s)i.push(this.parser.getDependency("accessor",s[o]).then(e=>(r[o]=e,r[o])));return i.length<1?null:(i.push(this.parser.createNodeMesh(e)),Promise.all(i).then(e=>{const t=e.pop(),a=t.isGroup?t.children:[t],n=e[0].count,s=[];for(const i of a){const e=new E,t=new C,a=new R,o=new C(1,1,1),l=new S(i.geometry,i.material,n);for(let s=0;s<n;s++)r.TRANSLATION&&t.fromBufferAttribute(r.TRANSLATION,s),r.ROTATION&&a.fromBufferAttribute(r.ROTATION,s),r.SCALE&&o.fromBufferAttribute(r.SCALE,s),l.setMatrixAt(s,e.compose(t,a,o));for(const n in r)if("_COLOR_0"===n){const e=r[n];l.instanceColor=new A(e.array,e.itemSize,e.normalized)}else"TRANSLATION"!==n&&"ROTATION"!==n&&"SCALE"!==n&&i.geometry.setAttribute(n,r[n]);_.prototype.copy.call(l,i),this.parser.assignFinalMaterial(l),s.push(l)}return t.isGroup?(t.clear(),t.add(...s),t):s[0]}))}}const bf="glTF",yf=1313821514,wf=5130562;class jf{constructor(e){this.name=Jh.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,12),a=new TextDecoder;if(this.header={magic:a.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==bf)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-12,s=new DataView(e,12);let i=0;for(;i<n;){const t=s.getUint32(i,!0);i+=4;const n=s.getUint32(i,!0);if(i+=4,n===yf){const n=new Uint8Array(e,12+i,t);this.content=a.decode(n)}else if(n===wf){const a=12+i;this.body=e.slice(a,a+t)}i+=t}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class kf{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Jh.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const a=this.json,n=this.dracoLoader,s=e.extensions[this.name].bufferView,i=e.extensions[this.name].attributes,r={},o={},l={};for(const c in i){const e=Of[c]||c.toLowerCase();r[e]=i[c]}for(const c in e.attributes){const t=Of[c]||c.toLowerCase();if(void 0!==i[c]){const n=a.accessors[e.attributes[c]],s=_f[n.componentType];l[t]=s.name,o[t]=!0===n.normalized}}return t.getDependency("bufferView",s).then(function(e){return new Promise(function(t,a){n.decodeDracoFile(e,function(e){for(const t in e.attributes){const a=e.attributes[t],n=o[t];void 0!==n&&(a.normalized=n)}t(e)},r,l,y,a)})})}}class Nf{constructor(){this.name=Jh.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return void 0!==t.texCoord&&t.texCoord!==e.channel||void 0!==t.offset||void 0!==t.rotation||void 0!==t.scale?(e=e.clone(),void 0!==t.texCoord&&(e.channel=t.texCoord),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0,e):e}}class Ef{constructor(){this.name=Jh.KHR_MESH_QUANTIZATION}}class Cf extends be{constructor(e,t,a,n){super(e,t,a,n)}copySampleValue_(e){const t=this.resultBuffer,a=this.sampleValues,n=this.valueSize,s=e*n*3+n;for(let i=0;i!==n;i++)t[i]=a[s+i];return t}interpolate_(e,t,a,n){const s=this.resultBuffer,i=this.sampleValues,r=this.valueSize,o=2*r,l=3*r,c=n-t,d=(a-t)/c,u=d*d,p=u*d,m=e*l,h=m-l,f=-2*p+3*u,g=p-u,x=1-f,v=g-u+d;for(let b=0;b!==r;b++){const e=i[h+b+r],t=i[h+b+o]*c,a=i[m+b+r],n=i[m+b]*c;s[b]=x*e+v*t+f*a+g*n}return s}}const Sf=new R;class Rf extends Cf{interpolate_(e,t,a,n){const s=super.interpolate_(e,t,a,n);return Sf.fromArray(s).normalize().toArray(s),s}}const Af={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},_f={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Tf={9728:L,9729:F,9984:D,9985:P,9986:I,9987:O},zf={33071:V,33648:$,10497:U},Mf={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Of={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},If={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Pf={CUBICSPLINE:void 0,LINEAR:ue,STEP:de},Df="OPAQUE",Ff="MASK",Lf="BLEND";function Uf(e){return void 0===e.DefaultMaterial&&(e.DefaultMaterial=new G({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:ve})),e.DefaultMaterial}function $f(e,t,a){for(const n in a.extensions)void 0===e[n]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[n]=a.extensions[n])}function Vf(e,t){void 0!==t.extras&&("object"==typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function Bf(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(let a=0,n=t.weights.length;a<n;a++)e.morphTargetInfluences[a]=t.weights[a];if(t.extras&&Array.isArray(t.extras.targetNames)){const a=t.extras.targetNames;if(e.morphTargetInfluences.length===a.length){e.morphTargetDictionary={};for(let t=0,n=a.length;t<n;t++)e.morphTargetDictionary[a[t]]=t}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Hf(e){let t;const a=e.extensions&&e.extensions[Jh.KHR_DRACO_MESH_COMPRESSION];if(t=a?"draco:"+a.bufferView+":"+a.indices+":"+qf(a.attributes):e.indices+":"+qf(e.attributes)+":"+e.mode,void 0!==e.targets)for(let n=0,s=e.targets.length;n<s;n++)t+=":"+qf(e.targets[n]);return t}function qf(e){let t="";const a=Object.keys(e).sort();for(let n=0,s=a.length;n<s;n++)t+=a[n]+":"+e[a[n]]+";";return t}function Gf(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}const Kf=new E;class Zf{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new Xh,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let a=!1,n=-1,i=!1,r=-1;if("undefined"!=typeof navigator){const e=navigator.userAgent;a=!0===/^((?!chrome|android).)*safari/i.test(e);const t=e.match(/Version\/(\d+)/);n=a&&t?parseInt(t[1],10):-1,i=e.indexOf("Firefox")>-1,r=i?e.match(/Firefox\/([0-9]+)\./)[1]:-1}"undefined"==typeof createImageBitmap||a&&n<17||i&&r<98?this.textureLoader=new s(this.options.manager):this.textureLoader=new T(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new x(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const a=this,n=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(e){return e._markDefs&&e._markDefs()}),Promise.all(this._invokeAll(function(e){return e.beforeRoot&&e.beforeRoot()})).then(function(){return Promise.all([a.getDependencies("scene"),a.getDependencies("animation"),a.getDependencies("camera")])}).then(function(t){const i={scene:t[0][n.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:n.asset,parser:a,userData:{}};return $f(s,i,n),Vf(i,n),Promise.all(a._invokeAll(function(e){return e.afterRoot&&e.afterRoot(i)})).then(function(){for(const e of i.scenes)e.updateMatrixWorld();e(i)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],a=this.json.meshes||[];for(let n=0,s=t.length;n<s;n++){const a=t[n].joints;for(let t=0,n=a.length;t<n;t++)e[a[t]].isBone=!0}for(let n=0,s=e.length;n<s;n++){const t=e[n];void 0!==t.mesh&&(this._addNodeRef(this.meshCache,t.mesh),void 0!==t.skin&&(a[t.mesh].isSkinnedMesh=!0)),void 0!==t.camera&&this._addNodeRef(this.cameraCache,t.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,a){if(e.refs[t]<=1)return a;const n=a.clone(),s=(e,t)=>{const a=this.associations.get(e);null!=a&&this.associations.set(t,a);for(const[n,i]of e.children.entries())s(i,t.children[n])};return s(a,n),n.name+="_instance_"+e.uses[t]++,n}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let a=0;a<t.length;a++){const n=e(t[a]);if(n)return n}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const a=[];for(let n=0;n<t.length;n++){const s=e(t[n]);s&&a.push(s)}return a}getDependency(e,t){const a=e+":"+t;let n=this.cache.get(a);if(!n){switch(e){case"scene":n=this.loadScene(t);break;case"node":n=this._invokeOne(function(e){return e.loadNode&&e.loadNode(t)});break;case"mesh":n=this._invokeOne(function(e){return e.loadMesh&&e.loadMesh(t)});break;case"accessor":n=this.loadAccessor(t);break;case"bufferView":n=this._invokeOne(function(e){return e.loadBufferView&&e.loadBufferView(t)});break;case"buffer":n=this.loadBuffer(t);break;case"material":n=this._invokeOne(function(e){return e.loadMaterial&&e.loadMaterial(t)});break;case"texture":n=this._invokeOne(function(e){return e.loadTexture&&e.loadTexture(t)});break;case"skin":n=this.loadSkin(t);break;case"animation":n=this._invokeOne(function(e){return e.loadAnimation&&e.loadAnimation(t)});break;case"camera":n=this.loadCamera(t);break;default:if(n=this._invokeOne(function(a){return a!=this&&a.getDependency&&a.getDependency(e,t)}),!n)throw new Error("Unknown type: "+e)}this.cache.add(a,n)}return n}getDependencies(e){let t=this.cache.get(e);if(!t){const a=this,n=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(n.map(function(t,n){return a.getDependency(e,n)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],a=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[Jh.KHR_BINARY_GLTF].body);const n=this.options;return new Promise(function(e,s){a.load(g.resolveURL(t.uri,n.path),e,void 0,function(){s(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(e){const a=t.byteLength||0,n=t.byteOffset||0;return e.slice(n,n+a)})}loadAccessor(e){const t=this,a=this.json,n=this.json.accessors[e];if(void 0===n.bufferView&&void 0===n.sparse){const e=Mf[n.type],t=_f[n.componentType],a=!0===n.normalized,s=new t(n.count*e);return Promise.resolve(new z(s,e,a))}const s=[];return void 0!==n.bufferView?s.push(this.getDependency("bufferView",n.bufferView)):s.push(null),void 0!==n.sparse&&(s.push(this.getDependency("bufferView",n.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",n.sparse.values.bufferView))),Promise.all(s).then(function(e){const s=e[0],i=Mf[n.type],r=_f[n.componentType],o=r.BYTES_PER_ELEMENT,l=o*i,c=n.byteOffset||0,d=void 0!==n.bufferView?a.bufferViews[n.bufferView].byteStride:void 0,u=!0===n.normalized;let p,m;if(d&&d!==l){const e=Math.floor(c/d),a="InterleavedBuffer:"+n.bufferView+":"+n.componentType+":"+e+":"+n.count;let l=t.cache.get(a);l||(p=new r(s,e*d,n.count*d/o),l=new M(p,d/o),t.cache.add(a,l)),m=new pe(l,i,c%d/o,u)}else p=null===s?new r(n.count*i):new r(s,c,n.count*i),m=new z(p,i,u);if(void 0!==n.sparse){const t=Mf.SCALAR,a=_f[n.sparse.indices.componentType],o=n.sparse.indices.byteOffset||0,l=n.sparse.values.byteOffset||0,c=new a(e[1],o,n.sparse.count*t),d=new r(e[2],l,n.sparse.count*i);null!==s&&(m=new z(m.array.slice(),m.itemSize,m.normalized)),m.normalized=!1;for(let e=0,n=c.length;e<n;e++){const t=c[e];if(m.setX(t,d[e*i]),i>=2&&m.setY(t,d[e*i+1]),i>=3&&m.setZ(t,d[e*i+2]),i>=4&&m.setW(t,d[e*i+3]),i>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}m.normalized=u}return m})}loadTexture(e){const t=this.json,a=this.options,n=t.textures[e].source,s=t.images[n];let i=this.textureLoader;if(s.uri){const e=a.manager.getHandler(s.uri);null!==e&&(i=e)}return this.loadTextureImage(e,n,i)}loadTextureImage(e,t,a){const n=this,s=this.json,i=s.textures[e],r=s.images[t],o=(r.uri||r.bufferView)+":"+i.sampler;if(this.textureCache[o])return this.textureCache[o];const l=this.loadImageSource(t,a).then(function(t){t.flipY=!1,t.name=i.name||r.name||"",""===t.name&&"string"==typeof r.uri&&!1===r.uri.startsWith("data:image/")&&(t.name=r.uri);const a=(s.samplers||{})[i.sampler]||{};return t.magFilter=Tf[a.magFilter]||F,t.minFilter=Tf[a.minFilter]||O,t.wrapS=zf[a.wrapS]||U,t.wrapT=zf[a.wrapT]||U,t.generateMipmaps=!t.isCompressedTexture&&t.minFilter!==L&&t.minFilter!==F,n.associations.set(t,{textures:e}),t}).catch(function(){return null});return this.textureCache[o]=l,l}loadImageSource(e,t){const a=this,n=this.json,s=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then(e=>e.clone());const i=n.images[e],r=self.URL||self.webkitURL;let o=i.uri||"",l=!1;if(void 0!==i.bufferView)o=a.getDependency("bufferView",i.bufferView).then(function(e){l=!0;const t=new Blob([e],{type:i.mimeType});return o=r.createObjectURL(t),o});else if(void 0===i.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const c=Promise.resolve(o).then(function(e){return new Promise(function(a,n){let i=a;!0===t.isImageBitmapLoader&&(i=function(e){const t=new me(e);t.needsUpdate=!0,a(t)}),t.load(g.resolveURL(e,s.path),i,void 0,n)})}).then(function(e){var t;return!0===l&&r.revokeObjectURL(o),Vf(e,i),e.userData.mimeType=i.mimeType||((t=i.uri).search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/)?"image/jpeg":t.search(/\.webp($|\?)/i)>0||0===t.search(/^data\:image\/webp/)?"image/webp":t.search(/\.ktx2($|\?)/i)>0||0===t.search(/^data\:image\/ktx2/)?"image/ktx2":"image/png"),e}).catch(function(e){throw console.error("THREE.GLTFLoader: Couldn't load texture",o),e});return this.sourceCache[e]=c,c}assignTexture(e,t,a,n){const s=this;return this.getDependency("texture",a.index).then(function(i){if(!i)return null;if(void 0!==a.texCoord&&a.texCoord>0&&((i=i.clone()).channel=a.texCoord),s.extensions[Jh.KHR_TEXTURE_TRANSFORM]){const e=void 0!==a.extensions?a.extensions[Jh.KHR_TEXTURE_TRANSFORM]:void 0;if(e){const t=s.associations.get(i);i=s.extensions[Jh.KHR_TEXTURE_TRANSFORM].extendTexture(i,e),s.associations.set(i,t)}}return void 0!==n&&(i.colorSpace=n),e[t]=i,i})}assignFinalMaterial(e){const t=e.geometry;let a=e.material;const n=void 0===t.attributes.tangent,s=void 0!==t.attributes.color,i=void 0===t.attributes.normal;if(e.isPoints){const e="PointsMaterial:"+a.uuid;let t=this.cache.get(e);t||(t=new B,H.prototype.copy.call(t,a),t.color.copy(a.color),t.map=a.map,t.sizeAttenuation=!1,this.cache.add(e,t)),a=t}else if(e.isLine){const e="LineBasicMaterial:"+a.uuid;let t=this.cache.get(e);t||(t=new q,H.prototype.copy.call(t,a),t.color.copy(a.color),t.map=a.map,this.cache.add(e,t)),a=t}if(n||s||i){let e="ClonedMaterial:"+a.uuid+":";n&&(e+="derivative-tangents:"),s&&(e+="vertex-colors:"),i&&(e+="flat-shading:");let t=this.cache.get(e);t||(t=a.clone(),s&&(t.vertexColors=!0),i&&(t.flatShading=!0),n&&(t.normalScale&&(t.normalScale.y*=-1),t.clearcoatNormalScale&&(t.clearcoatNormalScale.y*=-1)),this.cache.add(e,t),this.associations.set(t,this.associations.get(a))),a=t}e.material=a}getMaterialType(){return G}loadMaterial(e){const t=this,a=this.json,n=this.extensions,s=a.materials[e];let i;const r={},o=[];if((s.extensions||{})[Jh.KHR_MATERIALS_UNLIT]){const e=n[Jh.KHR_MATERIALS_UNLIT];i=e.getMaterialType(),o.push(e.extendParams(r,s,t))}else{const a=s.pbrMetallicRoughness||{};if(r.color=new c(1,1,1),r.opacity=1,Array.isArray(a.baseColorFactor)){const e=a.baseColorFactor;r.color.setRGB(e[0],e[1],e[2],y),r.opacity=e[3]}void 0!==a.baseColorTexture&&o.push(t.assignTexture(r,"map",a.baseColorTexture,w)),r.metalness=void 0!==a.metallicFactor?a.metallicFactor:1,r.roughness=void 0!==a.roughnessFactor?a.roughnessFactor:1,void 0!==a.metallicRoughnessTexture&&(o.push(t.assignTexture(r,"metalnessMap",a.metallicRoughnessTexture)),o.push(t.assignTexture(r,"roughnessMap",a.metallicRoughnessTexture))),i=this._invokeOne(function(t){return t.getMaterialType&&t.getMaterialType(e)}),o.push(Promise.all(this._invokeAll(function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,r)})))}!0===s.doubleSided&&(r.side=K);const l=s.alphaMode||Df;if(l===Lf?(r.transparent=!0,r.depthWrite=!1):(r.transparent=!1,l===Ff&&(r.alphaTest=void 0!==s.alphaCutoff?s.alphaCutoff:.5)),void 0!==s.normalTexture&&i!==Z&&(o.push(t.assignTexture(r,"normalMap",s.normalTexture)),r.normalScale=new b(1,1),void 0!==s.normalTexture.scale)){const e=s.normalTexture.scale;r.normalScale.set(e,e)}if(void 0!==s.occlusionTexture&&i!==Z&&(o.push(t.assignTexture(r,"aoMap",s.occlusionTexture)),void 0!==s.occlusionTexture.strength&&(r.aoMapIntensity=s.occlusionTexture.strength)),void 0!==s.emissiveFactor&&i!==Z){const e=s.emissiveFactor;r.emissive=(new c).setRGB(e[0],e[1],e[2],y)}return void 0!==s.emissiveTexture&&i!==Z&&o.push(t.assignTexture(r,"emissiveMap",s.emissiveTexture,w)),Promise.all(o).then(function(){const a=new i(r);return s.name&&(a.name=s.name),Vf(a,s),t.associations.set(a,{materials:e}),s.extensions&&$f(n,a,s),a})}createUniqueName(e){const t=Q.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,a=this.extensions,n=this.primitiveCache;function s(e){return a[Jh.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then(function(a){return Qf(a,e,t)})}const i=[];for(let r=0,o=e.length;r<o;r++){const a=e[r],o=Hf(a),l=n[o];if(l)i.push(l.promise);else{let e;e=a.extensions&&a.extensions[Jh.KHR_DRACO_MESH_COMPRESSION]?s(a):Qf(new W,a,t),n[o]={primitive:a,promise:e},i.push(e)}}return Promise.all(i)}loadMesh(e){const t=this,a=this.json,n=this.extensions,s=a.meshes[e],i=s.primitives,r=[];for(let o=0,l=i.length;o<l;o++){const e=void 0===i[o].material?Uf(this.cache):this.getDependency("material",i[o].material);r.push(e)}return r.push(t.loadGeometries(i)),Promise.all(r).then(function(a){const r=a.slice(0,a.length-1),o=a[a.length-1],l=[];for(let d=0,u=o.length;d<u;d++){const a=o[d],c=i[d];let u;const p=r[d];if(c.mode===Af.TRIANGLES||c.mode===Af.TRIANGLE_STRIP||c.mode===Af.TRIANGLE_FAN||void 0===c.mode)u=!0===s.isSkinnedMesh?new Y(a,p):new X(a,p),!0===u.isSkinnedMesh&&u.normalizeSkinWeights(),c.mode===Af.TRIANGLE_STRIP?u.geometry=Wh(u.geometry,h):c.mode===Af.TRIANGLE_FAN&&(u.geometry=Wh(u.geometry,m));else if(c.mode===Af.LINES)u=new J(a,p);else if(c.mode===Af.LINE_STRIP)u=new ee(a,p);else if(c.mode===Af.LINE_LOOP)u=new te(a,p);else{if(c.mode!==Af.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+c.mode);u=new ae(a,p)}Object.keys(u.geometry.morphAttributes).length>0&&Bf(u,s),u.name=t.createUniqueName(s.name||"mesh_"+e),Vf(u,s),c.extensions&&$f(n,u,c),t.assignFinalMaterial(u),l.push(u)}for(let n=0,s=l.length;n<s;n++)t.associations.set(l[n],{meshes:e,primitives:n});if(1===l.length)return s.extensions&&$f(n,l[0],s),l[0];const c=new ne;s.extensions&&$f(n,c,s),t.associations.set(c,{meshes:e});for(let e=0,t=l.length;e<t;e++)c.add(l[e]);return c})}loadCamera(e){let t;const a=this.json.cameras[e],n=a[a.type];if(n)return"perspective"===a.type?t=new se(ie.radToDeg(n.yfov),n.aspectRatio||1,n.znear||1,n.zfar||2e6):"orthographic"===a.type&&(t=new re(-n.xmag,n.xmag,n.ymag,-n.ymag,n.znear,n.zfar)),a.name&&(t.name=this.createUniqueName(a.name)),Vf(t,a),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(e){const t=this.json.skins[e],a=[];for(let n=0,s=t.joints.length;n<s;n++)a.push(this._loadNodeShallow(t.joints[n]));return void 0!==t.inverseBindMatrices?a.push(this.getDependency("accessor",t.inverseBindMatrices)):a.push(null),Promise.all(a).then(function(e){const a=e.pop(),n=e,s=[],i=[];for(let r=0,o=n.length;r<o;r++){const e=n[r];if(e){s.push(e);const t=new E;null!==a&&t.fromArray(a.array,16*r),i.push(t)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[r])}return new oe(s,i)})}loadAnimation(e){const t=this.json,a=this,n=t.animations[e],s=n.name?n.name:"animation_"+e,i=[],r=[],o=[],l=[],c=[];for(let d=0,u=n.channels.length;d<u;d++){const e=n.channels[d],t=n.samplers[e.sampler],a=e.target,s=a.node,u=void 0!==n.parameters?n.parameters[t.input]:t.input,p=void 0!==n.parameters?n.parameters[t.output]:t.output;void 0!==a.node&&(i.push(this.getDependency("node",s)),r.push(this.getDependency("accessor",u)),o.push(this.getDependency("accessor",p)),l.push(t),c.push(a))}return Promise.all([Promise.all(i),Promise.all(r),Promise.all(o),Promise.all(l),Promise.all(c)]).then(function(e){const t=e[0],n=e[1],i=e[2],r=e[3],o=e[4],l=[];for(let s=0,c=t.length;s<c;s++){const e=t[s],c=n[s],d=i[s],u=r[s],p=o[s];if(void 0===e)continue;e.updateMatrix&&e.updateMatrix();const m=a._createAnimationTracks(e,c,d,u,p);if(m)for(let t=0;t<m.length;t++)l.push(m[t])}return new le(s,void 0,l)})}createNodeMesh(e){const t=this.json,a=this,n=t.nodes[e];return void 0===n.mesh?null:a.getDependency("mesh",n.mesh).then(function(e){const t=a._getNodeRef(a.meshCache,n.mesh,e);return void 0!==n.weights&&t.traverse(function(e){if(e.isMesh)for(let t=0,a=n.weights.length;t<a;t++)e.morphTargetInfluences[t]=n.weights[t]}),t})}loadNode(e){const t=this,a=this.json.nodes[e],n=t._loadNodeShallow(e),s=[],i=a.children||[];for(let o=0,l=i.length;o<l;o++)s.push(t.getDependency("node",i[o]));const r=void 0===a.skin?Promise.resolve(null):t.getDependency("skin",a.skin);return Promise.all([n,Promise.all(s),r]).then(function(e){const t=e[0],a=e[1],n=e[2];null!==n&&t.traverse(function(e){e.isSkinnedMesh&&e.bind(n,Kf)});for(let s=0,i=a.length;s<i;s++)t.add(a[s]);return t})}_loadNodeShallow(e){const t=this.json,a=this.extensions,n=this;if(void 0!==this.nodeCache[e])return this.nodeCache[e];const s=t.nodes[e],i=s.name?n.createUniqueName(s.name):"",r=[],o=n._invokeOne(function(t){return t.createNodeMesh&&t.createNodeMesh(e)});return o&&r.push(o),void 0!==s.camera&&r.push(n.getDependency("camera",s.camera).then(function(e){return n._getNodeRef(n.cameraCache,s.camera,e)})),n._invokeAll(function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)}).forEach(function(e){r.push(e)}),this.nodeCache[e]=Promise.all(r).then(function(t){let r;if(r=!0===s.isBone?new ce:t.length>1?new ne:1===t.length?t[0]:new _,r!==t[0])for(let e=0,a=t.length;e<a;e++)r.add(t[e]);if(s.name&&(r.userData.name=s.name,r.name=i),Vf(r,s),s.extensions&&$f(a,r,s),void 0!==s.matrix){const e=new E;e.fromArray(s.matrix),r.applyMatrix4(e)}else void 0!==s.translation&&r.position.fromArray(s.translation),void 0!==s.rotation&&r.quaternion.fromArray(s.rotation),void 0!==s.scale&&r.scale.fromArray(s.scale);if(n.associations.has(r)){if(void 0!==s.mesh&&n.meshCache.refs[s.mesh]>1){const e=n.associations.get(r);n.associations.set(r,{...e})}}else n.associations.set(r,{});return n.associations.get(r).nodes=e,r}),this.nodeCache[e]}loadScene(e){const t=this.extensions,a=this.json.scenes[e],n=this,s=new ne;a.name&&(s.name=n.createUniqueName(a.name)),Vf(s,a),a.extensions&&$f(t,s,a);const i=a.nodes||[],r=[];for(let o=0,l=i.length;o<l;o++)r.push(n.getDependency("node",i[o]));return Promise.all(r).then(function(e){for(let t=0,a=e.length;t<a;t++)s.add(e[t]);return n.associations=(e=>{const t=new Map;for(const[a,s]of n.associations)(a instanceof H||a instanceof me)&&t.set(a,s);return e.traverse(e=>{const a=n.associations.get(e);null!=a&&t.set(e,a)}),t})(s),s})}_createAnimationTracks(e,t,a,n,s){const i=[],r=e.name?e.name:e.uuid,o=[];let l;switch(If[s.path]===If.weights?e.traverse(function(e){e.morphTargetInfluences&&o.push(e.name?e.name:e.uuid)}):o.push(r),If[s.path]){case If.weights:l=fe;break;case If.rotation:l=ge;break;case If.translation:case If.scale:l=he;break;default:if(1===a.itemSize)l=fe;else l=he}const c=void 0!==n.interpolation?Pf[n.interpolation]:ue,d=this._getArrayFromAccessor(a);for(let u=0,p=o.length;u<p;u++){const e=new l(o[u]+"."+If[s.path],t.array,d,c);"CUBICSPLINE"===n.interpolation&&this._createCubicSplineTrackInterpolant(e),i.push(e)}return i}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const e=Gf(t.constructor),a=new Float32Array(t.length);for(let n=0,s=t.length;n<s;n++)a[n]=t[n]*e;t=a}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(e){return new(this instanceof ge?Rf:Cf)(this.times,this.values,this.getValueSize()/3,e)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function Qf(e,t,a){const n=t.attributes,s=[];function i(t,n){return a.getDependency("accessor",t).then(function(t){e.setAttribute(n,t)})}for(const r in n){const t=Of[r]||r.toLowerCase();t in e.attributes||s.push(i(n[r],t))}if(void 0!==t.indices&&!e.index){const n=a.getDependency("accessor",t.indices).then(function(t){e.setIndex(t)});s.push(n)}return xe.workingColorSpace!==y&&"COLOR_0"in n&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${xe.workingColorSpace}" not supported.`),Vf(e,t),function(e,t,a){const n=t.attributes,s=new ye;if(void 0===n.POSITION)return;{const e=a.json.accessors[n.POSITION],t=e.min,i=e.max;if(void 0===t||void 0===i)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(s.set(new C(t[0],t[1],t[2]),new C(i[0],i[1],i[2])),e.normalized){const t=Gf(_f[e.componentType]);s.min.multiplyScalar(t),s.max.multiplyScalar(t)}}const i=t.targets;if(void 0!==i){const e=new C,t=new C;for(let n=0,s=i.length;n<s;n++){const s=i[n];if(void 0!==s.POSITION){const n=a.json.accessors[s.POSITION],i=n.min,r=n.max;if(void 0!==i&&void 0!==r){if(t.setX(Math.max(Math.abs(i[0]),Math.abs(r[0]))),t.setY(Math.max(Math.abs(i[1]),Math.abs(r[1]))),t.setZ(Math.max(Math.abs(i[2]),Math.abs(r[2]))),n.normalized){const e=Gf(_f[n.componentType]);t.multiplyScalar(e)}e.max(t)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}s.expandByVector(e)}e.boundingBox=s;const r=new we;s.getCenter(r.center),r.radius=s.min.distanceTo(s.max)/2,e.boundingSphere=r}(e,t,a),Promise.all(s).then(function(){return void 0!==t.targets?function(e,t,a){let n=!1,s=!1,i=!1;for(let c=0,d=t.length;c<d;c++){const e=t[c];if(void 0!==e.POSITION&&(n=!0),void 0!==e.NORMAL&&(s=!0),void 0!==e.COLOR_0&&(i=!0),n&&s&&i)break}if(!n&&!s&&!i)return Promise.resolve(e);const r=[],o=[],l=[];for(let c=0,d=t.length;c<d;c++){const d=t[c];if(n){const t=void 0!==d.POSITION?a.getDependency("accessor",d.POSITION):e.attributes.position;r.push(t)}if(s){const t=void 0!==d.NORMAL?a.getDependency("accessor",d.NORMAL):e.attributes.normal;o.push(t)}if(i){const t=void 0!==d.COLOR_0?a.getDependency("accessor",d.COLOR_0):e.attributes.color;l.push(t)}}return Promise.all([Promise.all(r),Promise.all(o),Promise.all(l)]).then(function(t){const a=t[0],r=t[1],o=t[2];return n&&(e.morphAttributes.position=a),s&&(e.morphAttributes.normal=r),i&&(e.morphAttributes.color=o),e.morphTargetsRelative=!0,e})}(e,t.targets,a):e})}function Wf({mindFile:a,contentConfig:n,onClose:i}){const r=e.useRef(null),o=e.useRef(null);return e.useEffect(()=>{if(!r.current)return;let e;console.log("AR Viewer starting with:",{mindFile:a,contentConfig:n});return(async()=>{try{if(!window.MindARThree)return void console.error("MindARThree is not available");const t=new window.MindARThree.MindARThree({container:r.current,imageTargetSrc:a});o.current=t;const{renderer:i,scene:l,camera:c}=t,d=new je(16777215,12303291,1);l.add(d);const u=t.addAnchor(0);if(n.sceneObjects&&n.sceneObjects.length>0)for(const a of n.sceneObjects){const{content:t}=a;if("model"===t.type){(new Yh).load(t.url,t=>{const n=t.scene;if(n.position.copy(new C(a.position.x,a.position.y,a.position.z)),n.rotation.setFromVector3(new C(a.rotation.x,a.rotation.y,a.rotation.z)),n.scale.copy(new C(a.scale.x,a.scale.y,a.scale.z)),u.group.add(n),t.animations.length>0){e=new ke(n);e.clipAction(t.animations[0]).play()}})}else if("image"===t.type){const e=(new s).load(t.url),n=new Ne(1,1),i=new Z({map:e}),r=new X(n,i);r.position.copy(new C(a.position.x,a.position.y,a.position.z)),r.rotation.setFromVector3(new C(a.rotation.x,a.rotation.y,a.rotation.z)),r.scale.copy(new C(a.scale.x,a.scale.y,a.scale.z)),u.group.add(r)}}await t.start();const p=new Ee;i.setAnimationLoop(()=>{e&&e.update(p.getDelta()),i.render(l,c)})}catch(t){console.error("Error starting AR viewer:",t)}})().catch(console.error),()=>{o.current&&o.current.stop()}},[a,n]),t.jsx("div",{ref:r,className:"fixed inset-0 bg-black",children:t.jsx("button",{onClick:i,className:"fixed bottom-5 left-1/2 -translate-x-1/2 px-6 py-3 bg-white rounded-lg shadow-lg cursor-pointer hover:bg-gray-100 transition-colors z-10",children:"Close AR View"})})}function Yf({...e}){return t.jsx(Ge,{"data-slot":"dialog",...e})}function Xf({...e}){return t.jsx(Je,{"data-slot":"dialog-trigger",...e})}function Jf({...e}){return t.jsx(Ye,{"data-slot":"dialog-portal",...e})}function eg({className:e,...a}){return t.jsx(Xe,{"data-slot":"dialog-overlay",className:Lc("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...a})}function tg({className:e,children:a,showCloseButton:n=!0,...s}){return t.jsxs(Jf,{"data-slot":"dialog-portal",children:[t.jsx(eg,{}),t.jsxs(Ke,{"data-slot":"dialog-content",className:Lc("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...s,children:[a,n&&t.jsxs(Ze,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[t.jsx(Zd,{}),t.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function ag({className:e,...a}){return t.jsx("div",{"data-slot":"dialog-header",className:Lc("flex flex-col gap-2 text-center sm:text-left",e),...a})}function ng({className:e,...a}){return t.jsx(Qe,{"data-slot":"dialog-title",className:Lc("text-lg leading-none font-semibold",e),...a})}function sg({className:e,...a}){return t.jsx(We,{"data-slot":"dialog-description",className:Lc("text-muted-foreground text-sm",e),...a})}function ig(){const a=Xa(),n=Qa(),{toast:s}=Xp(),i=e.useRef(null),[r,o]=e.useState(),[l,c]=e.useState(null),[d,u]=e.useState(!1),[p,m]=e.useState("translate"),[h,f]=e.useState(),[g,x]=e.useState(),[v,b]=e.useState({position:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0},scale:{x:.3,y:.3,z:.3},sceneObjects:[]}),y=Sp({resolver:Pp(Sl),defaultValues:{title:"",description:"",markerImage:"",markerDimensions:null,contentConfig:{position:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0},scale:{x:.3,y:.3,z:.3},sceneObjects:[]}}});e.useEffect(()=>{r&&y.setValue("markerImage",r),l&&y.setValue("markerDimensions",l)},[r,l,y]),e.useEffect(()=>{y.setValue("contentConfig",{position:v.position,rotation:v.rotation,scale:v.scale,sceneObjects:v.sceneObjects})},[v,y]);const w=ia({mutationFn:async e=>{const t=new FormData;if(t.append("title",e.title),t.append("description",e.description),t.append("markerImage",e.markerImage),e.markerDimensions&&t.append("markerDimensions",JSON.stringify(e.markerDimensions)),t.append("contentConfig",JSON.stringify(e.contentConfig)),!i.current)throw new Error("Mind file is required but not found");t.append("mindFile",i.current);const a=await fetch(qn("/api/experiences"),{method:"POST",body:t,credentials:"include"});if(!a.ok){const e=await a.json();throw new Error(e.message||"Failed to create experience")}return a.json()},onSuccess:e=>{console.log("Create experience response:",e),s({title:"Experience created successfully"}),x(e.experienceUrl);const t=e.data?.experienceUrl||e.experienceUrl,a=e.data?.experience?.title||e.title;console.log("Extracted data:",{experienceUrl:t,title:a}),j(t,a)},onError:e=>{s({title:"Error creating experience",description:e instanceof Error?e.message:"Please try again",variant:"destructive"})}}),j=(e,t)=>{console.log("Redirecting to AR Success with:",{experienceUrl:e,projectNumber:t});const n=e?`${qn("")}${e}`:"";console.log("Full experience URL:",n);const s=new URLSearchParams({experienceUrl:n,projectNumber:t||"generated"});a(`/ar-success?${s.toString()}`)},k=async e=>{i.current?v.sceneObjects?.length?e.markerImage?w.mutate(e):s({title:"Please select a marker image",variant:"destructive"}):s({title:"Please add at least one object to the scene",variant:"destructive"}):s({title:"Please upload a .mind file",variant:"destructive"})};return e.useEffect(()=>{if(n.state?.mindFileData){const{mindFileData:e}=n.state;fetch(e).then(e=>e.blob()).then(e=>{const t=new File([e],"compiled-targets.mind",{type:"application/octet-stream"});f(t.name),i.current=t}).catch(e=>{console.error("Error processing mind file data:",e)})}},[n.state]),e.useEffect(()=>{if(n.state?.uploadedImage){const{uploadedImage:e}=n.state;o(e)}},[n.state]),t.jsxs("div",{className:"relative w-full h-screen bg-slate-800 overflow-hidden",children:[t.jsx(em,{...y,children:t.jsx("form",{onSubmit:e=>{e.preventDefault(),e.stopPropagation()},className:"w-full h-full flex flex-col",children:t.jsx(Qh,{markerImage:r,config:v,onChange:b,onMindFileUpload:async e=>{f(e.name),i.current=e},onMarkerImageUpload:e=>{"string"==typeof e?(o(e),y.setValue("markerImage",e)):(o(e.dataUrl),c(e.dimensions),y.setValue("markerImage",e.dataUrl),y.setValue("markerDimensions",e.dimensions),console.log("[DEBUG] Marker dimensions captured:",e.dimensions))},transformMode:p,setTransformMode:m,uploadedMindFile:h,form:y})})}),t.jsx("div",{className:"fixed bottom-6 right-6 z-50",children:t.jsx(eu,{type:"button",onClick:e=>{e.preventDefault(),e.stopPropagation(),y.handleSubmit(k)(),a("/")},disabled:w.isPending,className:"h-14 px-8 text-lg font-semibold bg-blue-600 hover:bg-blue-700 shadow-2xl border-2 border-blue-500 transition-all duration-200 hover:scale-105",children:w.isPending?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-3"}),"Creating..."]}):"Create Experience"})}),t.jsx(Yf,{open:!!g,onOpenChange:()=>x(void 0),children:t.jsxs(tg,{className:"bg-slate-800 border-slate-700",children:[t.jsxs(ag,{children:[t.jsx(ng,{className:"text-white",children:"Experience Created Successfully!"}),t.jsx(sg,{className:"text-slate-400",children:"Your AR experience is now ready. Use the link below to access it:"})]}),t.jsxs("div",{className:"flex flex-col gap-4",children:[t.jsx("div",{className:"p-4 bg-slate-700 rounded-lg break-all",children:t.jsx("code",{className:"text-slate-300",children:window.location.origin+g})}),t.jsxs("div",{className:"flex justify-end gap-2",children:[t.jsx(eu,{variant:"outline",className:"border-slate-600 text-slate-300 hover:bg-slate-700",onClick:()=>{navigator.clipboard.writeText(window.location.origin+g),s({title:"Link copied to clipboard"})},children:"Copy Link"}),t.jsx(eu,{className:"bg-blue-600 hover:bg-blue-700 text-white",onClick:()=>window.open(window.location.origin+g,"_blank"),children:"Open Experience"})]})]})]})}),d&&i.current&&t.jsx(Wf,{mindFile:URL.createObjectURL(i.current),contentConfig:v,onClose:()=>u(!1)})]})}function rg(){const{link:a}=Ja(),[n,s]=e.useState(!1),{data:i,isLoading:r}=sa({queryKey:[`/api/share/${a}`]});return r?t.jsx("div",{className:"container mx-auto px-4 py-8",children:t.jsx(Uc,{className:"animate-pulse",children:t.jsx(Hc,{className:"h-96"})})}):i?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"container mx-auto px-4 py-8",children:t.jsx(Uc,{children:t.jsxs(Hc,{className:"p-6",children:[t.jsx("h1",{className:"text-3xl font-bold mb-4",children:i.title}),t.jsx("p",{className:"text-muted-foreground mb-6",children:i.description}),t.jsxs("div",{className:"mb-6",children:[t.jsx("img",{src:i.markerImage,alt:"AR Marker",className:"max-w-sm mx-auto"}),t.jsx("p",{className:"text-sm text-center mt-2 text-muted-foreground",children:"Point your camera at this image to see the AR experience"})]}),t.jsxs(eu,{className:"w-full",onClick:()=>s(!0),children:[t.jsx(ad,{className:"mr-2 h-4 w-4"}),"Launch Viewer"]})]})})}),n&&t.jsx(Wf,{markerImage:i.markerImage,contentConfig:i.contentConfig,onClose:()=>s(!1)})]}):t.jsx("div",{className:"container mx-auto px-4 py-8",children:t.jsx(Uc,{children:t.jsxs(Hc,{className:"p-6 text-center",children:[t.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Experience not found"}),t.jsx("p",{className:"text-muted-foreground",children:"The experience you're looking for doesn't exist or has been removed."})]})})})}const og=({src:a,children:n})=>{const[s,i]=e.useState(!1),[r,o]=e.useState(null);return e.useEffect(()=>{console.log("ScriptLoader: Loading script:",a),console.log("Global objects available:",{MINDAR:!!window.MINDAR,MindARThree:!!window.MindARThree,THREE:!!window.THREE});const e=document.querySelector(`script[src="${a}"]`);if(!e){console.log("ScriptLoader: Creating new script element");const e=document.createElement("script");return e.src=a,e.async=!0,e.addEventListener("load",()=>{console.log("ScriptLoader: New script loaded, checking for MINDAR..."),setTimeout(()=>{console.log("ScriptLoader: Post-load check:",{MINDAR:!!window.MINDAR,MindARThree:!!window.MindARThree,THREE:!!window.THREE}),window.MINDAR?(console.log("ScriptLoader: MINDAR found, marking as loaded"),i(!0)):(console.error("ScriptLoader: MINDAR not found after script load"),o(new Error("MINDAR global object not found after script load")))},100)}),e.addEventListener("error",()=>{console.error("ScriptLoader: Error loading new script"),o(new Error(`Error loading script: ${a}`))}),document.body.appendChild(e),()=>{console.log("ScriptLoader: Cleaning up script"),document.body.removeChild(e)}}window.MINDAR?(console.log("ScriptLoader: Script already loaded, MINDAR available"),i(!0)):(console.log("ScriptLoader: Script exists but MINDAR not ready, waiting..."),e.addEventListener("load",()=>{console.log("ScriptLoader: Existing script loaded"),i(!0)}),e.addEventListener("error",()=>{console.error("ScriptLoader: Error loading existing script"),o(new Error(`Error loading script: ${a}`))}))},[a]),r?t.jsxs("div",{className:"error-container",children:[t.jsx("h3",{children:"Script Loading Error"}),t.jsx("p",{children:r.message}),t.jsxs("p",{children:["Please ensure that the mindar-image.js file is properly placed in the public folder and is accessible at ",a]})]}):s?n:t.jsxs("div",{className:"loading-container",children:[t.jsx("h3",{children:"Loading MindAR Library..."}),t.jsx("p",{children:"Please wait while we load the required resources"})]})};var lg,cg,dg,ug,pg,mg={exports:{}};function hg(){if(cg)return lg;cg=1;return lg="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}function fg(){if(ug)return dg;ug=1;var e=hg();function t(){}function a(){}return a.resetWarningCache=t,dg=function(){function n(t,a,n,s,i,r){if(r!==e){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function s(){return n}n.isRequired=n;var i={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:s,element:n,elementType:n,instanceOf:s,node:n,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:a,resetWarningCache:t};return i.PropTypes=i,i}}function gg(){return pg||(pg=1,mg.exports=fg()()),mg.exports}const xg=tt(gg()),vg=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function bg(e,t,a){const n=function(e){const{name:t}=e;if(t&&-1!==t.lastIndexOf(".")&&!e.type){const a=t.split(".").pop().toLowerCase(),n=vg.get(a);n&&Object.defineProperty(e,"type",{value:n,writable:!1,configurable:!1,enumerable:!0})}return e}(e),{webkitRelativePath:s}=e,i="string"==typeof t?t:"string"==typeof s&&s.length>0?s:`./${e.name}`;return"string"!=typeof n.path&&yg(n,"path",i),yg(n,"relativePath",i),n}function yg(e,t,a){Object.defineProperty(e,t,{value:a,writable:!1,configurable:!1,enumerable:!0})}const wg=[".DS_Store","Thumbs.db"];function jg(e){return"object"==typeof e&&null!==e}function kg(e){return e.filter(e=>-1===wg.indexOf(e.name))}function Ng(e){if(null===e)return[];const t=[];for(let a=0;a<e.length;a++){const n=e[a];t.push(n)}return t}function Eg(e){if("function"!=typeof e.webkitGetAsEntry)return Sg(e);const t=e.webkitGetAsEntry();return t&&t.isDirectory?Ag(t):Sg(e,t)}function Cg(e){return e.reduce((e,t)=>[...e,...Array.isArray(t)?Cg(t):[t]],[])}function Sg(e,t){return et(this,void 0,void 0,function*(){var a;if(globalThis.isSecureContext&&"function"==typeof e.getAsFileSystemHandle){const t=yield e.getAsFileSystemHandle();if(null===t)throw new Error(`${e} is not a File`);if(void 0!==t){const e=yield t.getFile();return e.handle=t,bg(e)}}const n=e.getAsFile();if(!n)throw new Error(`${e} is not a File`);return bg(n,null!==(a=null==t?void 0:t.fullPath)&&void 0!==a?a:void 0)})}function Rg(e){return et(this,void 0,void 0,function*(){return e.isDirectory?Ag(e):function(e){return et(this,void 0,void 0,function*(){return new Promise((t,a)=>{e.file(a=>{const n=bg(a,e.fullPath);t(n)},e=>{a(e)})})})}(e)})}function Ag(e){const t=e.createReader();return new Promise((e,a)=>{const n=[];!function s(){t.readEntries(t=>et(this,void 0,void 0,function*(){if(t.length){const e=Promise.all(t.map(Rg));n.push(e),s()}else try{const t=yield Promise.all(n);e(t)}catch(i){a(i)}}),e=>{a(e)})}()})}var _g,Tg={};const zg=tt((_g||(_g=1,Tg.__esModule=!0,Tg.default=function(e,t){if(e&&t){var a=Array.isArray(t)?t:t.split(",");if(0===a.length)return!0;var n=e.name||"",s=(e.type||"").toLowerCase(),i=s.replace(/\/.*$/,"");return a.some(function(e){var t=e.trim().toLowerCase();return"."===t.charAt(0)?n.toLowerCase().endsWith(t):t.endsWith("/*")?i===t.replace(/\/.*$/,""):s===t})}return!0}),Tg));function Mg(e){return function(e){if(Array.isArray(e))return Lg(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Fg(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Og(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Ig(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Og(Object(a),!0).forEach(function(t){Pg(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Og(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function Pg(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Dg(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var n,s,i=[],r=!0,o=!1;try{for(a=a.call(e);!(r=(n=a.next()).done)&&(i.push(n.value),!t||i.length!==t);r=!0);}catch(l){o=!0,s=l}finally{try{r||null==a.return||a.return()}finally{if(o)throw s}}return i}(e,t)||Fg(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fg(e,t){if(e){if("string"==typeof e)return Lg(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Lg(e,t):void 0}}function Lg(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var Ug="function"==typeof zg?zg:zg.default,$g=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split(","),t=e.length>1?"one of ".concat(e.join(", ")):e[0];return{code:"file-invalid-type",message:"File type must be ".concat(t)}},Vg=function(e){return{code:"file-too-large",message:"File is larger than ".concat(e," ").concat(1===e?"byte":"bytes")}},Bg=function(e){return{code:"file-too-small",message:"File is smaller than ".concat(e," ").concat(1===e?"byte":"bytes")}},Hg={code:"too-many-files",message:"Too many files"};function qg(e,t){var a="application/x-moz-file"===e.type||Ug(e,t);return[a,a?null:$g(t)]}function Gg(e,t,a){if(Kg(e.size))if(Kg(t)&&Kg(a)){if(e.size>a)return[!1,Vg(a)];if(e.size<t)return[!1,Bg(t)]}else{if(Kg(t)&&e.size<t)return[!1,Bg(t)];if(Kg(a)&&e.size>a)return[!1,Vg(a)]}return[!0,null]}function Kg(e){return null!=e}function Zg(e){return"function"==typeof e.isPropagationStopped?e.isPropagationStopped():void 0!==e.cancelBubble&&e.cancelBubble}function Qg(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,function(e){return"Files"===e||"application/x-moz-file"===e}):!!e.target&&!!e.target.files}function Wg(e){e.preventDefault()}function Yg(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return function(e){for(var a=arguments.length,n=new Array(a>1?a-1:0),s=1;s<a;s++)n[s-1]=arguments[s];return t.some(function(t){return!Zg(e)&&t&&t.apply(void 0,[e].concat(n)),Zg(e)})}}function Xg(e){return"audio/*"===e||"video/*"===e||"image/*"===e||"text/*"===e||"application/*"===e||/\w+\/[-+.\w]+/g.test(e)}function Jg(e){return/^.*\.[\w]+$/.test(e)}var ex=["children"],tx=["open"],ax=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],nx=["refKey","onChange","onClick"];function sx(e){return function(e){if(Array.isArray(e))return ox(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||rx(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ix(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var n,s,i=[],r=!0,o=!1;try{for(a=a.call(e);!(r=(n=a.next()).done)&&(i.push(n.value),!t||i.length!==t);r=!0);}catch(l){o=!0,s=l}finally{try{r||null==a.return||a.return()}finally{if(o)throw s}}return i}(e,t)||rx(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rx(e,t){if(e){if("string"==typeof e)return ox(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?ox(e,t):void 0}}function ox(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function lx(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function cx(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?lx(Object(a),!0).forEach(function(t){dx(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):lx(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function dx(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function ux(e,t){if(null==e)return{};var a,n,s=function(e,t){if(null==e)return{};var a,n,s={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}var px=e.forwardRef(function(t,n){var s=t.children,i=fx(ux(t,ex)),r=i.open,o=ux(i,tx);return e.useImperativeHandle(n,function(){return{open:r}},[r]),a.createElement(e.Fragment,null,s(cx(cx({},o),{},{open:r})))});px.displayName="Dropzone";var mx={disabled:!1,getFilesFromEvent:function(e){return et(this,void 0,void 0,function*(){return jg(e)&&jg(e.dataTransfer)?function(e,t){return et(this,void 0,void 0,function*(){if(e.items){const a=Ng(e.items).filter(e=>"file"===e.kind);if("drop"!==t)return a;return kg(Cg(yield Promise.all(a.map(Eg))))}return kg(Ng(e.files).map(e=>bg(e)))})}(e.dataTransfer,e.type):function(e){return jg(e)&&jg(e.target)}(e)?function(e){return Ng(e.target.files).map(e=>bg(e))}(e):Array.isArray(e)&&e.every(e=>"getFile"in e&&"function"==typeof e.getFile)?function(e){return et(this,void 0,void 0,function*(){return(yield Promise.all(e.map(e=>e.getFile()))).map(e=>bg(e))})}(e):[]})},maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};px.defaultProps=mx,px.propTypes={children:xg.func,accept:xg.objectOf(xg.arrayOf(xg.string)),multiple:xg.bool,preventDropOnDocument:xg.bool,noClick:xg.bool,noKeyboard:xg.bool,noDrag:xg.bool,noDragEventsBubbling:xg.bool,minSize:xg.number,maxSize:xg.number,maxFiles:xg.number,disabled:xg.bool,getFilesFromEvent:xg.func,onFileDialogCancel:xg.func,onFileDialogOpen:xg.func,useFsAccessApi:xg.bool,autoFocus:xg.bool,onDragEnter:xg.func,onDragLeave:xg.func,onDragOver:xg.func,onDrop:xg.func,onDropAccepted:xg.func,onDropRejected:xg.func,onError:xg.func,validator:xg.func};var hx={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function fx(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=cx(cx({},mx),t),n=a.accept,s=a.disabled,i=a.getFilesFromEvent,r=a.maxSize,o=a.minSize,l=a.multiple,c=a.maxFiles,d=a.onDragEnter,u=a.onDragLeave,p=a.onDragOver,m=a.onDrop,h=a.onDropAccepted,f=a.onDropRejected,g=a.onFileDialogCancel,x=a.onFileDialogOpen,v=a.useFsAccessApi,b=a.autoFocus,y=a.preventDropOnDocument,w=a.noClick,j=a.noKeyboard,k=a.noDrag,N=a.noDragEventsBubbling,E=a.onError,C=a.validator,S=e.useMemo(function(){return function(e){if(Kg(e))return Object.entries(e).reduce(function(e,t){var a=Dg(t,2),n=a[0],s=a[1];return[].concat(Mg(e),[n],Mg(s))},[]).filter(function(e){return Xg(e)||Jg(e)}).join(",")}(n)},[n]),R=e.useMemo(function(){return function(e){return Kg(e)?[{description:"Files",accept:Object.entries(e).filter(function(e){var t=Dg(e,2),a=t[0],n=t[1],s=!0;return Xg(a)||(console.warn('Skipped "'.concat(a,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),s=!1),Array.isArray(n)&&n.every(Jg)||(console.warn('Skipped "'.concat(a,'" because an invalid file extension was provided.')),s=!1),s}).reduce(function(e,t){var a=Dg(t,2),n=a[0],s=a[1];return Ig(Ig({},e),{},Pg({},n,s))},{})}]:e}(n)},[n]),A=e.useMemo(function(){return"function"==typeof x?x:xx},[x]),_=e.useMemo(function(){return"function"==typeof g?g:xx},[g]),T=e.useRef(null),z=e.useRef(null),M=ix(e.useReducer(gx,hx),2),O=M[0],I=M[1],P=O.isFocused,D=O.isFileDialogActive,F=e.useRef("undefined"!=typeof window&&window.isSecureContext&&v&&"showOpenFilePicker"in window),L=function(){!F.current&&D&&setTimeout(function(){z.current&&(z.current.files.length||(I({type:"closeDialog"}),_()))},300)};e.useEffect(function(){return window.addEventListener("focus",L,!1),function(){window.removeEventListener("focus",L,!1)}},[z,D,_,F]);var U=e.useRef([]),$=function(e){T.current&&T.current.contains(e.target)||(e.preventDefault(),U.current=[])};e.useEffect(function(){return y&&(document.addEventListener("dragover",Wg,!1),document.addEventListener("drop",$,!1)),function(){y&&(document.removeEventListener("dragover",Wg),document.removeEventListener("drop",$))}},[T,y]),e.useEffect(function(){return!s&&b&&T.current&&T.current.focus(),function(){}},[T,b,s]);var V=e.useCallback(function(e){E?E(e):console.error(e)},[E]),B=e.useCallback(function(e){e.preventDefault(),e.persist(),ae(e),U.current=[].concat(sx(U.current),[e.target]),Qg(e)&&Promise.resolve(i(e)).then(function(t){if(!Zg(e)||N){var a=t.length,n=a>0&&function(e){var t=e.files,a=e.accept,n=e.minSize,s=e.maxSize,i=e.multiple,r=e.maxFiles,o=e.validator;return!(!i&&t.length>1||i&&r>=1&&t.length>r)&&t.every(function(e){var t=Dg(qg(e,a),1)[0],i=Dg(Gg(e,n,s),1)[0],r=o?o(e):null;return t&&i&&!r})}({files:t,accept:S,minSize:o,maxSize:r,multiple:l,maxFiles:c,validator:C});I({isDragAccept:n,isDragReject:a>0&&!n,isDragActive:!0,type:"setDraggedFiles"}),d&&d(e)}}).catch(function(e){return V(e)})},[i,d,V,N,S,o,r,l,c,C]),H=e.useCallback(function(e){e.preventDefault(),e.persist(),ae(e);var t=Qg(e);if(t&&e.dataTransfer)try{e.dataTransfer.dropEffect="copy"}catch(a){}return t&&p&&p(e),!1},[p,N]),q=e.useCallback(function(e){e.preventDefault(),e.persist(),ae(e);var t=U.current.filter(function(e){return T.current&&T.current.contains(e)}),a=t.indexOf(e.target);-1!==a&&t.splice(a,1),U.current=t,t.length>0||(I({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),Qg(e)&&u&&u(e))},[T,u,N]),G=e.useCallback(function(e,t){var a=[],n=[];e.forEach(function(e){var t=ix(qg(e,S),2),s=t[0],i=t[1],l=ix(Gg(e,o,r),2),c=l[0],d=l[1],u=C?C(e):null;if(s&&c&&!u)a.push(e);else{var p=[i,d];u&&(p=p.concat(u)),n.push({file:e,errors:p.filter(function(e){return e})})}}),(!l&&a.length>1||l&&c>=1&&a.length>c)&&(a.forEach(function(e){n.push({file:e,errors:[Hg]})}),a.splice(0)),I({acceptedFiles:a,fileRejections:n,isDragReject:n.length>0,type:"setFiles"}),m&&m(a,n,t),n.length>0&&f&&f(n,t),a.length>0&&h&&h(a,t)},[I,l,S,o,r,c,m,h,f,C]),K=e.useCallback(function(e){e.preventDefault(),e.persist(),ae(e),U.current=[],Qg(e)&&Promise.resolve(i(e)).then(function(t){Zg(e)&&!N||G(t,e)}).catch(function(e){return V(e)}),I({type:"reset"})},[i,G,V,N]),Z=e.useCallback(function(){if(F.current){I({type:"openDialog"}),A();var e={multiple:l,types:R};window.showOpenFilePicker(e).then(function(e){return i(e)}).then(function(e){G(e,null),I({type:"closeDialog"})}).catch(function(e){var t;(t=e)instanceof DOMException&&("AbortError"===t.name||t.code===t.ABORT_ERR)?(_(e),I({type:"closeDialog"})):!function(e){return e instanceof DOMException&&("SecurityError"===e.name||e.code===e.SECURITY_ERR)}(e)?V(e):(F.current=!1,z.current?(z.current.value=null,z.current.click()):V(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided.")))})}else z.current&&(I({type:"openDialog"}),A(),z.current.value=null,z.current.click())},[I,A,_,v,G,V,R,l]),Q=e.useCallback(function(e){T.current&&T.current.isEqualNode(e.target)&&(" "!==e.key&&"Enter"!==e.key&&32!==e.keyCode&&13!==e.keyCode||(e.preventDefault(),Z()))},[T,Z]),W=e.useCallback(function(){I({type:"focus"})},[]),Y=e.useCallback(function(){I({type:"blur"})},[]),X=e.useCallback(function(){w||(!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator.userAgent;return function(e){return-1!==e.indexOf("MSIE")||-1!==e.indexOf("Trident/")}(e)||function(e){return-1!==e.indexOf("Edge/")}(e)}()?Z():setTimeout(Z,0))},[w,Z]),J=function(e){return s?null:e},ee=function(e){return j?null:J(e)},te=function(e){return k?null:J(e)},ae=function(e){N&&e.stopPropagation()},ne=e.useMemo(function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refKey,a=void 0===t?"ref":t,n=e.role,i=e.onKeyDown,r=e.onFocus,o=e.onBlur,l=e.onClick,c=e.onDragEnter,d=e.onDragOver,u=e.onDragLeave,p=e.onDrop,m=ux(e,ax);return cx(cx(dx({onKeyDown:ee(Yg(i,Q)),onFocus:ee(Yg(r,W)),onBlur:ee(Yg(o,Y)),onClick:J(Yg(l,X)),onDragEnter:te(Yg(c,B)),onDragOver:te(Yg(d,H)),onDragLeave:te(Yg(u,q)),onDrop:te(Yg(p,K)),role:"string"==typeof n&&""!==n?n:"presentation"},a,T),s||j?{}:{tabIndex:0}),m)}},[T,Q,W,Y,X,B,H,q,K,j,k,s]),se=e.useCallback(function(e){e.stopPropagation()},[]),ie=e.useMemo(function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refKey,a=void 0===t?"ref":t,n=e.onChange,s=e.onClick,i=ux(e,nx);return cx(cx({},dx({accept:S,multiple:l,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:J(Yg(n,K)),onClick:J(Yg(s,se)),tabIndex:-1},a,z)),i)}},[z,n,l,K,s]);return cx(cx({},O),{},{isFocused:P&&!s,getRootProps:ne,getInputProps:ie,rootRef:T,inputRef:z,open:J(Z)})}function gx(e,t){switch(t.type){case"focus":return cx(cx({},e),{},{isFocused:!0});case"blur":return cx(cx({},e),{},{isFocused:!1});case"openDialog":return cx(cx({},hx),{},{isFileDialogActive:!0});case"closeDialog":return cx(cx({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":return cx(cx({},e),{},{isDragActive:t.isDragActive,isDragAccept:t.isDragAccept,isDragReject:t.isDragReject});case"setFiles":return cx(cx({},e),{},{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections,isDragReject:t.isDragReject});case"reset":return cx({},hx);default:return e}}function xx(){}const vx=({image:a,points:n,title:s})=>{const i=e.useRef(null);return e.useEffect(()=>{if(a&&n&&i.current)if(a.width&&a.height&&a.data&&a.data.length)try{const e=i.current;e.width=a.width,e.height=a.height;const t=e.getContext("2d"),s=t.getImageData(0,0,e.width,e.height),r=new Uint32Array(s.data.buffer),o=255<<24;for(let n=0;n<a.width;n++)for(let t=0;t<a.height;t++){const s=t*a.width+n;if(s<a.data.length){const i=a.data[s];r[t*e.width+n]=o|i<<16|i<<8|i}}const l=-16711936;for(let a=0;a<n.length;++a){const t=n[a].x,s=n[a].y;if(t>=0&&t<e.width&&s>=0&&s<e.height){const a=t+s*e.width;r[a]=l;for(let n=1;n<=6;n++)t-n>=0&&(r[a-n]=l),t+n<e.width&&(r[a+n]=l),s-n>=0&&(r[a-n*e.width]=l),s+n<e.height&&(r[a+n*e.width]=l)}}t.putImageData(s,0,0)}catch(e){console.error("Error rendering image:",e)}else console.error("Invalid image data:",a)},[a,n]),a&&n?a.width&&a.height&&a.data?t.jsxs("div",{className:"image-display",children:[s&&t.jsx("h4",{children:s}),t.jsx("div",{className:"canvas-container",children:t.jsx("canvas",{ref:i})}),t.jsxs("div",{className:"image-info",children:[t.jsxs("p",{children:["Size: ",a.width," x ",a.height]}),t.jsxs("p",{children:["Feature points: ",n.length]})]})]}):t.jsx("div",{className:"image-error",children:"Invalid image data"}):null},bx=()=>{const[a,n]=e.useState(null),[s,i]=e.useState([]),[r,o]=e.useState(0),[l,c]=e.useState(null),[d,u]=e.useState([]),[p,m]=e.useState(!1),[h,f]=e.useState(null);e.useEffect(()=>{if(window.MINDAR&&window.MINDAR.IMAGE)try{const e=new window.MINDAR.IMAGE.Compiler;n(e),console.log("MindAR compiler initialized successfully")}catch(e){console.error("Error creating compiler instance:",e),f(`Failed to initialize compiler: ${e.message}`)}},[]);const g=e.useCallback(e=>{i(e),u([]),c(null),f(null)},[]),{getRootProps:x,getInputProps:v,isDragActive:b}=fx({onDrop:g,accept:{"image/*":[".png",".jpg",".jpeg"],"application/octet-stream":[".mind"]}}),y=async e=>new Promise((t,a)=>{const n=new Image;n.onload=()=>t(n),n.onerror=t=>a(new Error(`Error loading image: ${e.name}`)),n.src=URL.createObjectURL(e)});return t.jsxs("div",{className:"image-compiler",children:[t.jsxs("div",{className:"instructions",children:[t.jsx("h2",{children:"Usage:"}),t.jsxs("ol",{children:[t.jsx("li",{children:"Drop target images (e.g. .png) into the drop zone. (can drop multiple)"}),t.jsx("li",{children:'Click "Start". It could take a while (especially for large images)'}),t.jsx("li",{children:"When done, some debug images will be shown, and you can visualize the feature points."}),t.jsx("li",{children:'Click "Download" to get a targets.mind file, which is used in the AR webpage'})]})]}),h&&t.jsx("div",{className:"error-message",children:t.jsx("p",{children:h})}),t.jsxs("div",{...x({className:"dropzone "+(b?"active":"")}),children:[t.jsx("input",{...v()}),b?t.jsx("p",{children:"Drop the files here ..."}):t.jsx("p",{children:"Drag 'n' drop some files here, or click to select files"})]}),s.length>0&&t.jsxs("div",{className:"file-list",children:[t.jsx("h3",{children:"Selected Files:"}),t.jsx("ul",{children:s.map((e,a)=>t.jsxs("li",{children:[e.name," (",(e.size/1024).toFixed(2)," KB)",t.jsx("button",{className:"remove-button",onClick:()=>(e=>{const t=[...s];t.splice(e,1),i(t),0===t.length&&(u([]),c(null))})(a),children:"Remove"})]},a))})]}),t.jsxs("div",{className:"actions",children:[t.jsx("button",{className:"start-button",onClick:()=>{if(0===s.length)return void f("Please select files first");if(!a)return void f("MindAR compiler is not initialized yet. Please wait or refresh the page.");const e=s[0].name.split(".").pop().toLowerCase();console.log("Processing file with extension:",e),"mind"===e?(async e=>{if(a){m(!0),f(null);try{const t=await e.arrayBuffer();console.log("Loading .mind file, size:",t.byteLength,"bytes");const n=a.importData(t);console.log("Mind file imported successfully:",n),u(n)}catch(t){console.error("Error loading .mind file:",t),f(`Error loading .mind file: ${t.message}`)}finally{m(!1)}}})(s[0]):(async()=>{if(a&&0!==s.length){m(!0),o(0),f(null);try{const e=[];for(let a=0;a<s.length;a++){const t=await y(s[a]);e.push(t),console.log(`Loaded image ${a+1}/${s.length}: ${s[a].name}, size: ${t.width}x${t.height}`)}console.log("Starting compilation with",e.length,"images");const t=(new Date).getTime(),n=await a.compileImageTargets(e,e=>{console.log("Compilation progress:",e),o(e)});console.log("Compilation completed in:",(new Date).getTime()-t,"ms"),console.log("Compilation results:",n),u(n);const i=await a.exportData();c(i)}catch(e){console.error("Error compiling files:",e),f(`Error compiling files: ${e.message||"Unknown error"}`)}finally{m(!1)}}})()},disabled:0===s.length||p||!a,children:p?"Processing...":"Start"}),t.jsx("button",{className:"download-button",onClick:()=>{if(!l)return;const e=new Blob([l]),t=URL.createObjectURL(e),a=document.createElement("a");a.href=t,a.download="targets.mind",document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(t)},disabled:!l,children:"Download"}),p&&t.jsxs("div",{className:"progress-container",children:[t.jsxs("div",{className:"progress-label",children:["Progress: ",r.toFixed(2),"%"]}),t.jsx("div",{className:"progress-bar",children:t.jsx("div",{className:"progress-fill",style:{width:`${r}%`}})})]})]}),t.jsx("div",{className:"image-container",children:d.map((e,a)=>t.jsxs("div",{className:"target-container",children:[t.jsxs("h3",{children:["Target #",a+1]}),e.trackingImageList&&e.trackingImageList.length>0?e.trackingImageList.map((a,n)=>t.jsx(vx,{image:a,points:e.trackingData&&e.trackingData[n]&&e.trackingData[n].points?e.trackingData[n].points.map(e=>({x:Math.round(e.x),y:Math.round(e.y)})):[],title:`Tracking Image ${n+1}`},`tracking-${n}`)):t.jsx("p",{children:"No tracking images available"}),e.imageList&&e.imageList.length>0?e.imageList.map((a,n)=>{const s=[...e.matchingData&&e.matchingData[n]&&e.matchingData[n].maximaPoints?e.matchingData[n].maximaPoints:[],...e.matchingData&&e.matchingData[n]&&e.matchingData[n].minimaPoints?e.matchingData[n].minimaPoints:[]].map(e=>({x:Math.round(e.x),y:Math.round(e.y)}));return t.jsx(vx,{image:a,points:s,title:`Feature Image ${n+1}`},`feature-${n}`)}):t.jsx("p",{children:"No feature images available"})]},a))})]})},yx=()=>t.jsx(og,{src:"/mindar-image.js",children:t.jsx(bx,{})}),wx=Xd("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function jx({className:e,variant:a,asChild:n=!1,...s}){const i=n?Re:"span";return t.jsx(i,{"data-slot":"badge",className:Lc(wx({variant:a}),e),...s})}function kx(){const a=Xa(),[n,s]=e.useState(""),[i,r]=e.useState("newest"),{data:o,isLoading:l}=sa({queryKey:["experiences"],queryFn:async()=>{const e=await fetch(qn("/api/experiences"),{credentials:"include"});if(!e.ok)throw new Error("Failed to fetch experiences");const t=await e.json();return t.data?.experiences||t.experiences||[]}}),c=o?.filter(e=>e?.title?.toLowerCase().includes(n.toLowerCase())||e?.description?.toLowerCase().includes(n.toLowerCase()))?.sort((e,t)=>{switch(i){case"newest":return(t?.id||0)-(e?.id||0);case"oldest":return(e?.id||0)-(t?.id||0);case"title":return(e?.title||"").localeCompare(t?.title||"");default:return 0}})||[];return l?t.jsx("div",{className:"min-h-screen bg-slate-900 p-6",children:t.jsxs("div",{className:"container mx-auto",children:[t.jsxs("div",{className:"mb-8",children:[t.jsx("div",{className:"h-8 bg-gray-700 rounded w-48 mb-2 animate-pulse"}),t.jsx("div",{className:"h-4 bg-gray-700 rounded w-64 animate-pulse"})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((e,a)=>t.jsxs(Uc,{className:"animate-pulse bg-slate-800 border-slate-700",children:[t.jsx("div",{className:"h-48 bg-gray-700 rounded-t-lg"}),t.jsxs($c,{children:[t.jsx("div",{className:"h-4 bg-gray-700 rounded w-3/4"}),t.jsx("div",{className:"h-3 bg-gray-700 rounded w-1/2"})]})]},a))})]})}):t.jsxs("div",{className:"min-h-screen bg-slate-900 p-6",children:[t.jsxs("div",{className:"container mx-auto",children:[t.jsxs("div",{className:"mb-8",children:[t.jsx("h1",{className:"text-3xl font-bold mb-2 text-white",children:"AR Experiences"}),t.jsx("p",{className:"text-slate-400",children:"Explore all available augmented reality experiences"})]}),t.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-8",children:[t.jsxs("div",{className:"relative flex-1",children:[t.jsx(Od,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 h-4 w-4"}),t.jsx(Dp,{placeholder:"Search experiences...",value:n,onChange:e=>s(e.target.value),className:"pl-10 bg-slate-800 border-slate-700 text-white placeholder-slate-400"})]}),t.jsx("div",{className:"flex gap-2",children:t.jsxs("select",{value:i,onChange:e=>r(e.target.value),className:"px-3 py-2 border border-slate-700 rounded-md bg-slate-800 text-white",children:[t.jsx("option",{value:"newest",children:"Newest First"}),t.jsx("option",{value:"oldest",children:"Oldest First"}),t.jsx("option",{value:"title",children:"Alphabetical"})]})})]})]}),t.jsx("div",{className:"mb-6",children:t.jsxs("p",{className:"text-sm text-slate-400",children:[c.length," experience",1!==c.length?"s":""," found"]})}),0===c.length?t.jsxs("div",{className:"text-center py-12",children:[t.jsx("h2",{className:"text-xl font-semibold mb-2 text-white",children:n?"No experiences found":"No experiences yet"}),t.jsx("p",{className:"text-slate-400 mb-4",children:n?"Try adjusting your search terms":"Create your first AR experience to get started"}),!n&&t.jsx(eu,{onClick:()=>window.location.href="/create",className:"bg-blue-600 hover:bg-blue-700 text-white",children:"Create Experience"})]}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:c.map(e=>{return t.jsxs(Uc,{className:"overflow-hidden bg-slate-800 border-slate-700 hover:shadow-lg transition-shadow",children:[t.jsxs("div",{className:"aspect-video bg-slate-800 relative overflow-hidden",children:[t.jsx("img",{src:(n=e.markerImage,s=e.id,n&&n.startsWith("data:image/")?n:`/api/experiences/markers/${s}.png`),alt:e.title,className:"w-full h-full object-cover bg-slate-700",onError:e=>{e.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMzAwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iI2Y0ZjRmNCIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IiM5OTk5OTkiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj5BUiBFeHBlcmllbmNlPC90ZXh0Pjwvc3ZnPg=="}}),t.jsx("div",{className:"absolute top-2 right-2",children:t.jsx(jx,{variant:"secondary",className:"bg-slate-800 text-white border-0",children:"AR"})}),t.jsx("div",{className:"absolute bottom-2 left-2",children:t.jsxs(jx,{variant:"secondary",className:"bg-slate-800 text-white border-0 text-xs",children:[e.contentConfig?.sceneObjects?.length||0," ","objects"]})})]}),t.jsxs($c,{children:[t.jsx(Vc,{className:"line-clamp-1 text-white",children:e.title}),t.jsx(Bc,{className:"line-clamp-2 text-slate-400",children:e.description})]}),t.jsx(Hc,{children:t.jsxs("div",{className:"flex gap-2",children:[t.jsxs(eu,{size:"sm",className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white",onClick:()=>(e=>{const t=`/experiences/${e.id}.html`;window.open(t,"_blank")})(e),children:[t.jsx(_d,{className:"h-4 w-4 mr-1"}),"Launch AR"]}),t.jsx(eu,{size:"sm",variant:"outline",className:"border-slate-600 text-slate-300 hover:bg-slate-700",onClick:()=>(e=>{console.log("Navigating to edit experience:",e.id),a(`/edit-experience/${e.id}`)})(e),children:t.jsx(Fd,{className:"h-4 w-4"})}),t.jsx(eu,{size:"sm",variant:"outline",className:"border-slate-600 text-slate-300 hover:bg-slate-700",onClick:()=>(e=>{const t=`/experiences/${e.id}.html`,a=new URLSearchParams({experienceUrl:t,projectNumber:e.title});window.location.href=`/ar-success?${a.toString()}`})(e),children:t.jsx(hd,{className:"h-4 w-4"})}),t.jsx(eu,{size:"sm",variant:"outline",className:"border-slate-600 text-slate-300 hover:bg-slate-700",onClick:()=>(async e=>{const t=`/experiences/${e.id}.html`;if(navigator.share)try{await navigator.share({title:e.title,text:e.description,url:t})}catch(a){console.log("Share cancelled")}else await navigator.clipboard.writeText(t),alert("Link copied to clipboard!")})(e),children:t.jsx(Pd,{className:"h-4 w-4"})})]})})]},e.id);var n,s})})]})}function Nx(){const{id:e}=Ja(),{data:a,isLoading:n}=sa({queryKey:["experience",e],queryFn:async()=>{const t=await fetch(`/api/experiences/${e}`);if(!t.ok)throw new Error("Failed to fetch experience");return t.json()},enabled:!!e}),s=(e,t)=>e.startsWith("data:image/")?e:`/api/markers/${t}-marker.png`;return n?t.jsx("div",{className:"container mx-auto p-6",children:t.jsxs("div",{className:"animate-pulse",children:[t.jsx("div",{className:"h-8 bg-gray-200 rounded w-48 mb-6"}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[t.jsx("div",{className:"h-96 bg-gray-200 rounded-lg"}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"h-8 bg-gray-200 rounded w-3/4"}),t.jsx("div",{className:"h-4 bg-gray-200 rounded w-full"}),t.jsx("div",{className:"h-4 bg-gray-200 rounded w-2/3"})]})]})]})}):a?t.jsxs("div",{className:"container mx-auto p-6",children:[t.jsx(Ln,{href:"/experiences",children:t.jsxs(eu,{variant:"ghost",className:"mb-6",children:[t.jsx(Xc,{className:"h-4 w-4 mr-2"}),"Back to Experiences"]})}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[t.jsx("div",{className:"space-y-4",children:t.jsxs(Uc,{children:[t.jsxs($c,{children:[t.jsx(Vc,{children:"Marker Image"}),t.jsx(Bc,{children:"Point your camera at this image to view the AR experience"})]}),t.jsxs(Hc,{children:[t.jsx("div",{className:"aspect-square bg-gray-100 rounded-lg overflow-hidden",children:t.jsx("img",{src:s(a.markerImage,a.id),alt:`${a.title} marker`,className:"w-full h-full object-contain"})}),t.jsxs(eu,{variant:"outline",className:"w-full mt-4",onClick:()=>{if(a){const e=document.createElement("a");e.href=s(a.markerImage,a.id),e.download=`${a.title}-marker.png`,e.click()}},children:[t.jsx(pd,{className:"h-4 w-4 mr-2"}),"Download Marker"]})]})]})}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-start gap-2 mb-2",children:[t.jsx("h1",{className:"text-3xl font-bold",children:a.title}),t.jsx(jx,{variant:"secondary",children:"AR"})]}),t.jsx("p",{className:"text-muted-foreground text-lg",children:a.description})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsxs(eu,{onClick:()=>{if(a){const e=`/experiences/${a.id}.html`;window.open(e,"_blank")}},size:"lg",className:"flex-1",children:[t.jsx(_d,{className:"h-5 w-5 mr-2"}),"Launch AR Experience"]}),t.jsx(eu,{variant:"outline",onClick:async()=>{if(a){const t=`${window.location.origin}/experiences/${a.id}.html`;if(navigator.share)try{await navigator.share({title:a.title,text:a.description,url:t})}catch(e){console.log("Share cancelled")}else await navigator.clipboard.writeText(t),alert("Link copied to clipboard!")}},children:t.jsx(Pd,{className:"h-4 w-4"})})]}),t.jsxs(Uc,{children:[t.jsx($c,{children:t.jsx(Vc,{children:"Experience Details"})}),t.jsxs(Hc,{className:"space-y-4",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-muted-foreground",children:"Objects in Scene:"}),t.jsx("span",{children:a.contentConfig.sceneObjects?.length||0})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-muted-foreground",children:"Experience ID:"}),t.jsx("span",{className:"font-mono text-sm",children:a.id})]}),a.mindFile&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-muted-foreground",children:"Tracking File:"}),t.jsx(jx,{variant:"outline",children:"Available"})]})]})]}),a.contentConfig.sceneObjects&&a.contentConfig.sceneObjects.length>0&&t.jsxs(Uc,{children:[t.jsxs($c,{children:[t.jsx(Vc,{children:"Scene Objects"}),t.jsx(Bc,{children:"Objects that will appear in the AR experience"})]}),t.jsx(Hc,{children:t.jsx("div",{className:"space-y-3",children:a.contentConfig.sceneObjects.map((e,a)=>t.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"font-medium",children:["Object ",a+1]}),t.jsxs("div",{className:"text-sm text-muted-foreground",children:["Type: ",e.content.type]})]}),t.jsx(jx,{variant:"outline",children:e.content.type})]},e.id))})})]}),t.jsxs(Uc,{children:[t.jsx($c,{children:t.jsx(Vc,{children:"How to Use"})}),t.jsxs(Hc,{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsx("div",{className:"w-6 h-6 bg-primary text-primary-foreground rounded-full flex items-center justify-center text-sm font-bold",children:"1"}),t.jsx("p",{className:"text-sm",children:"Download or view the marker image above"})]}),t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsx("div",{className:"w-6 h-6 bg-primary text-primary-foreground rounded-full flex items-center justify-center text-sm font-bold",children:"2"}),t.jsx("p",{className:"text-sm",children:'Click "Launch AR Experience" to open the AR viewer'})]}),t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsx("div",{className:"w-6 h-6 bg-primary text-primary-foreground rounded-full flex items-center justify-center text-sm font-bold",children:"3"}),t.jsx("p",{className:"text-sm",children:"Point your camera at the marker to see the AR content"})]})]})]})]})]})]}):t.jsx("div",{className:"container mx-auto p-6",children:t.jsxs("div",{className:"text-center py-12",children:[t.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Experience not found"}),t.jsx("p",{className:"text-muted-foreground mb-4",children:"The experience you're looking for doesn't exist."}),t.jsx(Ln,{href:"/experiences",children:t.jsx(eu,{children:"Back to Experiences"})})]})})}const Ex=()=>{const a=Xa(),[n,s]=e.useState(null),[i,r]=e.useState([]),[o,l]=e.useState(0),[c,d]=e.useState(null),[u,p]=e.useState([]),[m,h]=e.useState(!1),[f,g]=e.useState(null),[x,v]=e.useState(!1),[b,y]=e.useState(!0),w=e.useCallback(()=>{if(console.log("Checking MindAR availability...",{windowMINDAR:!!window.MINDAR,windowMINDARIMAGE:!(!window.MINDAR||!window.MINDAR.IMAGE),compiler:!!n}),window.MINDAR&&window.MINDAR.IMAGE)try{const e=new window.MINDAR.IMAGE.Compiler;return s(e),y(!1),g(null),console.log("MindAR compiler initialized successfully"),!0}catch(e){return console.error("Error creating compiler instance:",e),g(`Failed to initialize compiler: ${e.message}`),y(!1),!1}else console.log("MindAR not available yet:",{MINDAR:!!window.MINDAR,IMAGE:!(!window.MINDAR||!window.MINDAR.IMAGE)});return!1},[]);e.useEffect(()=>{if(console.log("ImageTracking component mounted, checking MindAR..."),!w()){let e=0;const t=10,a=1e3,n=()=>{if(e<t){if(e++,console.log(`Retrying MindAR initialization... Attempt ${e}/${t}`),w())return;setTimeout(n,a)}else g("Failed to initialize MindAR after multiple attempts. Please refresh the page."),y(!1)};setTimeout(n,a)}},[w]),e.useEffect(()=>{console.log("Setting up MindAR load listeners...");const e=()=>{n||m||(console.log("MindAR script loaded, attempting to initialize compiler..."),w())};window.MINDAR&&window.MINDAR.IMAGE&&!n&&(console.log("MindAR already available, initializing..."),w()),window.addEventListener("mindARLoaded",e);const t=setInterval(()=>{!n&&window.MINDAR&&window.MINDAR.IMAGE&&!m&&(console.log("MindAR detected via interval check"),w(),clearInterval(t))},500),a=setTimeout(()=>{window.MINDAR||(console.error("MindAR script may have failed to load. Check network tab for errors."),g("MindAR library failed to load. Please check your internet connection and refresh the page."),y(!1))},1e4);return()=>{window.removeEventListener("mindARLoaded",e),clearInterval(t),clearTimeout(a)}},[n,m,w]);const j=e.useCallback(e=>{r(e),p([]),d(null),g(null),v(!1)},[]),{getRootProps:k,getInputProps:N}=fx({onDrop:j,accept:{"image/*":[".png",".jpg",".jpeg"]},multiple:!0}),E=async e=>new Promise((t,a)=>{const n=new Image;n.onload=()=>t(n),n.onerror=t=>a(new Error(`Error loading image: ${e.name}`)),n.src=URL.createObjectURL(e)}),C=0===i.length||m||!n||b;return t.jsxs("div",{className:"min-h-screen bg-slate-900 text-white flex flex-col",children:[t.jsxs("main",{className:"container mx-auto p-6 flex-grow",children:[t.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"Upload Target Images"}),t.jsx("p",{className:"text-slate-400 mb-6",children:"These images will be used as targets for the AR experience. Choose images with good contrast and details."}),b&&t.jsx("div",{className:"mb-6 p-4 bg-blue-900/50 border border-blue-500/50 text-blue-400 rounded",children:t.jsx("p",{children:"🔄 Initializing MindAR compiler... Please wait."})}),t.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[t.jsxs("div",{...k({className:"border border-dashed border-amber-600/30 rounded-lg p-8 bg-slate-800 flex-1 flex flex-col items-center justify-center cursor-pointer"}),children:[t.jsx("input",{...N()}),t.jsx(Vd,{className:"h-12 w-12 text-blue-400 mb-4"}),t.jsx("h3",{className:"font-medium text-lg mb-1",children:"Drag and drop images here"}),t.jsx("p",{className:"text-slate-400 mb-4",children:"or"}),t.jsxs(eu,{className:"bg-amber-700 hover:bg-amber-800 text-white font-medium flex gap-2 items-center",children:[t.jsx(vd,{className:"h-4 w-4"}),"Select Image"]}),t.jsx("p",{className:"text-slate-500 text-sm mt-6",children:"Supports: JPG, PNG. Max 10MB"})]}),t.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 w-full md:w-1/3",children:[t.jsx("h3",{className:"font-medium mb-3",children:"Preview"}),t.jsx("div",{className:"aspect-video relative bg-slate-900 rounded flex items-center justify-center mb-4",children:i.length>0?t.jsx("div",{className:"flex items-center justify-center p-2",children:i.slice(0,4).map((e,a)=>t.jsx("img",{src:URL.createObjectURL(e),alt:e.name,className:"h-full w-full object-cover"},a))}):t.jsxs("div",{className:"text-slate-600 flex flex-col items-center",children:[t.jsx(vd,{className:"h-6 w-6 mb-2"}),t.jsx("span",{children:"Preview not available"})]})}),t.jsxs("div",{className:"text-sm flex items-center gap-2 text-slate-400",children:[t.jsxs("p",{children:["File count: ",i.length>0?i.length:"-"," , "]}),t.jsxs("p",{children:["Total size:"," ",i.length>0?`${(i.reduce((e,t)=>e+t.size,0)/1048576).toFixed(1)} MB`:"-"]})]})]})]}),i.length>0&&t.jsxs("div",{className:"mt-6 bg-slate-800 rounded-lg p-4",children:[t.jsx("h3",{className:"font-medium mb-3",children:"Uploaded Files"}),t.jsx("ul",{className:"space-y-2",children:i.map((e,a)=>t.jsxs("li",{className:"flex justify-between items-center bg-slate-900 p-3 rounded",children:[t.jsxs("span",{className:"text-slate-300",children:[e.name," (",(e.size/1048576).toFixed(1)," MB)"]}),t.jsx("button",{className:"text-red-500 hover:text-red-600",onClick:()=>(e=>{const t=[...i];t.splice(e,1),r(t),0===t.length&&(p([]),d(null),v(!1))})(a),children:"Remove"})]},a))})]}),t.jsxs("div",{className:"mt-8 bg-slate-800/50 p-4 rounded-lg mb-6",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t.jsx(ud,{className:"text-amber-500 h-5 w-5"}),t.jsx("h3",{className:"font-medium text-amber-400",children:"Tips for better results"})]}),t.jsxs("ul",{className:"space-y-2",children:[t.jsxs("li",{className:"flex items-center gap-2 text-slate-300",children:[t.jsx(dd,{className:"text-green-500 h-4 w-4"}),"Choose images with good contrast and lots of details"]}),t.jsxs("li",{className:"flex items-center gap-2 text-slate-300",children:[t.jsx(dd,{className:"text-green-500 h-4 w-4"}),"Avoid repetitive patterns or reflective surfaces"]}),t.jsxs("li",{className:"flex items-center gap-2 text-slate-300",children:[t.jsx(dd,{className:"text-green-500 h-4 w-4"}),"Recommended minimum resolution: 1080x1080px"]})]})]}),f&&t.jsx("div",{className:"mb-6 p-4 bg-red-900/50 border border-red-500/50 text-red-400 rounded",children:t.jsx("p",{children:f})}),t.jsxs("div",{className:"mb-6",children:[t.jsx(eu,{className:"bg-amber-700 hover:bg-amber-800 text-white font-medium "+(C?"opacity-50 cursor-not-allowed":""),onClick:()=>{0!==i.length?n||w()?(async()=>{if(n&&0!==i.length){h(!0),l(0),g(null),v(!1);try{const e=[];for(let n=0;n<i.length;n++){const t=await E(i[n]);e.push(t),console.log(`Loaded image ${n+1}/${i.length}: ${i[n].name}, size: ${t.width}x${t.height}`)}console.log("Starting compilation with",e.length,"images");const t=(new Date).getTime(),a=await n.compileImageTargets(e,e=>{console.log("Compilation progress:",e),l(e)});console.log("Compilation completed in:",(new Date).getTime()-t,"ms"),console.log("Compilation results:",a),p(a);const s=await n.exportData();d(s),v(!0)}catch(e){console.error("Error compiling files:",e),g(`Error compiling files: ${e.message||"Unknown error"}`)}finally{h(!1)}}})():g("MindAR compiler is not initialized yet. Please wait or refresh the page."):g("Please select files first")},disabled:C,children:m?"Compiling...":b?"Initializing...":"Start Compilation"}),m&&t.jsxs("div",{className:"mt-4",children:[t.jsxs("p",{className:"text-sm text-slate-400 mb-2",children:["Compilation Progress: ",o.toFixed(2),"%"]}),t.jsx("div",{className:"bg-slate-700 rounded-full h-3",children:t.jsx("div",{className:"bg-blue-600 h-3 rounded-full transition-all duration-300",style:{width:`${o}%`}})})]}),x&&t.jsx("div",{className:"mt-4 p-3 bg-green-900/50 border border-green-500/50 text-green-400 rounded",children:t.jsx("p",{children:"✅ Compilation completed successfully! You can now continue to AR creation."})})]})]}),t.jsxs("div",{className:"container mx-auto p-6 flex justify-between mt-auto",children:[t.jsxs(eu,{variant:"ghost",className:"flex items-center gap-2 text-slate-400 hover:text-white",onClick:()=>a("/"),children:[t.jsx(Xc,{className:"h-4 w-4"}),"Back"]}),t.jsxs(eu,{onClick:()=>{if(!c||!x)return void g("Please complete the compilation process first");const e=new Blob([c]),t=new FileReader;t.onload=()=>{const e=t.result,n=i[0],s=new FileReader;s.onload=()=>{const t=s.result;a("/confirm-image",{state:{mindFileData:e,mindFileBuffer:c,originalImages:i.map(e=>({name:e.name,size:e.size,type:e.type,lastModified:e.lastModified})),compiledImageData:u,compilationTimestamp:(new Date).toISOString(),previewImage:t,firstImageName:n.name,firstImageSize:`${(n.size/1048576).toFixed(1)} MB`,firstImageDimensions:"1200 x 800 px",trackingData:u.map(e=>({trackingImages:e.trackingImageList||[],featureImages:e.imageList||[],trackingPoints:e.trackingData||[],matchingData:e.matchingData||[]}))}})},s.readAsDataURL(n)},t.readAsDataURL(e)},disabled:!x||!c,className:"flex items-center gap-2 "+(x&&c?"bg-amber-700 hover:bg-amber-800":"bg-slate-700 cursor-not-allowed"),children:["Continue",t.jsx(Jc,{className:"h-4 w-4"})]})]}),t.jsx("footer",{className:"p-4 text-center text-slate-500 text-sm",children:"© 2023 PACKAR - Create your AR experience"})]})};function Cx(){const a=Qa(),n=Xa();console.log("location: ",a?.state);const[s,i]=e.useState({name:a?.state?.firstImageName||localStorage.getItem("uploadedImageName")||"target_image.jpg",size:a?.state?.firstImageSize||localStorage.getItem("uploadedImageSize")||"2.4 MB",dimensions:a?.state?.firstImageDimensions||localStorage.getItem("uploadedImageDimensions")||"1200 x 800 px",preview:a?.state?.previewImage||localStorage.getItem("uploadedImagePreview")||""}),[r,o]=e.useState({contrast:92,details:88,recognizability:75});return t.jsxs("div",{className:"min-h-screen bg-slate-900 text-white",children:[t.jsxs("header",{className:"p-4 border-b border-slate-800 flex justify-between items-center",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"bg-slate-800 h-8 w-8 flex items-center justify-center rounded-md",children:t.jsx("span",{className:"text-xl font-bold",children:"P"})}),t.jsx("h1",{className:"text-xl font-bold tracking-wider",children:"PACKAR"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{children:"Image Tracking"}),t.jsx("div",{className:"h-6 w-6 bg-blue-500 rounded-full flex items-center justify-center text-xs",children:"2"})]})]}),t.jsxs("main",{className:"container mx-auto p-6 flex flex-col items-center",children:[t.jsx("h2",{className:"text-2xl font-semibold mb-8 text-center",children:"Confirm this image?"}),t.jsxs("div",{className:"bg-slate-800 rounded-lg overflow-hidden max-w-2xl w-full aspect-video mb-6",children:[s.preview?t.jsx("img",{src:s.preview,alt:"Uploaded target",className:"w-full h-full object-contain"}):t.jsx("div",{className:"w-full h-full bg-black flex items-center justify-center",children:t.jsx("span",{className:"text-slate-500",children:"No preview available"})}),t.jsxs("div",{className:"p-3 flex justify-between items-center",children:[t.jsxs("div",{className:"text-sm text-slate-400",children:[s.name,t.jsx("br",{}),s.dimensions," • ",s.size]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"h-2 w-2 bg-green-500 rounded-full"}),t.jsx("span",{className:"text-sm text-slate-300",children:"Image suitable for tracking"})]})]})]}),t.jsxs("div",{className:"bg-slate-800/80 rounded-lg p-4 w-full max-w-2xl mb-8",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[t.jsx(nd,{className:"text-blue-400 h-5 w-5"}),t.jsx("h3",{className:"font-medium text-blue-300",children:"Image Analysis"})]}),t.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"text-green-400 font-bold text-2xl mb-1",children:[r.contrast,"%"]}),t.jsx("div",{className:"text-slate-400 text-sm",children:"Contrast"})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"text-blue-400 font-bold text-2xl mb-1",children:[r.details,"%"]}),t.jsx("div",{className:"text-slate-400 text-sm",children:"Details"})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"text-amber-400 font-bold text-2xl mb-1",children:[r.recognizability,"%"]}),t.jsx("div",{className:"text-slate-400 text-sm",children:"Recognizability"})]})]})]}),t.jsxs("div",{className:"flex gap-4",children:[t.jsxs(eu,{onClick:()=>{n("/upload-image")},className:"bg-red-600 hover:bg-red-700 px-8 py-2 flex items-center gap-2",children:[t.jsx(Zd,{className:"h-5 w-5"}),"No"]}),t.jsxs(eu,{onClick:()=>{const e={mindFileData:a?.state?.mindFileData,mindFileBuffer:a?.state?.mindFileBuffer,originalImages:a?.state?.originalImages||[],compiledImageData:a?.state?.compiledImageData||[],trackingData:a?.state?.trackingData||[],compilationTimestamp:a?.state?.compilationTimestamp,targetImage:{name:s.name,size:s.size,dimensions:s.dimensions,preview:s.preview},analysisResults:r,uploadedImage:s.preview};n("/create",{state:e})},className:"bg-amber-700 hover:bg-amber-800 px-8 py-2 flex items-center gap-2",children:[t.jsx(sd,{className:"h-5 w-5"}),"Yes"]})]})]}),t.jsx("div",{className:"container mx-auto px-6 mt-auto",children:t.jsx(Ln,{to:"/upload-image",children:t.jsxs(eu,{variant:"outline",className:"flex items-center gap-2 bg-transparent border-slate-700 text-slate-300",children:[t.jsx(Xc,{className:"h-4 w-4"}),"Back"]})})}),t.jsx("footer",{className:"p-6 text-center text-slate-500 text-sm mt-auto",children:"© 2023 PACKAR - Create your AR experience"})]})}var Sx={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Rx=a.createContext&&a.createContext(Sx),Ax=["attr","size","title"];function _x(e,t){if(null==e)return{};var a,n,s=function(e,t){if(null==e)return{};var a={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;a[n]=e[n]}return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}function Tx(){return Tx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Tx.apply(this,arguments)}function zx(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Mx(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?zx(Object(a),!0).forEach(function(t){Ox(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):zx(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function Ox(e,t,a){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:n+"")in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Ix(e){return e&&e.map((e,t)=>a.createElement(e.tag,Mx({key:t},e.attr),Ix(e.child)))}function Px(e){return t=>a.createElement(Dx,Tx({attr:Mx({},e.attr)},t),Ix(e.child))}function Dx(e){var t=t=>{var n,{attr:s,size:i,title:r}=e,o=_x(e,Ax),l=i||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),a.createElement("svg",Tx({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,s,o,{className:n,style:Mx(Mx({color:e.color||t.color},t.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),r&&a.createElement("title",null,r),e.children)};return void 0!==Rx?a.createElement(Rx.Consumer,null,e=>t(e)):t(Sx)}function Fx(e){return Px({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"},child:[]}]})(e)}function Lx(e){return Px({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M320 448v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V120c0-13.255 10.745-24 24-24h72v296c0 30.879 25.121 56 56 56h168zm0-344V0H152c-13.255 0-24 10.745-24 24v368c0 13.255 10.745 24 24 24h272c13.255 0 24-10.745 24-24V128H344c-13.2 0-24-10.8-24-24zm120.971-31.029L375.029 7.029A24 24 0 0 0 358.059 0H352v96h96v-6.059a24 24 0 0 0-7.029-16.97z"},child:[]}]})(e)}function Ux(e){return Px({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"},child:[]}]})(e)}function $x(e){return Px({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"},child:[]}]})(e)}function Vx(e){return Px({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M503.691 189.836L327.687 37.851C312.281 24.546 288 35.347 288 56.015v80.053C127.371 137.907 0 170.1 0 322.326c0 61.441 39.581 122.309 83.333 154.132 13.653 9.931 33.111-2.533 28.077-18.631C66.066 312.814 132.917 274.316 288 272.085V360c0 20.7 24.3 31.453 39.687 18.164l176.004-152c11.071-9.562 11.086-26.753 0-36.328z"},child:[]}]})(e)}function Bx(e){return Px({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M149.333 56v80c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V56c0-13.255 10.745-24 24-24h101.333c13.255 0 24 10.745 24 24zm181.334 240v-80c0-13.255-10.745-24-24-24H205.333c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24h101.333c13.256 0 24.001-10.745 24.001-24zm32-240v80c0 13.255 10.745 24 24 24H488c13.255 0 24-10.745 24-24V56c0-13.255-10.745-24-24-24H386.667c-13.255 0-24 10.745-24 24zm-32 80V56c0-13.255-10.745-24-24-24H205.333c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24h101.333c13.256 0 24.001-10.745 24.001-24zm-205.334 56H24c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24h101.333c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24zM0 376v80c0 13.255 10.745 24 24 24h101.333c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H24c-13.255 0-24 10.745-24 24zm386.667-56H488c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H386.667c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24zm0 160H488c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H386.667c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24zM181.333 376v80c0 13.255 10.745 24 24 24h101.333c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H205.333c-13.255 0-24 10.745-24 24z"},child:[]}]})(e)}var Hx,qx,Gx=Object.defineProperty,Kx=Object.getOwnPropertySymbols,Zx=Object.prototype.hasOwnProperty,Qx=Object.prototype.propertyIsEnumerable,Wx=(e,t,a)=>t in e?Gx(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Yx=(e,t)=>{for(var a in t||(t={}))Zx.call(t,a)&&Wx(e,a,t[a]);if(Kx)for(var a of Kx(t))Qx.call(t,a)&&Wx(e,a,t[a]);return e},Xx=(e,t)=>{var a={};for(var n in e)Zx.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&Kx)for(var n of Kx(e))t.indexOf(n)<0&&Qx.call(e,n)&&(a[n]=e[n]);return a};(e=>{const t=class t{constructor(e,a,n,i){if(this.version=e,this.errorCorrectionLevel=a,this.modules=[],this.isFunction=[],e<t.MIN_VERSION||e>t.MAX_VERSION)throw new RangeError("Version value out of range");if(i<-1||i>7)throw new RangeError("Mask value out of range");this.size=4*e+17;let r=[];for(let t=0;t<this.size;t++)r.push(!1);for(let t=0;t<this.size;t++)this.modules.push(r.slice()),this.isFunction.push(r.slice());this.drawFunctionPatterns();const o=this.addEccAndInterleave(n);if(this.drawCodewords(o),-1==i){let e=1e9;for(let t=0;t<8;t++){this.applyMask(t),this.drawFormatBits(t);const a=this.getPenaltyScore();a<e&&(i=t,e=a),this.applyMask(t)}}s(0<=i&&i<=7),this.mask=i,this.applyMask(i),this.drawFormatBits(i),this.isFunction=[]}static encodeText(a,n){const s=e.QrSegment.makeSegments(a);return t.encodeSegments(s,n)}static encodeBinary(a,n){const s=e.QrSegment.makeBytes(a);return t.encodeSegments([s],n)}static encodeSegments(e,n,i=1,o=40,l=-1,c=!0){if(!(t.MIN_VERSION<=i&&i<=o&&o<=t.MAX_VERSION)||l<-1||l>7)throw new RangeError("Invalid value");let d,u;for(d=i;;d++){const a=8*t.getNumDataCodewords(d,n),s=r.getTotalBits(e,d);if(s<=a){u=s;break}if(d>=o)throw new RangeError("Data too long")}for(const a of[t.Ecc.MEDIUM,t.Ecc.QUARTILE,t.Ecc.HIGH])c&&u<=8*t.getNumDataCodewords(d,a)&&(n=a);let p=[];for(const t of e){a(t.mode.modeBits,4,p),a(t.numChars,t.mode.numCharCountBits(d),p);for(const e of t.getData())p.push(e)}s(p.length==u);const m=8*t.getNumDataCodewords(d,n);s(p.length<=m),a(0,Math.min(4,m-p.length),p),a(0,(8-p.length%8)%8,p),s(p.length%8==0);for(let t=236;p.length<m;t^=253)a(t,8,p);let h=[];for(;8*h.length<p.length;)h.push(0);return p.forEach((e,t)=>h[t>>>3]|=e<<7-(7&t)),new t(d,n,h,l)}getModule(e,t){return 0<=e&&e<this.size&&0<=t&&t<this.size&&this.modules[t][e]}getModules(){return this.modules}drawFunctionPatterns(){for(let a=0;a<this.size;a++)this.setFunctionModule(6,a,a%2==0),this.setFunctionModule(a,6,a%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const e=this.getAlignmentPatternPositions(),t=e.length;for(let a=0;a<t;a++)for(let n=0;n<t;n++)0==a&&0==n||0==a&&n==t-1||a==t-1&&0==n||this.drawAlignmentPattern(e[a],e[n]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(e){const t=this.errorCorrectionLevel.formatBits<<3|e;let a=t;for(let n=0;n<10;n++)a=a<<1^1335*(a>>>9);const i=21522^(t<<10|a);s(i>>>15==0);for(let s=0;s<=5;s++)this.setFunctionModule(8,s,n(i,s));this.setFunctionModule(8,7,n(i,6)),this.setFunctionModule(8,8,n(i,7)),this.setFunctionModule(7,8,n(i,8));for(let s=9;s<15;s++)this.setFunctionModule(14-s,8,n(i,s));for(let s=0;s<8;s++)this.setFunctionModule(this.size-1-s,8,n(i,s));for(let s=8;s<15;s++)this.setFunctionModule(8,this.size-15+s,n(i,s));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let e=this.version;for(let a=0;a<12;a++)e=e<<1^7973*(e>>>11);const t=this.version<<12|e;s(t>>>18==0);for(let a=0;a<18;a++){const e=n(t,a),s=this.size-11+a%3,i=Math.floor(a/3);this.setFunctionModule(s,i,e),this.setFunctionModule(i,s,e)}}drawFinderPattern(e,t){for(let a=-4;a<=4;a++)for(let n=-4;n<=4;n++){const s=Math.max(Math.abs(n),Math.abs(a)),i=e+n,r=t+a;0<=i&&i<this.size&&0<=r&&r<this.size&&this.setFunctionModule(i,r,2!=s&&4!=s)}}drawAlignmentPattern(e,t){for(let a=-2;a<=2;a++)for(let n=-2;n<=2;n++)this.setFunctionModule(e+n,t+a,1!=Math.max(Math.abs(n),Math.abs(a)))}setFunctionModule(e,t,a){this.modules[t][e]=a,this.isFunction[t][e]=!0}addEccAndInterleave(e){const a=this.version,n=this.errorCorrectionLevel;if(e.length!=t.getNumDataCodewords(a,n))throw new RangeError("Invalid argument");const i=t.NUM_ERROR_CORRECTION_BLOCKS[n.ordinal][a],r=t.ECC_CODEWORDS_PER_BLOCK[n.ordinal][a],o=Math.floor(t.getNumRawDataModules(a)/8),l=i-o%i,c=Math.floor(o/i);let d=[];const u=t.reedSolomonComputeDivisor(r);for(let s=0,m=0;s<i;s++){let a=e.slice(m,m+c-r+(s<l?0:1));m+=a.length;const n=t.reedSolomonComputeRemainder(a,u);s<l&&a.push(0),d.push(a.concat(n))}let p=[];for(let t=0;t<d[0].length;t++)d.forEach((e,a)=>{(t!=c-r||a>=l)&&p.push(e[t])});return s(p.length==o),p}drawCodewords(e){if(e.length!=Math.floor(t.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let a=0;for(let t=this.size-1;t>=1;t-=2){6==t&&(t=5);for(let s=0;s<this.size;s++)for(let i=0;i<2;i++){const r=t-i,o=!(t+1&2)?this.size-1-s:s;!this.isFunction[o][r]&&a<8*e.length&&(this.modules[o][r]=n(e[a>>>3],7-(7&a)),a++)}}s(a==8*e.length)}applyMask(e){if(e<0||e>7)throw new RangeError("Mask value out of range");for(let t=0;t<this.size;t++)for(let a=0;a<this.size;a++){let n;switch(e){case 0:n=(a+t)%2==0;break;case 1:n=t%2==0;break;case 2:n=a%3==0;break;case 3:n=(a+t)%3==0;break;case 4:n=(Math.floor(a/3)+Math.floor(t/2))%2==0;break;case 5:n=a*t%2+a*t%3==0;break;case 6:n=(a*t%2+a*t%3)%2==0;break;case 7:n=((a+t)%2+a*t%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[t][a]&&n&&(this.modules[t][a]=!this.modules[t][a])}}getPenaltyScore(){let e=0;for(let s=0;s<this.size;s++){let a=!1,n=0,i=[0,0,0,0,0,0,0];for(let r=0;r<this.size;r++)this.modules[s][r]==a?(n++,5==n?e+=t.PENALTY_N1:n>5&&e++):(this.finderPenaltyAddHistory(n,i),a||(e+=this.finderPenaltyCountPatterns(i)*t.PENALTY_N3),a=this.modules[s][r],n=1);e+=this.finderPenaltyTerminateAndCount(a,n,i)*t.PENALTY_N3}for(let s=0;s<this.size;s++){let a=!1,n=0,i=[0,0,0,0,0,0,0];for(let r=0;r<this.size;r++)this.modules[r][s]==a?(n++,5==n?e+=t.PENALTY_N1:n>5&&e++):(this.finderPenaltyAddHistory(n,i),a||(e+=this.finderPenaltyCountPatterns(i)*t.PENALTY_N3),a=this.modules[r][s],n=1);e+=this.finderPenaltyTerminateAndCount(a,n,i)*t.PENALTY_N3}for(let s=0;s<this.size-1;s++)for(let a=0;a<this.size-1;a++){const n=this.modules[s][a];n==this.modules[s][a+1]&&n==this.modules[s+1][a]&&n==this.modules[s+1][a+1]&&(e+=t.PENALTY_N2)}let a=0;for(const t of this.modules)a=t.reduce((e,t)=>e+(t?1:0),a);const n=this.size*this.size,i=Math.ceil(Math.abs(20*a-10*n)/n)-1;return s(0<=i&&i<=9),e+=i*t.PENALTY_N4,s(0<=e&&e<=2568888),e}getAlignmentPatternPositions(){if(1==this.version)return[];{const e=Math.floor(this.version/7)+2,t=32==this.version?26:2*Math.ceil((4*this.version+4)/(2*e-2));let a=[6];for(let n=this.size-7;a.length<e;n-=t)a.splice(1,0,n);return a}}static getNumRawDataModules(e){if(e<t.MIN_VERSION||e>t.MAX_VERSION)throw new RangeError("Version number out of range");let a=(16*e+128)*e+64;if(e>=2){const t=Math.floor(e/7)+2;a-=(25*t-10)*t-55,e>=7&&(a-=36)}return s(208<=a&&a<=29648),a}static getNumDataCodewords(e,a){return Math.floor(t.getNumRawDataModules(e)/8)-t.ECC_CODEWORDS_PER_BLOCK[a.ordinal][e]*t.NUM_ERROR_CORRECTION_BLOCKS[a.ordinal][e]}static reedSolomonComputeDivisor(e){if(e<1||e>255)throw new RangeError("Degree out of range");let a=[];for(let t=0;t<e-1;t++)a.push(0);a.push(1);let n=1;for(let s=0;s<e;s++){for(let e=0;e<a.length;e++)a[e]=t.reedSolomonMultiply(a[e],n),e+1<a.length&&(a[e]^=a[e+1]);n=t.reedSolomonMultiply(n,2)}return a}static reedSolomonComputeRemainder(e,a){let n=a.map(e=>0);for(const s of e){const e=s^n.shift();n.push(0),a.forEach((a,s)=>n[s]^=t.reedSolomonMultiply(a,e))}return n}static reedSolomonMultiply(e,t){if(e>>>8!=0||t>>>8!=0)throw new RangeError("Byte out of range");let a=0;for(let n=7;n>=0;n--)a=a<<1^285*(a>>>7),a^=(t>>>n&1)*e;return s(a>>>8==0),a}finderPenaltyCountPatterns(e){const t=e[1];s(t<=3*this.size);const a=t>0&&e[2]==t&&e[3]==3*t&&e[4]==t&&e[5]==t;return(a&&e[0]>=4*t&&e[6]>=t?1:0)+(a&&e[6]>=4*t&&e[0]>=t?1:0)}finderPenaltyTerminateAndCount(e,t,a){return e&&(this.finderPenaltyAddHistory(t,a),t=0),t+=this.size,this.finderPenaltyAddHistory(t,a),this.finderPenaltyCountPatterns(a)}finderPenaltyAddHistory(e,t){0==t[0]&&(e+=this.size),t.pop(),t.unshift(e)}};function a(e,t,a){if(t<0||t>31||e>>>t!=0)throw new RangeError("Value out of range");for(let n=t-1;n>=0;n--)a.push(e>>>n&1)}function n(e,t){return!!(e>>>t&1)}function s(e){if(!e)throw new Error("Assertion error")}t.MIN_VERSION=1,t.MAX_VERSION=40,t.PENALTY_N1=3,t.PENALTY_N2=3,t.PENALTY_N3=40,t.PENALTY_N4=10,t.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],t.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],e.QrCode=t;const i=class e{constructor(e,t,a){if(this.mode=e,this.numChars=t,this.bitData=a,t<0)throw new RangeError("Invalid argument");this.bitData=a.slice()}static makeBytes(t){let n=[];for(const e of t)a(e,8,n);return new e(e.Mode.BYTE,t.length,n)}static makeNumeric(t){if(!e.isNumeric(t))throw new RangeError("String contains non-numeric characters");let n=[];for(let e=0;e<t.length;){const s=Math.min(t.length-e,3);a(parseInt(t.substring(e,e+s),10),3*s+1,n),e+=s}return new e(e.Mode.NUMERIC,t.length,n)}static makeAlphanumeric(t){if(!e.isAlphanumeric(t))throw new RangeError("String contains unencodable characters in alphanumeric mode");let n,s=[];for(n=0;n+2<=t.length;n+=2){let i=45*e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(n));i+=e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(n+1)),a(i,11,s)}return n<t.length&&a(e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(n)),6,s),new e(e.Mode.ALPHANUMERIC,t.length,s)}static makeSegments(t){return""==t?[]:e.isNumeric(t)?[e.makeNumeric(t)]:e.isAlphanumeric(t)?[e.makeAlphanumeric(t)]:[e.makeBytes(e.toUtf8ByteArray(t))]}static makeEci(t){let n=[];if(t<0)throw new RangeError("ECI assignment value out of range");if(t<128)a(t,8,n);else if(t<16384)a(2,2,n),a(t,14,n);else{if(!(t<1e6))throw new RangeError("ECI assignment value out of range");a(6,3,n),a(t,21,n)}return new e(e.Mode.ECI,0,n)}static isNumeric(t){return e.NUMERIC_REGEX.test(t)}static isAlphanumeric(t){return e.ALPHANUMERIC_REGEX.test(t)}getData(){return this.bitData.slice()}static getTotalBits(e,t){let a=0;for(const n of e){const e=n.mode.numCharCountBits(t);if(n.numChars>=1<<e)return 1/0;a+=4+e+n.bitData.length}return a}static toUtf8ByteArray(e){e=encodeURI(e);let t=[];for(let a=0;a<e.length;a++)"%"!=e.charAt(a)?t.push(e.charCodeAt(a)):(t.push(parseInt(e.substring(a+1,a+3),16)),a+=2);return t}};i.NUMERIC_REGEX=/^[0-9]*$/,i.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,i.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let r=i;e.QrSegment=i})(Hx||(Hx={})),(e=>{const t=class{constructor(e,t){this.ordinal=e,this.formatBits=t}};t.LOW=new t(0,1),t.MEDIUM=new t(1,0),t.QUARTILE=new t(2,3),t.HIGH=new t(3,2),e.Ecc=t})((qx=Hx||(Hx={})).QrCode||(qx.QrCode={})),(e=>{(e=>{const t=class{constructor(e,t){this.modeBits=e,this.numBitsCharCount=t}numCharCountBits(e){return this.numBitsCharCount[Math.floor((e+7)/17)]}};t.NUMERIC=new t(1,[10,12,14]),t.ALPHANUMERIC=new t(2,[9,11,13]),t.BYTE=new t(4,[8,16,16]),t.KANJI=new t(8,[8,10,12]),t.ECI=new t(7,[0,0,0]),e.Mode=t})(e.QrSegment||(e.QrSegment={}))})(Hx||(Hx={}));var Jx=Hx,ev={L:Jx.QrCode.Ecc.LOW,M:Jx.QrCode.Ecc.MEDIUM,Q:Jx.QrCode.Ecc.QUARTILE,H:Jx.QrCode.Ecc.HIGH},tv=128,av="L",nv="#FFFFFF",sv="#000000",iv=!1,rv=1;
/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */function ov(e,t=0){const a=[];return e.forEach(function(e,n){let s=null;e.forEach(function(i,r){if(!i&&null!==s)return a.push(`M${s+t} ${n+t}h${r-s}v1H${s+t}z`),void(s=null);if(r!==e.length-1)i&&null===s&&(s=r);else{if(!i)return;null===s?a.push(`M${r+t},${n+t} h1v1H${r+t}z`):a.push(`M${s+t},${n+t} h${r+1-s}v1H${s+t}z`)}})}),a.join("")}function lv(e,t){return e.slice().map((e,a)=>a<t.y||a>=t.y+t.h?e:e.map((e,a)=>(a<t.x||a>=t.x+t.w)&&e))}function cv({value:e,level:t,minVersion:n,includeMargin:s,marginSize:i,imageSettings:r,size:o,boostLevel:l}){let c=a.useMemo(()=>{const a=(Array.isArray(e)?e:[e]).reduce((e,t)=>(e.push(...Jx.QrSegment.makeSegments(t)),e),[]);return Jx.QrCode.encodeSegments(a,ev[t],n,void 0,void 0,l)},[e,t,n,l]);const{cells:d,margin:u,numCells:p,calculatedImageSettings:m}=a.useMemo(()=>{let e=c.getModules();const t=function(e,t){return null!=t?Math.max(Math.floor(t),0):e?4:0}(s,i),a=e.length+2*t,n=function(e,t,a,n){if(null==n)return null;const s=e.length+2*a,i=Math.floor(.1*t),r=s/t,o=(n.width||i)*r,l=(n.height||i)*r,c=null==n.x?e.length/2-o/2:n.x*r,d=null==n.y?e.length/2-l/2:n.y*r,u=null==n.opacity?1:n.opacity;let p=null;if(n.excavate){let e=Math.floor(c),t=Math.floor(d);p={x:e,y:t,w:Math.ceil(o+c-e),h:Math.ceil(l+d-t)}}return{x:c,y:d,h:l,w:o,excavation:p,opacity:u,crossOrigin:n.crossOrigin}}(e,o,t,r);return{cells:e,margin:t,numCells:a,calculatedImageSettings:n}},[c,o,r,s,i]);return{qrcode:c,margin:u,cells:d,numCells:p,calculatedImageSettings:m}}var dv=function(){try{(new Path2D).addPath(new Path2D)}catch(Cv){return!1}return!0}();a.forwardRef(function(e,t){const n=e,{value:s,size:i=tv,level:r=av,bgColor:o=nv,fgColor:l=sv,includeMargin:c=iv,minVersion:d=rv,boostLevel:u,marginSize:p,imageSettings:m}=n,h=Xx(n,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:f}=h,g=Xx(h,["style"]),x=null==m?void 0:m.src,v=a.useRef(null),b=a.useRef(null),y=a.useCallback(e=>{v.current=e,"function"==typeof t?t(e):t&&(t.current=e)},[t]),[w,j]=a.useState(!1),{margin:k,cells:N,numCells:E,calculatedImageSettings:C}=cv({value:s,level:r,minVersion:d,boostLevel:u,includeMargin:c,marginSize:p,imageSettings:m,size:i});a.useEffect(()=>{if(null!=v.current){const e=v.current,t=e.getContext("2d");if(!t)return;let a=N;const n=b.current,s=null!=C&&null!==n&&n.complete&&0!==n.naturalHeight&&0!==n.naturalWidth;s&&null!=C.excavation&&(a=lv(N,C.excavation));const r=window.devicePixelRatio||1;e.height=e.width=i*r;const c=i/E*r;t.scale(c,c),t.fillStyle=o,t.fillRect(0,0,E,E),t.fillStyle=l,dv?t.fill(new Path2D(ov(a,k))):N.forEach(function(e,a){e.forEach(function(e,n){e&&t.fillRect(n+k,a+k,1,1)})}),C&&(t.globalAlpha=C.opacity),s&&t.drawImage(n,C.x+k,C.y+k,C.w,C.h)}}),a.useEffect(()=>{j(!1)},[x]);const S=Yx({height:i,width:i},f);let R=null;return null!=x&&(R=a.createElement("img",{src:x,key:x,style:{display:"none"},onLoad:()=>{j(!0)},ref:b,crossOrigin:null==C?void 0:C.crossOrigin})),a.createElement(a.Fragment,null,a.createElement("canvas",Yx({style:S,height:i,width:i,ref:y,role:"img"},g)),R)}).displayName="QRCodeCanvas";var uv=a.forwardRef(function(e,t){const n=e,{value:s,size:i=tv,level:r=av,bgColor:o=nv,fgColor:l=sv,includeMargin:c=iv,minVersion:d=rv,boostLevel:u,title:p,marginSize:m,imageSettings:h}=n,f=Xx(n,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:g,cells:x,numCells:v,calculatedImageSettings:b}=cv({value:s,level:r,minVersion:d,boostLevel:u,includeMargin:c,marginSize:m,imageSettings:h,size:i});let y=x,w=null;null!=h&&null!=b&&(null!=b.excavation&&(y=lv(x,b.excavation)),w=a.createElement("image",{href:h.src,height:b.h,width:b.w,x:b.x+g,y:b.y+g,preserveAspectRatio:"none",opacity:b.opacity,crossOrigin:b.crossOrigin}));const j=ov(y,g);return a.createElement("svg",Yx({height:i,width:i,viewBox:`0 0 ${v} ${v}`,ref:t,role:"img"},f),!!p&&a.createElement("title",null,p),a.createElement("path",{fill:o,d:`M0,0 h${v}v${v}H0z`,shapeRendering:"crispEdges"}),a.createElement("path",{fill:l,d:j,shapeRendering:"crispEdges"}),w)});uv.displayName="QRCodeSVG";const pv=()=>{const[a]=Vn(),n=Xa(),[s,i]=e.useState(!1),r=a.get("projectNumber")||"AR Experience",o=a.get("experienceUrl")||"",l=o.startsWith("http")?o:`${window.location.origin}${o}`;e.useEffect(()=>{o||n("/experiences")},[o,n]);const c=()=>{navigator.clipboard.writeText(l),i(!0),setTimeout(()=>i(!1),2e3)};return o?t.jsx("div",{className:"min-h-screen bg-slate-900 text-white font-sans flex flex-col px-6 md:px-10 py-5",children:t.jsxs("main",{className:"flex-1 flex flex-col items-center max-w-3xl mx-auto",children:[t.jsxs("div",{className:"flex flex-col items-center mb-8",children:[t.jsx("div",{className:"bg-green-500 w-16 h-16 rounded-full flex items-center justify-center text-3xl mb-4",children:"✓"}),t.jsx("h1",{className:"text-2xl md:text-3xl font-bold mb-2",children:"AR Experience Successfully Created"}),t.jsxs("p",{className:"text-slate-300 text-center",children:['Your augmented reality experience "',r,'" is ready to be shared!']})]}),t.jsx("div",{className:"bg-white p-5 rounded-lg mb-4",children:t.jsx(uv,{value:l,size:200})}),t.jsx("p",{className:"text-slate-300 mb-8",children:"Scan the QR code to access the AR experience"}),t.jsxs("div",{className:"w-full mb-8",children:[t.jsx("label",{className:"text-slate-300",children:"Experience URL:"}),t.jsxs("div",{className:"flex mt-2",children:[t.jsx("input",{type:"text",value:l,readOnly:!0,className:"flex-1 bg-slate-700 border-none py-3 px-4 text-white rounded-l-md focus:outline-none"}),t.jsxs("button",{className:"bg-slate-700 text-white px-5 rounded-r-md flex items-center gap-2 hover:bg-slate-600 transition-colors",onClick:c,children:[s?t.jsx(Fx,{}):t.jsx(Lx,{})," ",s?"Copied":"Copy"]})]})]}),t.jsxs("div",{className:"flex flex-wrap gap-4 justify-center",children:[t.jsxs("button",{onClick:c,className:"flex items-center gap-2 py-3 px-5 bg-slate-700 text-white rounded-md hover:bg-slate-600 transition-colors min-w-[140px] justify-center",children:[t.jsx(Vx,{})," Share"]}),t.jsxs("button",{className:"flex items-center gap-2 py-3 px-5 bg-slate-700 text-white rounded-md hover:bg-slate-600 transition-colors min-w-[140px] justify-center",children:[t.jsx(Ux,{})," Download"]}),t.jsxs("button",{onClick:()=>{window.open(l,"_blank")},className:"flex items-center gap-2 py-3 px-5 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors min-w-[140px] justify-center",children:[t.jsx($x,{})," View"]}),t.jsxs("button",{onClick:()=>{n("/experiences")},className:"flex items-center gap-2 py-3 px-5 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors min-w-[140px] justify-center",children:[t.jsx(Bx,{})," My Experiences"]})]})]})}):t.jsx("div",{className:"min-h-screen bg-slate-900 text-white flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Invalid Experience URL"}),t.jsx("button",{onClick:()=>n("/experiences"),className:"bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded",children:"Go to Experiences"})]})})};function mv({className:e,...a}){return t.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:t.jsx("table",{"data-slot":"table",className:Lc("w-full caption-bottom text-sm",e),...a})})}function hv({className:e,...a}){return t.jsx("thead",{"data-slot":"table-header",className:Lc("[&_tr]:border-b",e),...a})}function fv({className:e,...a}){return t.jsx("tbody",{"data-slot":"table-body",className:Lc("[&_tr:last-child]:border-0",e),...a})}function gv({className:e,...a}){return t.jsx("tr",{"data-slot":"table-row",className:Lc("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...a})}function xv({className:e,...a}){return t.jsx("th",{"data-slot":"table-head",className:Lc("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...a})}function vv({className:e,...a}){return t.jsx("td",{"data-slot":"table-cell",className:Lc("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...a})}function bv({className:e,...a}){return t.jsx("textarea",{"data-slot":"textarea",className:Lc("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...a})}function yv(){const[a,n]=e.useState(null),[s,i]=e.useState(!0),[r,o]=e.useState(""),[l,c]=e.useState("users"),[d,u]=e.useState(!1),[p,m]=e.useState({name:"",description:"",file:null}),[h,f]=e.useState({file:null,preview:null,isPlaying:!1}),[g,x]=e.useState({searchQuery:"",dateRange:"all",sortBy:"createdAt",sortOrder:"desc"}),[v,b]=e.useState(!1),{toast:y}=Xp(),w=Xt();e.useEffect(()=>{j()},[]);const j=async()=>{try{const{user:e,isAuthenticated:t}=await vs.checkAuth();if(!t||!e||"admin"!==e.role)return void(window.location.href="/");n(e)}catch(e){console.error("Auth check failed:",e),window.location.href="/"}finally{i(!1)}},k=()=>{h.preview&&h.preview.startsWith("blob:")&&URL.revokeObjectURL(h.preview)},N=()=>{k(),u(!1),f({file:null,preview:null,isPlaying:!1}),m({name:"",description:"",file:null}),b(!1)};e.useEffect(()=>()=>{k()},[]);const E=()=>{const e=document.getElementById("admin-preview-video");e&&(h.isPlaying?e.pause():e.play(),f(e=>({...e,isPlaying:!e.isPlaying})))},C=()=>{const e=document.getElementById("admin-preview-audio");e&&(h.isPlaying?e.pause():e.play(),f(e=>({...e,isPlaying:!e.isPlaying})))},S=e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]},R=()=>{k(),f({file:null,preview:null,isPlaying:!1}),m(e=>({...e,file:null}))},{data:A=[],isLoading:_}=sa({queryKey:["/api/admin/users"],enabled:"admin"===a?.role}),{data:T=[],isLoading:z}=sa({queryKey:["/api/admin/experiences"],enabled:"admin"===a?.role}),{data:M=[],isLoading:O}=sa({queryKey:["/api/admin/models"],enabled:"admin"===a?.role}),{data:I=[],isLoading:P}=sa({queryKey:["/api/admin/images"],enabled:"admin"===a?.role}),{data:D=[],isLoading:F}=sa({queryKey:["/api/admin/videos"],enabled:"admin"===a?.role}),{data:L=[],isLoading:U}=sa({queryKey:["/api/admin/audios"],enabled:"admin"===a?.role}),$=ia({mutationFn:async({userId:e,isActive:t})=>Kn(`/api/admin/users/${e}/status`,{method:"PATCH",body:{isActive:t}}),onSuccess:()=>{w.invalidateQueries({queryKey:["/api/admin/users"]}),y({title:"User status updated",description:"User status has been successfully changed."})},onError:e=>{console.error("Toggle user status error:",e),y({title:"Error",description:e.message||"Failed to update user status.",variant:"destructive"})}}),V=ia({mutationFn:async e=>Kn(`/api/admin/users/${e}`,{method:"DELETE"}),onSuccess:()=>{w.invalidateQueries({queryKey:["/api/admin/users"]}),y({title:"User deleted",description:"User has been successfully deleted."})},onError:e=>{console.error("Delete user error:",e),y({title:"Error",description:e.message||"Failed to delete user.",variant:"destructive"})}}),B=ia({mutationFn:async e=>Kn(`/api/admin/experiences/${e}`,{method:"DELETE"}),onSuccess:()=>{w.invalidateQueries({queryKey:["/api/admin/experiences"]}),y({title:"Experience deleted",description:"Experience has been successfully deleted."})},onError:e=>{console.error("Delete experience error:",e),y({title:"Error",description:e.message||"Failed to delete experience.",variant:"destructive"})}}),H=ia({mutationFn:async({type:e,id:t})=>Kn(`/api/admin/${e}/${t}`,{method:"DELETE"}),onSuccess:(e,t)=>{w.invalidateQueries({queryKey:[`/api/admin/${t.type}`]}),y({title:"Item deleted",description:`${t.type.slice(0,-1)} deleted successfully.`})},onError:e=>{console.error("Delete library item error:",e),y({title:"Error",description:e.message||"Failed to delete item.",variant:"destructive"})}}),q=ia({mutationFn:async({type:e,formData:t})=>fetch(`/api/admin/${e}`,{method:"POST",body:t,credentials:"include"}).then(e=>e.ok?e.json():e.json().then(e=>{throw new Error(e.message||"Upload failed")})),onSuccess:(e,t)=>{w.invalidateQueries({queryKey:[`/api/admin/${t.type}`]}),y({title:"Upload successful",description:`${t.type.slice(0,-1)} uploaded successfully.`}),N()},onError:e=>{console.error("Upload error:",e),y({title:"Upload failed",description:e.message||"Failed to upload file.",variant:"destructive"})}}),G=A.filter(e=>e.email?.toLowerCase().includes(r.toLowerCase())||e.name?.toLowerCase().includes(r.toLowerCase())),K=T.filter(e=>{const t=A.find(t=>t.id===e.userId),a=g.searchQuery.toLowerCase(),n=!a||e.title?.toLowerCase().includes(a)||e.description?.toLowerCase().includes(a)||t?.email?.toLowerCase().includes(a)||t?.name?.toLowerCase().includes(a),s=new Date(e.createdAt),i=new Date;let r=!0;switch(g.dateRange){case"today":r=s.toDateString()===i.toDateString();break;case"week":r=s>=new Date(i.getTime()-6048e5);break;case"month":r=s>=new Date(i.getTime()-2592e6);break;case"year":r=s>=new Date(i.getTime()-31536e6);break;default:r=!0}return n&&r}).sort((e,t)=>{const a=A.find(t=>t.id===e.userId),n=A.find(e=>e.id===t.userId);let s,i;switch(g.sortBy){case"title":s=e.title?.toLowerCase()||"",i=t.title?.toLowerCase()||"";break;case"user":s=a?.email?.toLowerCase()||"",i=n?.email?.toLowerCase()||"";break;default:s=new Date(e.createdAt).getTime(),i=new Date(t.createdAt).getTime()}return"asc"===g.sortOrder?s>i?1:-1:s<i?1:-1});if(s)return t.jsx("div",{className:"flex items-center justify-center min-h-screen",children:t.jsx("div",{className:"text-lg",children:"Loading..."})});if(!a||"admin"!==a.role)return null;const Z=()=>{if(!p.file)return void y({title:"Error",description:"Please select a file.",variant:"destructive"});if(!p.name.trim())return void y({title:"Error",description:"Please enter a name.",variant:"destructive"});const e=new FormData;e.append("file",p.file),e.append("name",p.name),e.append("description",p.description),q.mutate({type:l,formData:e})},Q=e=>{const a={models:"3D Model",images:"Image",videos:"Video",audios:"Audio"};return t.jsxs(tg,{className:"sm:max-w-[95vw] lg:max-w-[1000px] bg-slate-800 border-slate-700 max-h-[95vh] overflow-hidden",children:[t.jsx(ag,{children:t.jsxs(ng,{className:"text-white flex items-center gap-2",children:["models"===e&&t.jsx(Rd,{className:"h-5 w-5"}),"images"===e&&t.jsx(vd,{className:"h-5 w-5"}),"videos"===e&&t.jsx(Gd,{className:"h-5 w-5"}),"audios"===e&&t.jsx(Sd,{className:"h-5 w-5"}),"Upload ",a[e]]})}),t.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 pt-4 overflow-hidden",children:[t.jsxs("div",{className:"w-full lg:w-80 space-y-4 flex-shrink-0",children:[t.jsxs("div",{children:[t.jsx(Fp,{htmlFor:"name",className:"text-white",children:"Name"}),t.jsx(Dp,{id:"name",value:p.name,onChange:e=>m({...p,name:e.target.value}),placeholder:`${a[e]} name`,className:"bg-slate-700 border-slate-600 text-white"})]}),t.jsxs("div",{children:[t.jsx(Fp,{htmlFor:"description",className:"text-white",children:"Description"}),t.jsx(bv,{id:"description",value:p.description,onChange:e=>m({...p,description:e.target.value}),placeholder:`${a[e]} description`,className:"bg-slate-700 border-slate-600 text-white"})]}),t.jsxs("div",{children:[t.jsx(Fp,{htmlFor:"file",className:"text-white",children:"File"}),t.jsx(Dp,{id:"file",type:"file",accept:{models:".glb,.gltf,.obj,.fbx,.dae,.3ds",images:"image/*",videos:"video/*",audios:"audio/*"}[e],onChange:t=>{const a=t.target.files?.[0];a&&(async(e,t)=>{k();const a={images:["image/jpeg","image/jpg","image/png","image/gif","image/webp","image/svg+xml"],videos:["video/mp4","video/webm","video/ogg","video/avi","video/mov"],audios:["audio/mp3","audio/wav","audio/ogg","audio/mpeg","audio/m4a","audio/aac"],models:[".glb",".gltf",".obj",".fbx",".dae",".3ds"]};if("models"===t){const t="."+e.name.split(".").pop()?.toLowerCase();if(!a.models.includes(t))return void y({title:"Invalid file type",description:`Please select a valid model file (${a.models.join(", ")})`,variant:"destructive"})}else if(!a[t].includes(e.type))return void y({title:"Invalid file type",description:`Please select a valid ${t.slice(0,-1)} file`,variant:"destructive"});let n=null;"images"===t||"videos"===t||"audios"===t?n=URL.createObjectURL(e):"models"===t&&(n="model-info"),f({file:e,preview:n,isPlaying:!1}),m(t=>({...t,file:e}))})(a,e)},className:"bg-slate-700 border-slate-600 text-white"}),t.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Supported: ",{models:"GLB, GLTF, OBJ, FBX, DAE, 3DS files",images:"JPG, PNG, GIF, WebP, SVG files",videos:"MP4, WebM, OGG, AVI, MOV files",audios:"MP3, WAV, OGG, M4A, AAC files"}[e]]})]}),t.jsx(eu,{onClick:Z,className:"w-full bg-blue-600 hover:bg-blue-700",disabled:q.isPending||!p.file,children:q.isPending?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Uploading..."]}):"Upload to Library"})]}),t.jsx("div",{className:"flex-1 min-h-0 overflow-auto",children:(n=e,h.file&&h.preview?t.jsxs("div",{className:"w-full bg-slate-700 rounded-lg overflow-hidden border border-slate-600",children:[t.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-600 border-b border-slate-500",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-sm font-medium text-white",children:"Preview"}),t.jsx("span",{className:"text-xs text-slate-300 bg-slate-500 px-2 py-1 rounded",children:S(h.file.size)})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(eu,{variant:"ghost",size:"sm",onClick:()=>b(!v),className:"h-7 w-7 p-0 hover:bg-slate-500",children:v?t.jsx(id,{className:"h-4 w-4 text-slate-300"}):t.jsx(ld,{className:"h-4 w-4 text-slate-300"})}),t.jsx(eu,{variant:"ghost",size:"sm",onClick:R,className:"h-7 w-7 p-0 hover:bg-slate-500",children:t.jsx(Zd,{className:"h-4 w-4 text-slate-300"})})]})]}),!v&&t.jsx("div",{className:"p-4 bg-slate-800/50",style:{minHeight:"200px",maxHeight:"400px"},children:t.jsxs("div",{className:"flex items-center justify-center h-full",children:["images"===n&&t.jsx("div",{className:"relative w-full h-full flex items-center justify-center",children:t.jsx("img",{src:h.preview,alt:"Preview",className:"max-w-full max-h-full object-contain rounded shadow-lg",style:{maxHeight:"350px"},onError:()=>{y({title:"Preview error",description:"Unable to preview this image",variant:"destructive"})}})}),"videos"===n&&t.jsxs("div",{className:"relative w-full h-full flex items-center justify-center",children:[t.jsx("video",{id:"admin-preview-video",src:h.preview,className:"max-w-full max-h-full object-contain rounded shadow-lg",style:{maxHeight:"350px"},controls:!1,onPlay:()=>f(e=>({...e,isPlaying:!0})),onPause:()=>f(e=>({...e,isPlaying:!1})),onEnded:()=>f(e=>({...e,isPlaying:!1})),onError:()=>{y({title:"Preview error",description:"Unable to preview this video",variant:"destructive"})}}),t.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:t.jsx(eu,{variant:"ghost",size:"lg",onClick:E,className:"bg-black/60 hover:bg-black/80 rounded-full p-4 backdrop-blur-sm transition-all",children:h.isPlaying?t.jsx(Ad,{className:"h-8 w-8 text-white"}):t.jsx(_d,{className:"h-8 w-8 text-white ml-1"})})})]}),"audios"===n&&t.jsxs("div",{className:"flex flex-col items-center gap-6 text-white text-center w-full",children:[t.jsx("div",{className:"p-6 bg-gradient-to-br from-blue-600 to-purple-600 rounded-full shadow-lg",children:t.jsx(Sd,{className:"h-16 w-16"})}),t.jsxs("div",{className:"space-y-2 max-w-xs",children:[t.jsx("p",{className:"text-lg font-medium break-all",children:h.file.name}),t.jsx("p",{className:"text-sm text-slate-300",children:h.file.type||"Audio file"})]}),t.jsx("div",{className:"flex items-center gap-4",children:t.jsx(eu,{variant:"outline",onClick:C,className:"flex items-center gap-3 px-6 py-3 bg-slate-600 hover:bg-slate-500 border-slate-500",children:h.isPlaying?t.jsxs(t.Fragment,{children:[t.jsx(Ad,{className:"h-5 w-5"}),"Pause"]}):t.jsxs(t.Fragment,{children:[t.jsx(_d,{className:"h-5 w-5"}),"Play"]})})}),t.jsx("audio",{id:"admin-preview-audio",src:h.preview,onPlay:()=>f(e=>({...e,isPlaying:!0})),onPause:()=>f(e=>({...e,isPlaying:!1})),onEnded:()=>f(e=>({...e,isPlaying:!1})),onError:()=>{y({title:"Preview error",description:"Unable to preview this audio file",variant:"destructive"})}})]}),"models"===n&&t.jsxs("div",{className:"flex flex-col items-center gap-6 text-white text-center w-full",children:[t.jsx("div",{className:"p-6 bg-gradient-to-br from-green-600 to-teal-600 rounded-full shadow-lg",children:t.jsx(td,{className:"h-16 w-16"})}),t.jsxs("div",{className:"space-y-3 max-w-xs",children:[t.jsx("p",{className:"text-lg font-medium break-all",children:h.file.name}),t.jsxs("div",{className:"text-sm text-slate-300 space-y-2 bg-slate-700 p-4 rounded-lg",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{children:"Format:"}),t.jsx("span",{className:"font-medium bg-slate-600 px-2 py-1 rounded text-xs",children:h.file.name.split(".").pop()?.toUpperCase()})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{children:"Size:"}),t.jsx("span",{className:"font-medium",children:S(h.file.size)})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{children:"Status:"}),t.jsx("span",{className:"font-medium text-green-400",children:"Ready to upload"})]})]})]}),t.jsxs("div",{className:"text-xs text-slate-400 text-center bg-slate-700 p-3 rounded-lg max-w-xs",children:[t.jsx(gd,{className:"h-6 w-6 mx-auto mb-2"}),t.jsx("p",{className:"font-medium mb-1",children:"3D Model Preview"}),t.jsx("p",{children:"Model will be processed and rendered after upload"}),t.jsx("p",{className:"mt-2 text-green-400",children:"Supported: GLB, GLTF, OBJ, FBX"})]})]})]})})]}):t.jsxs("div",{className:"w-full h-64 bg-slate-700/30 rounded-lg border-2 border-dashed border-slate-600 flex flex-col items-center justify-center text-slate-400",children:[t.jsx(hd,{className:"h-12 w-12 mb-3 opacity-50"}),t.jsx("p",{className:"text-sm font-medium",children:"No file selected"}),t.jsx("p",{className:"text-xs mt-1 text-center px-4",children:"Choose a file to see preview here"})]}))})]})]});var n};return t.jsxs("div",{className:"min-h-screen bg-[#0f1419] text-white flex",children:[t.jsxs("div",{className:"w-64 bg-[#1c2631] border-r border-[#2a3441] flex flex-col",children:[t.jsxs("div",{className:"p-6 border-b border-[#2a3441]",children:[t.jsx("h1",{className:"text-xl font-bold mb-1",children:"Admin Dashboard"}),t.jsx("p",{className:"text-sm text-gray-400",children:"Manage platform content"})]}),t.jsx("nav",{className:"flex-1 p-4",children:t.jsxs("div",{className:"space-y-2",children:[t.jsxs("button",{onClick:()=>{c("users"),N()},className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-left transition-colors "+("users"===l?"bg-blue-600 text-white":"text-gray-300 hover:bg-[#253546] hover:text-white"),children:[t.jsx(qd,{className:"h-5 w-5"}),t.jsx("span",{children:"User Management"})]}),t.jsxs("button",{onClick:()=>{c("models"),N()},className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-left transition-colors "+("models"===l?"bg-blue-600 text-white":"text-gray-300 hover:bg-[#253546] hover:text-white"),children:[t.jsx(Rd,{className:"h-5 w-5"}),t.jsx("span",{children:"3D Models Library"})]}),t.jsxs("button",{onClick:()=>{c("images"),N()},className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-left transition-colors "+("images"===l?"bg-green-600 text-white":"text-gray-300 hover:bg-[#253546] hover:text-white"),children:[t.jsx(vd,{className:"h-5 w-5"}),t.jsx("span",{children:"Images Library"})]}),t.jsxs("button",{onClick:()=>{c("videos"),N()},className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-left transition-colors "+("videos"===l?"bg-red-600 text-white":"text-gray-300 hover:bg-[#253546] hover:text-white"),children:[t.jsx(Gd,{className:"h-5 w-5"}),t.jsx("span",{children:"Videos Library"})]}),t.jsxs("button",{onClick:()=>{c("audios"),N()},className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-left transition-colors "+("audios"===l?"bg-yellow-600 text-white":"text-gray-300 hover:bg-[#253546] hover:text-white"),children:[t.jsx(Sd,{className:"h-5 w-5"}),t.jsx("span",{children:"Audio Library"})]})]})}),t.jsx("div",{className:"p-4 border-t border-[#2a3441]",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white font-semibold",children:a?.name?.[0]||a?.email?.[0]||"A"}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-medium",children:a?.name||"Admin"}),t.jsx("div",{className:"text-xs text-gray-400",children:a?.email})]})]})})]}),t.jsxs("div",{className:"flex-1 flex flex-col",children:[t.jsx("div",{className:"bg-[#1c2631] border-b border-[#2a3441] p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsxs("h2",{className:"text-2xl font-semibold",children:["users"===l&&"User Management","models"===l&&"3D Models Library","images"===l&&"Images Library","videos"===l&&"Videos Library","audios"===l&&"Audio Library"]}),t.jsxs("p",{className:"text-gray-400 mt-1",children:["users"===l&&"Manage registered users and their experiences","models"===l&&"Manage 3D models available to users","images"===l&&"Manage images available to users","videos"===l&&"Manage videos available to users","audios"===l&&"Manage audio files available to users"]})]}),t.jsxs("div",{className:"relative",children:[t.jsx(Od,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),t.jsx(Dp,{placeholder:"Search...",value:r,onChange:e=>o(e.target.value),className:"pl-9 w-80 bg-[#253546] border-[#3a4455]"})]})]})}),t.jsx("div",{className:"flex-1 p-6 overflow-auto",children:(()=>{switch(l){case"users":return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-[#1c2631] rounded-lg border border-[#2a3441]",children:[t.jsxs("div",{className:"p-4 border-b border-[#2a3441]",children:[t.jsx("h3",{className:"text-lg font-semibold",children:"User Management"}),t.jsx("p",{className:"text-sm text-gray-400",children:"Manage registered users"})]}),_?t.jsx("div",{className:"p-6",children:"Loading users..."}):0===G.length?t.jsx("div",{className:"p-6 text-center text-gray-400",children:"No users found"}):t.jsxs(mv,{children:[t.jsx(hv,{children:t.jsxs(gv,{children:[t.jsx(xv,{children:"User"}),t.jsx(xv,{children:"Email"}),t.jsx(xv,{children:"Status"}),t.jsx(xv,{children:"Experiences"}),t.jsx(xv,{children:"Joined"}),t.jsx(xv,{children:"Actions"})]})}),t.jsx(fv,{children:G.map(e=>{const a=K.filter(t=>t.userId===e.id);return t.jsxs(gv,{children:[t.jsx(vv,{children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white font-semibold",children:e.name?.[0]||e.email?.[0]||"U"}),t.jsxs("div",{children:[t.jsx("div",{className:"font-medium",children:e.name||"Unknown"}),t.jsxs("div",{className:"text-sm text-gray-400",children:["ID: ",e.id]})]})]})}),t.jsx(vv,{children:e.email}),t.jsx(vv,{children:t.jsx(jx,{variant:e.isActive?"default":"destructive",children:e.isActive?"Active":"Inactive"})}),t.jsx(vv,{children:a.length}),t.jsx(vv,{children:e.createdAt?new Date(e.createdAt).toLocaleDateString():"N/A"}),t.jsx(vv,{children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(eu,{size:"sm",variant:e.isActive?"destructive":"default",onClick:()=>$.mutate({userId:e.id,isActive:!e.isActive}),disabled:$.isPending,children:e.isActive?t.jsx(ed,{className:"h-4 w-4"}):t.jsx(dd,{className:"h-4 w-4"})}),t.jsx(eu,{size:"sm",variant:"destructive",onClick:()=>{confirm("Are you sure you want to delete this user? This will also delete all their experiences.")&&V.mutate(e.id)},disabled:V.isPending,children:t.jsx(Bd,{className:"h-4 w-4"})})]})})]},e.id)})})]})]}),t.jsxs("div",{className:"bg-[#1c2631] rounded-lg border border-[#2a3441]",children:[t.jsxs("div",{className:"p-4 border-b border-[#2a3441]",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold",children:"All Experiences"}),t.jsxs("p",{className:"text-sm text-gray-400",children:["Manage user experiences (",K.length," of"," ",T.length,")"]})]}),t.jsxs("div",{className:"flex items-center justify-between mt-2",children:[t.jsxs("div",{className:"",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"relative",children:[t.jsx(Od,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),t.jsx(Dp,{placeholder:"Search experiences...",value:g.searchQuery,onChange:e=>x({...g,searchQuery:e.target.value}),className:"pl-9 bg-[#253546] border-[#3a4455] text-white placeholder-gray-400"})]}),t.jsxs("select",{value:g.dateRange,onChange:e=>x({...g,dateRange:e.target.value}),className:"px-3 py-2 bg-[#253546] border border-[#3a4455] rounded-md text-white",children:[t.jsx("option",{value:"all",children:"All Time"}),t.jsx("option",{value:"today",children:"Today"}),t.jsx("option",{value:"week",children:"Last Week"}),t.jsx("option",{value:"month",children:"Last Month"}),t.jsx("option",{value:"year",children:"Last Year"})]}),t.jsxs("select",{value:g.sortBy,onChange:e=>x({...g,sortBy:e.target.value}),className:"px-3 py-2 bg-[#253546] border border-[#3a4455] rounded-md text-white",children:[t.jsx("option",{value:"createdAt",children:"Sort by Date"}),t.jsx("option",{value:"title",children:"Sort by Title"}),t.jsx("option",{value:"user",children:"Sort by User"})]}),t.jsxs("select",{value:g.sortOrder,onChange:e=>x({...g,sortOrder:e.target.value}),className:"px-3 py-2 bg-[#253546] border border-[#3a4455] rounded-md text-white",children:[t.jsx("option",{value:"desc",children:"Newest First"}),t.jsx("option",{value:"asc",children:"Oldest First"})]})]}),t.jsx("div",{className:"flex items-center justify-between text-sm text-gray-400",children:g.searchQuery&&t.jsxs(eu,{variant:"ghost",size:"sm",onClick:()=>x({...g,searchQuery:""}),className:"text-gray-400 hover:text-white",children:[t.jsx(Zd,{className:"h-4 w-4 mr-1"}),"Clear Search"]})})]}),t.jsx("div",{className:"",children:t.jsx(eu,{variant:"outline",size:"sm",onClick:()=>x({searchQuery:"",dateRange:"all",sortBy:"createdAt",sortOrder:"desc"}),className:"text-gray-400 hover:text-white border-gray-600",children:"Reset Filters"})})]})]}),z?t.jsx("div",{className:"p-6",children:"Loading experiences..."}):0===K.length?t.jsx("div",{className:"p-6 text-center text-gray-400",children:g.searchQuery||"all"!==g.dateRange?"No experiences match your filters":"No experiences found"}):t.jsxs(mv,{children:[t.jsx(hv,{children:t.jsxs(gv,{children:[t.jsx(xv,{children:t.jsxs(eu,{variant:"ghost",size:"sm",onClick:()=>x({...g,sortBy:"title",sortOrder:"title"===g.sortBy&&"asc"===g.sortOrder?"desc":"asc"}),className:"h-auto p-0 text-left justify-start hover:bg-transparent",children:["Title","title"===g.sortBy&&("asc"===g.sortOrder?t.jsx(ld,{className:"h-4 w-4 ml-1"}):t.jsx(id,{className:"h-4 w-4 ml-1"}))]})}),t.jsx(xv,{children:t.jsxs(eu,{variant:"ghost",size:"sm",onClick:()=>x({...g,sortBy:"user",sortOrder:"user"===g.sortBy&&"asc"===g.sortOrder?"desc":"asc"}),className:"h-auto p-0 text-left justify-start hover:bg-transparent",children:["User","user"===g.sortBy&&("asc"===g.sortOrder?t.jsx(ld,{className:"h-4 w-4 ml-1"}):t.jsx(id,{className:"h-4 w-4 ml-1"}))]})}),t.jsx(xv,{children:"Type"}),t.jsx(xv,{children:t.jsxs(eu,{variant:"ghost",size:"sm",onClick:()=>x({...g,sortBy:"createdAt",sortOrder:"createdAt"===g.sortBy&&"asc"===g.sortOrder?"desc":"asc"}),className:"h-auto p-0 text-left justify-start hover:bg-transparent",children:["Created","createdAt"===g.sortBy&&("asc"===g.sortOrder?t.jsx(ld,{className:"h-4 w-4 ml-1"}):t.jsx(id,{className:"h-4 w-4 ml-1"}))]})}),t.jsx(xv,{children:"Actions"})]})}),t.jsx(fv,{children:K.map(e=>{const a=A.find(t=>t.id===e.userId);return t.jsxs(gv,{children:[t.jsx(vv,{children:t.jsxs("div",{children:[t.jsx("div",{className:"font-medium",children:e.title||"Untitled"}),t.jsx("div",{className:"text-sm text-gray-400 truncate max-w-xs",children:e.description})]})}),t.jsx(vv,{children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center text-white text-xs font-semibold",children:a?.name?.[0]||a?.email?.[0]||"U"}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-medium",children:a?.name||"Unknown"}),t.jsx("div",{className:"text-xs text-gray-400",children:a?.email||"Unknown"})]})]})}),t.jsx(vv,{children:t.jsx(jx,{variant:"outline",children:"AR Experience"})}),t.jsx(vv,{children:t.jsx("div",{className:"text-sm",children:e.createdAt?new Date(e.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"})}),t.jsx(vv,{children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(eu,{size:"sm",variant:"outline",onClick:()=>{e.shareableLink&&window.open(e.shareableLink,"_blank")},className:"border-gray-600 text-gray-300 hover:bg-gray-700",children:t.jsx(hd,{className:"h-4 w-4"})}),t.jsx(eu,{size:"sm",variant:"destructive",onClick:()=>{confirm("Are you sure you want to delete this experience?")&&B.mutate(e.id)},disabled:B.isPending,children:t.jsx($d,{className:"h-4 w-4"})})]})})]},e.id)})})]})]})]});case"models":case"images":case"videos":case"audios":const e=l,a="images"===e?I:"videos"===e?D:"audios"===e?L:M,n="images"===e?P:"videos"===e?F:"audios"===e?U:O,s="images"===e?vd:"videos"===e?Gd:"audios"===e?Sd:Rd,i={images:"bg-green-600 hover:bg-green-700",videos:"bg-red-600 hover:bg-red-700",audios:"bg-yellow-600 hover:bg-yellow-700",models:"bg-blue-600 hover:bg-blue-700"},r={models:"3D Model",images:"Image",videos:"Video",audios:"Audio"};return t.jsxs("div",{className:"bg-[#1c2631] rounded-lg border border-[#2a3441] p-6",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsxs("div",{children:[t.jsxs("h3",{className:"text-lg font-medium mb-2 flex items-center gap-2",children:[t.jsx(s,{className:"h-5 w-5"}),e.charAt(0).toUpperCase()+e.slice(1)," ","Library"]}),t.jsxs("p",{className:"text-gray-400",children:["Manage ",e," available to users"]})]}),t.jsxs(Yf,{open:d,onOpenChange:u,children:[t.jsx(Xf,{asChild:!0,children:t.jsxs(eu,{className:i[e],children:[t.jsx(Td,{className:"h-4 w-4 mr-2"}),"Add ",r[e]]})}),Q(e)]})]}),n?t.jsxs("div",{className:"text-center py-8",children:["Loading ",e,"..."]}):0===a.length?t.jsxs("div",{className:"text-center py-8 text-gray-400",children:["No ",e," uploaded yet"]}):t.jsxs(mv,{children:[t.jsx(hv,{children:t.jsxs(gv,{children:[t.jsx(xv,{children:"Name"}),t.jsx(xv,{children:"Description"}),t.jsx(xv,{children:"Format"}),t.jsx(xv,{children:"Size"}),"videos"===e&&t.jsx(xv,{children:"Duration"}),"audios"===e&&t.jsx(xv,{children:"Duration"}),"images"===e&&t.jsx(xv,{children:"Dimensions"}),t.jsx(xv,{children:"Uploaded"}),t.jsx(xv,{children:"Actions"})]})}),t.jsx(fv,{children:a.map(a=>t.jsxs(gv,{children:[t.jsx(vv,{className:"font-medium",children:a.name}),t.jsx(vv,{className:"max-w-xs truncate",children:a.description||"No description"}),t.jsx(vv,{children:t.jsx(jx,{variant:"outline",children:a.format?.toUpperCase()||"Unknown"})}),t.jsx(vv,{children:a.fileSize||"Unknown"}),"videos"===e&&t.jsx(vv,{children:a.duration||"Unknown"}),"audios"===e&&t.jsx(vv,{children:a.duration||"Unknown"}),"images"===e&&t.jsx(vv,{children:a.dimensions||"Unknown"}),t.jsx(vv,{children:a.createdAt?new Date(a.createdAt).toLocaleDateString():"N/A"}),t.jsx(vv,{children:t.jsx(eu,{size:"sm",variant:"destructive",onClick:()=>{confirm(`Delete this ${e.slice(0,-1)}?`)&&H.mutate({type:e,id:a.id})},disabled:H.isPending,children:t.jsx($d,{className:"h-4 w-4"})})})]},a.id))})]})]});default:return null}})()})]})]})}function wv(){const{id:a}=Ja(),n=Xa(),s=Xt();console.log("EditExperience component loaded with ID:",a),console.log("EditExperience component rendered with ID:",a);const[i,r]=e.useState(""),[o,l]=e.useState(),[c,d]=e.useState(""),[u,p]=e.useState("translate"),m=e.useRef(null),[h,f]=e.useState(null);e.useEffect(()=>(console.log("EditExperience component mounted with ID:",a),()=>{console.log("EditExperience component unmounting for ID:",a)}),[a]);const{data:g,isLoading:x,error:v}=sa({queryKey:["experience",a],queryFn:async()=>{console.log("Fetching experience with ID:",a);const e=await fetch(qn(`/api/experiences/${a}`),{credentials:"include"});if(console.log("Response status:",e.status),!e.ok){const t=await e.text();throw console.error("Fetch error:",t),new Error(`Failed to fetch experience: ${e.status} ${t}`)}const t=await e.json();return console.log("Fetched experience data:",t),t.data?.experience||t.experience||t},enabled:!!a,retry:1}),b=Sp({resolver:Pp(Sl),defaultValues:{title:"",description:"",markerImage:"",contentConfig:{position:{x:0,y:0,z:1},rotation:{x:0,y:0,z:0},scale:{x:1,y:1,z:1},sceneObjects:[]}}});e.useEffect(()=>{if(g){console.log("Loading experience into edit mode:",{id:g.id,title:g.title,markerImage:g.markerImage,mindFile:g.mindFile,contentConfig:g.contentConfig,sceneObjectsCount:g.contentConfig.sceneObjects?.length||0,sceneObjects:g.contentConfig.sceneObjects}),b.reset({title:g.title,description:g.description,markerImage:g.markerImage,contentConfig:g.contentConfig});let e="";g.markerImage&&(e=g.markerImage.startsWith("data:image/")?g.markerImage:`/api/experiences/markers/${g.id}.png`),console.log("Setting marker image URL:",e),console.log("Original marker image from experience:",g.markerImage),console.log("Experience ID:",g.id),d(e);const t={position:g.contentConfig.position||{x:0,y:0,z:0},rotation:g.contentConfig.rotation||{x:0,y:0,z:0},scale:g.contentConfig.scale||{x:.3,y:.3,z:.3},sceneObjects:g.contentConfig.sceneObjects||[]};console.log("Setting scene config with preserved state:",{position:t.position,rotation:t.rotation,scale:t.scale,objectCount:t.sceneObjects.length}),f(t),g.mindFile&&r(g.mindFile.split("/").pop()||"Existing mind file")}},[g,b]),e.useEffect(()=>{c&&b.setValue("markerImage",c)},[c]),e.useEffect(()=>{h&&(console.log("Scene config changed - updating form:",h),b.setValue("contentConfig",{position:h.position,rotation:h.rotation,scale:h.scale,sceneObjects:h.sceneObjects}))},[h]);const y=ia({mutationFn:async e=>{console.log("Updating experience with data:",{title:e.title,description:e.description,sceneObjectsCount:e.contentConfig.sceneObjects.length,sceneObjects:e.contentConfig.sceneObjects});const t=new FormData;t.append("title",e.title),t.append("description",e.description),e.markerImage&&e.markerImage.startsWith("data:image/")&&t.append("markerImage",e.markerImage),t.append("contentConfig",JSON.stringify(e.contentConfig)),m.current&&t.append("mindFile",m.current);const n=await fetch(qn(`/api/experiences/${a}`),{method:"PUT",body:t,credentials:"include"});if(!n.ok){const e=await n.json();throw new Error(e.message||"Failed to update experience")}return n.json()},onSuccess:e=>{Yp({title:"Experience updated successfully"}),s.invalidateQueries({queryKey:["experiences"]}),s.invalidateQueries({queryKey:["experience",a]}),s.invalidateQueries({queryKey:["userExperiences"]}),l(e.data?.experienceUrl||e.experienceUrl)},onError:e=>{Yp({title:"Error updating experience",description:e instanceof Error?e.message:"Please try again",variant:"destructive"})}}),w=async e=>{console.log("Submitting experience update:",{sceneObjectsCount:e.contentConfig.sceneObjects.length,sceneObjects:e.contentConfig.sceneObjects}),h?.sceneObjects?.length?await y.mutateAsync(e):Yp({title:"Please add at least one object to the scene",variant:"destructive"})};return x?t.jsx("div",{className:"flex flex-col bg-slate-800 h-screen",children:t.jsx("div",{className:"flex items-center justify-center h-full",children:t.jsx("div",{className:"animate-pulse text-white",children:"Loading experience..."})})}):v?t.jsx("div",{className:"flex flex-col bg-slate-800 h-screen",children:t.jsx("div",{className:"flex items-center justify-center h-full",children:t.jsxs("div",{className:"text-center text-white",children:[t.jsx("h2",{className:"text-xl font-semibold mb-2 text-red-400",children:"Error Loading Experience"}),t.jsx("p",{className:"text-slate-400 mb-4",children:v.message||"Failed to load experience data"}),t.jsxs("div",{className:"flex gap-2 justify-center",children:[t.jsxs(eu,{onClick:()=>n("/experiences"),variant:"outline",children:[t.jsx(Xc,{className:"h-4 w-4 mr-2"}),"Back to Experiences"]}),t.jsx(eu,{onClick:()=>window.location.reload(),children:"Try Again"})]})]})})}):g?t.jsxs("div",{className:"flex flex-col bg-slate-800 h-screen",children:[t.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-700",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs(eu,{variant:"ghost",onClick:()=>n("/experiences"),className:"text-white hover:bg-slate-700",children:[t.jsx(Xc,{className:"h-4 w-4 mr-2"}),"Back to Experiences"]}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-xl font-bold text-white",children:"Edit AR Experience"}),t.jsxs("p",{className:"text-sm text-slate-400",children:[g?.title||"Loading..."," - ",h?.sceneObjects?.length||0," objects loaded"]})]})]}),t.jsx(eu,{onClick:e=>{e.preventDefault(),e.stopPropagation(),b.handleSubmit(w)()},disabled:y.isPending,className:"bg-blue-600 hover:bg-blue-700",children:y.isPending?"Updating...":t.jsxs(t.Fragment,{children:[t.jsx(Md,{className:"h-4 w-4 mr-2"}),"Update Experience"]})})]}),t.jsx(em,{...b,children:t.jsx("form",{onSubmit:e=>{e.preventDefault(),e.stopPropagation()},className:"h-full flex flex-col",children:h?t.jsx(Qh,{markerImage:c,config:h,onChange:f,onMindFileUpload:async e=>{r(e.name),m.current=e},onMarkerImageUpload:d,transformMode:u,setTransformMode:p,uploadedMindFile:i,form:b}):t.jsx("div",{className:"flex-1 flex items-center justify-center bg-slate-800",children:t.jsx("div",{className:"text-white text-lg",children:"Loading experience data..."})})})}),t.jsx(Yf,{open:!!o,onOpenChange:()=>l(void 0),children:t.jsxs(tg,{className:"bg-slate-800 border-slate-700",children:[t.jsxs(ag,{children:[t.jsx(ng,{className:"text-white",children:"Experience Updated Successfully!"}),t.jsx(sg,{className:"text-slate-400",children:"Your AR experience has been updated. Use the link below to access it:"})]}),t.jsxs("div",{className:"flex flex-col gap-4",children:[t.jsx("div",{className:"p-4 bg-slate-700 rounded-lg break-all",children:t.jsx("code",{className:"text-slate-300",children:window.location.origin+o})}),t.jsxs("div",{className:"flex justify-end gap-2",children:[t.jsx(eu,{variant:"outline",className:"border-slate-600 text-slate-300 hover:bg-slate-700",onClick:()=>{navigator.clipboard.writeText(window.location.origin+o),Yp({title:"Link copied to clipboard!"})},children:"Copy Link"}),t.jsx(eu,{className:"bg-blue-600 hover:bg-blue-700 text-white",onClick:()=>{const e=b.getValues("title");o&&((e,t)=>{const a=new URLSearchParams({experienceUrl:e,projectNumber:t});n(`/ar-success?${a.toString()}`)})(o,e)},children:"View Experience"})]})]})]})})]}):t.jsx("div",{className:"flex flex-col bg-slate-800 h-screen",children:t.jsx("div",{className:"flex items-center justify-center h-full",children:t.jsxs("div",{className:"text-center text-white",children:[t.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Experience not found"}),t.jsx("p",{className:"text-muted-foreground mb-4",children:"The experience you're trying to edit doesn't exist."}),t.jsxs(eu,{onClick:()=>n("/experiences"),children:[t.jsx(Xc,{className:"h-4 w-4 mr-2"}),"Back to Experiences"]})]})})})}const jv=()=>{const a=Xa(),[n,s]=e.useState(null),[i,r]=e.useState([]),[o,l]=e.useState(0),[c,d]=e.useState(null),[u,p]=e.useState([]),[m,h]=e.useState(!1),[f,g]=e.useState(null),[x,v]=e.useState(!1),[b,y]=e.useState(!0),[w,j]=e.useState(!1),k=e.useRef([]),N=e.useRef(!1),E=e.useRef(!1),C=e.useCallback(()=>{k.current.forEach(e=>{e&&"string"==typeof e&&URL.revokeObjectURL(e)}),k.current=[]},[]),S=e.useCallback(()=>{if(E.current||N.current)return E.current;N.current=!0;try{if(window.MINDAR&&window.MINDAR.IMAGE){const e=new window.MINDAR.IMAGE.Compiler;return s(e),y(!1),g(null),E.current=!0,console.log("MindAR compiler initialized successfully"),!0}return console.warn("MindAR not available yet"),!1}catch(e){return console.error("Error creating compiler instance:",e),g(`Failed to initialize compiler: ${e.message}`),y(!1),!1}},[]);e.useEffect(()=>{let e=!0,t=null;const a=()=>{e&&(console.log("MindAR loaded, initializing compiler..."),S())};return window.MINDAR&&window.MINDAR.IMAGE?S():(window.addEventListener("mindARLoaded",a),t=setInterval(()=>{e&&!E.current&&window.MINDAR&&window.MINDAR.IMAGE&&S()&&clearInterval(t)},2e3)),()=>{e=!1,t&&clearInterval(t),window.removeEventListener("mindARLoaded",a),C()}},[]);const R=e.useCallback(e=>{0!==e.length&&(r(t=>{const a=[...t,...e],n=e.map(e=>URL.createObjectURL(e));return k.current=[...k.current,...n],a}),g(null),v(!1),d(null))},[]),{getRootProps:A,getInputProps:_,open:T}=fx({onDrop:R,accept:{"image/*":[".png",".jpg",".jpeg"]},multiple:!0,noClick:!0,maxSize:10485760}),z=e.useCallback(async e=>new Promise((t,a)=>{const n=new Image,s=URL.createObjectURL(e);n.onload=()=>{t(n)},n.onerror=t=>{URL.revokeObjectURL(s),a(new Error(`Error loading image: ${e.name}`))},n.src=s}),[]),M=e.useCallback(async()=>{if(n)if(0!==i.length){h(!0),g(null),l(0);try{console.log("Starting compilation of",i.length,"files");const e=await Promise.all(i.map(z));console.log("Images loaded successfully:",e.length);const t=Date.now(),a=await n.compileImageTargets(e,e=>{console.log("Compilation progress:",e),l(e)}),s=Date.now();if(console.log("Compilation completed in:",s-t,"ms"),console.log("Compilation results:",a),!a||0===a.length)throw new Error("No compilation data generated");p(a);const r=await n.exportData();if(!r)throw new Error("Failed to export compilation data");d(r),v(!0),l(100)}catch(e){console.error("Error compiling files:",e),g(`Compilation failed: ${e.message||"Unknown error"}`)}finally{h(!1)}}else g("No files to compile");else g("Compiler not initialized")},[n,i,z]),O=e.useCallback(()=>{0!==i.length?n||S()?M():g("MindAR compiler is not initialized. Please wait or refresh the page."):g("Please select at least one image")},[i.length,n,S,M]),I=e.useCallback(async()=>{if(!w)if(c&&x)if(0!==i.length){j(!0),g(null);try{const e=new Blob([c]),t=await new Promise((t,a)=>{const n=new FileReader;n.onload=()=>t(n.result),n.onerror=a,n.readAsDataURL(e)}),n=await Promise.all(i.map(e=>new Promise((t,a)=>{const n=new FileReader;n.onload=()=>t(n.result),n.onerror=a,n.readAsDataURL(e)}))),s={mindFileData:t,mindFileBuffer:c,originalFiles:i,fileUrls:n,originalImages:i.map((e,t)=>({name:e.name,size:e.size,type:e.type,lastModified:e.lastModified,url:n[t]})),compiledImageData:u,compilationTimestamp:(new Date).toISOString(),trackingData:u.map(e=>({trackingImages:e.trackingImageList||[],featureImages:e.imageList||[],trackingPoints:e.trackingData||[],matchingData:e.matchingData||[]})),isMultipleImages:!0,totalImages:i.length};console.log("Navigating to multiple-image-confirmation with state:",s),a("/multiple-image-confirmation",{state:s})}catch(e){console.error("Navigation error:",e),g(`Navigation failed: ${e.message}`),j(!1)}}else g("No files available for navigation");else g("Please complete the compilation process first")},[c,x,i,u,a,w]),P=e.useCallback(e=>{r(t=>{const a=[...t];return a.splice(e,1),k.current[e]&&(URL.revokeObjectURL(k.current[e]),k.current.splice(e,1)),a}),1===i.length&&(p([]),d(null),v(!1),l(0),g(null))},[i.length]),D=e.useCallback(()=>{T()},[T]),F=e.useCallback(()=>{T()},[T]),L=0===i.length||m||!n||b,U=!x||!c||w||m;return t.jsxs("div",{className:"min-h-screen bg-slate-900 text-white flex flex-col",children:[t.jsxs("header",{className:"container mx-auto px-6 py-6",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("div",{className:"bg-blue-600/20 p-2 rounded-lg",children:t.jsx(wd,{className:"h-6 w-6 text-blue-400"})}),t.jsx("h1",{className:"text-2xl font-bold",children:"Multiple Image Tracking"})]}),t.jsx("p",{className:"text-slate-400",children:"Upload multiple images to create a comprehensive AR tracking system. All images will be compiled into a single .mind file."})]}),t.jsxs("main",{className:"container mx-auto p-6 flex-grow",children:[b&&t.jsx("div",{className:"mb-6 p-4 bg-blue-900/50 border border-blue-500/50 text-blue-400 rounded-lg",children:t.jsx("p",{children:"🔄 Initializing MindAR compiler... Please wait."})}),w&&t.jsx("div",{className:"mb-6 p-4 bg-green-900/50 border border-green-500/50 text-green-400 rounded-lg",children:t.jsx("p",{children:"🚀 Preparing AR experience... Please wait."})}),t.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[t.jsx("div",{className:"flex-1",children:0===i.length?t.jsxs("div",{...A({className:"border-2 border-dashed border-blue-500/30 rounded-xl p-12 bg-slate-800/50 flex flex-col items-center justify-center cursor-pointer hover:border-blue-500/50 hover:bg-slate-800/70 transition-all duration-300"}),children:[t.jsx("input",{..._()}),t.jsx("div",{className:"bg-blue-600/20 p-6 rounded-full mb-6",children:t.jsx(Vd,{className:"h-16 w-16 text-blue-400"})}),t.jsx("h3",{className:"font-semibold text-2xl mb-2 text-white",children:"Upload Multiple Images"}),t.jsx("p",{className:"text-slate-400 mb-6 text-center max-w-md",children:"Drag and drop multiple images here, or click to select them from your device"}),t.jsxs(eu,{onClick:F,className:"bg-blue-600 hover:bg-blue-700 text-white font-medium px-8 py-3 text-lg flex gap-3 items-center",disabled:b,children:[t.jsx(vd,{className:"h-5 w-5"}),"Select Multiple Images"]}),t.jsx("p",{className:"text-slate-500 text-sm mt-8",children:"Supports: JPG, PNG • Max 10MB per image • Up to 10 images recommended"})]}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{...A({className:"border-2 border-dashed border-blue-500/30 rounded-xl p-8 bg-slate-800/30 flex flex-col items-center justify-center cursor-pointer hover:border-blue-500/50 hover:bg-slate-800/50 transition-all duration-300"}),children:[t.jsx("input",{..._()}),t.jsx(Vd,{className:"h-10 w-10 text-blue-400 mb-3"}),t.jsx("h4",{className:"font-medium text-lg mb-2",children:"Add More Images"}),t.jsx("p",{className:"text-slate-400 text-sm text-center",children:"Drop additional images here or click to select more"})]}),t.jsx("div",{className:"flex justify-center",children:t.jsxs(eu,{onClick:D,className:"bg-blue-600 hover:bg-blue-700 text-white font-medium px-6 py-3 flex gap-2 items-center",disabled:m||w,children:[t.jsx(Td,{className:"h-5 w-5"}),"Add More Images"]})})]})}),t.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-6 w-full lg:w-96 border border-slate-700/50",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"font-semibold text-lg",children:"Preview"}),i.length>0&&t.jsx("div",{className:"bg-blue-600/20 px-3 py-1 rounded-full",children:t.jsxs("span",{className:"text-sm text-blue-400 font-medium",children:[i.length," image",i.length>1?"s":""]})})]}),t.jsx("div",{className:"aspect-square relative bg-slate-900 rounded-lg flex items-center justify-center mb-4 border border-slate-700/30",children:i.length>0?t.jsx("div",{className:"grid grid-cols-2 gap-2 w-full h-full p-3",children:i.slice(0,4).map((e,a)=>t.jsxs("div",{className:"relative rounded-lg overflow-hidden",children:[t.jsx("img",{src:URL.createObjectURL(e),alt:e.name,className:"w-full h-full object-cover",onLoad:e=>{}}),3===a&&i.length>4&&t.jsx("div",{className:"absolute inset-0 bg-black/70 rounded-lg flex items-center justify-center",children:t.jsxs("span",{className:"text-white font-semibold text-lg",children:["+",i.length-4]})})]},`${e.name}-${a}`))}):t.jsxs("div",{className:"text-slate-600 flex flex-col items-center",children:[t.jsx(fd,{className:"h-12 w-12 mb-3"}),t.jsx("span",{className:"text-lg",children:"No images selected"}),t.jsx("span",{className:"text-sm text-slate-500",children:"Preview will appear here"})]})}),t.jsxs("div",{className:"space-y-2 text-sm",children:[t.jsxs("div",{className:"flex justify-between text-slate-400",children:[t.jsx("span",{children:"Total images:"}),t.jsx("span",{className:"font-medium",children:i.length})]}),t.jsxs("div",{className:"flex justify-between text-slate-400",children:[t.jsx("span",{children:"Total size:"}),t.jsx("span",{className:"font-medium",children:i.length>0?`${(i.reduce((e,t)=>e+t.size,0)/1048576).toFixed(1)} MB`:"0 MB"})]})]})]})]}),i.length>0&&t.jsxs("div",{className:"mt-8 bg-slate-800/50 rounded-xl p-6 border border-slate-700/50",children:[t.jsx("h3",{className:"font-semibold text-lg mb-4",children:"Selected Images"}),t.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:i.map((e,a)=>t.jsxs("div",{className:"flex items-center justify-between bg-slate-900/50 p-4 rounded-lg border border-slate-700/30",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"relative",children:[t.jsx("img",{src:URL.createObjectURL(e),alt:e.name,className:"w-12 h-12 object-cover rounded-lg"}),t.jsx("div",{className:"absolute -top-1 -right-1 bg-blue-600 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-medium",children:a+1})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-slate-200 font-medium truncate max-w-xs",children:e.name}),t.jsxs("p",{className:"text-slate-500 text-sm",children:[(e.size/1048576).toFixed(1)," MB"]})]})]}),t.jsx(eu,{variant:"ghost",size:"sm",onClick:()=>P(a),className:"text-red-400 hover:text-red-300 hover:bg-red-900/20 p-2",disabled:m||w,children:t.jsx(Zd,{className:"h-4 w-4"})})]},`${e.name}-${a}-${e.lastModified}`))})]}),t.jsxs("div",{className:"mt-8 bg-gradient-to-r from-blue-900/20 to-purple-900/20 p-6 rounded-xl border border-blue-500/20",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx(ud,{className:"text-blue-400 h-6 w-6"}),t.jsx("h3",{className:"font-semibold text-lg text-blue-400",children:"Tips for Multiple Image Tracking"})]}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(dd,{className:"text-green-500 h-5 w-5 mt-0.5"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-slate-300 font-medium",children:"Diverse Content"}),t.jsx("p",{className:"text-slate-400 text-sm",children:"Choose images with different content for better tracking"})]})]}),t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(dd,{className:"text-green-500 h-5 w-5 mt-0.5"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-slate-300 font-medium",children:"High Contrast"}),t.jsx("p",{className:"text-slate-400 text-sm",children:"Images with good contrast and details work best"})]})]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(dd,{className:"text-green-500 h-5 w-5 mt-0.5"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-slate-300 font-medium",children:"Avoid Repetition"}),t.jsx("p",{className:"text-slate-400 text-sm",children:"Don't use repetitive patterns or similar images"})]})]}),t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(dd,{className:"text-green-500 h-5 w-5 mt-0.5"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-slate-300 font-medium",children:"Optimal Size"}),t.jsx("p",{className:"text-slate-400 text-sm",children:"Minimum 1080x1080px for better results"})]})]})]})]})]}),f&&t.jsx("div",{className:"mt-6 p-4 bg-red-900/50 border border-red-500/50 text-red-400 rounded-lg",children:t.jsx("p",{children:f})}),t.jsxs("div",{className:"mt-8 space-y-4",children:[t.jsx(eu,{className:"w-full md:w-auto bg-blue-600 hover:bg-blue-700 text-white font-medium px-8 py-3 text-lg "+(L?"opacity-50 cursor-not-allowed":""),onClick:O,disabled:L,children:m?"Compiling Images...":b?"Initializing...":i.length>0?`Compile ${i.length} Image${i.length>1?"s":""}`:"Select Images First"}),m&&t.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-lg border border-slate-700/50",children:[t.jsxs("div",{className:"flex justify-between items-center mb-2",children:[t.jsx("span",{className:"text-slate-300 font-medium",children:"Compiling Images..."}),t.jsxs("span",{className:"text-blue-400 font-medium",children:[o.toFixed(1),"%"]})]}),t.jsx("div",{className:"bg-slate-700 rounded-full h-2",children:t.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${o}%`}})})]}),x&&t.jsx("div",{className:"bg-green-900/50 border border-green-500/50 text-green-400 rounded-lg p-4",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(dd,{className:"h-5 w-5"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:"Compilation Successful!"}),t.jsxs("p",{className:"text-sm",children:["All ",i.length," images have been compiled into a single .mind file."]})]})]})})]})]}),t.jsxs("div",{className:"container mx-auto p-6 flex justify-between mt-auto",children:[t.jsxs(eu,{variant:"ghost",className:"flex items-center gap-2 text-slate-400 hover:text-white",onClick:()=>a("/"),disabled:w,children:[t.jsx(Xc,{className:"h-4 w-4"}),"Back to Home"]}),t.jsx(eu,{onClick:I,disabled:U,className:"flex items-center gap-2 "+(x&&c&&!w?"bg-blue-600 hover:bg-blue-700":"bg-slate-700 cursor-not-allowed"),children:w?t.jsxs(t.Fragment,{children:["Preparing...",t.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full"})]}):t.jsxs(t.Fragment,{children:["Continue to AR Creation",t.jsx(Jc,{className:"h-4 w-4"})]})})]}),t.jsx("footer",{className:"p-4 text-center text-slate-500 text-sm",children:"© 2023 PACKAR - Create your AR experience"})]})},kv=()=>{const a=Qa(),n=Xa(),[s,i]=e.useState(0),{mindFileData:r,mindFileBuffer:o,originalImages:l=[],originalFiles:c=[],fileUrls:d=[],compiledImageData:u=[],trackingData:p=[],compilationTimestamp:m,isMultipleImages:h,totalImages:f}=a?.state||{},[g,x]=e.useState({name:"",size:"",dimensions:"1200 x 800 px",preview:""}),[v,b]=e.useState({contrast:92,details:88,recognizability:75});e.useEffect(()=>{if(l&&l.length>0&&s<l.length){const e=l[s];x({name:e.name,size:`${(e.size/1048576).toFixed(1)} MB`,dimensions:"1200 x 800 px",preview:e.url||d[s]||""}),b({contrast:Math.floor(15*Math.random())+85,details:Math.floor(20*Math.random())+80,recognizability:Math.floor(25*Math.random())+75})}},[s,l,d]);return l&&0!==l.length?t.jsxs("div",{className:"min-h-screen bg-slate-900 text-white",children:[t.jsxs("header",{className:"p-4 border-b border-slate-800 flex justify-between items-center",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"bg-slate-800 h-8 w-8 flex items-center justify-center rounded-md",children:t.jsx("span",{className:"text-xl font-bold",children:"P"})}),t.jsx("h1",{className:"text-xl font-bold tracking-wider",children:"PACKAR"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{children:"Multiple Image Tracking"}),t.jsx("div",{className:"h-6 w-6 bg-blue-500 rounded-full flex items-center justify-center text-xs",children:l.length})]})]}),t.jsxs("main",{className:"container mx-auto p-6 flex flex-col items-center",children:[t.jsx("h2",{className:"text-2xl font-semibold mb-2 text-center",children:"Confirm this image?"}),t.jsx("div",{className:"mb-6 flex items-center gap-2 text-sm text-slate-400",children:t.jsxs("span",{children:["Image ",s+1," of ",l.length]})}),t.jsxs("div",{className:"bg-slate-800 rounded-lg overflow-hidden max-w-2xl w-full aspect-video mb-6 relative",children:[g.preview?t.jsx("img",{src:g.preview,alt:"Current target",className:"w-full h-full object-contain",onError:e=>{console.error("Image failed to load:",g.preview),e.target.style.display="none"}}):t.jsx("div",{className:"w-full h-full bg-black flex items-center justify-center",children:t.jsx("span",{className:"text-slate-500",children:"No preview available"})}),l.length>1&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>{i(e=>e>0?e-1:l.length-1)},className:"absolute left-4 top-1/2 transform -translate-y-1/2 bg-black/50 hover:bg-black/70 rounded-full p-2 transition-colors",children:t.jsx(rd,{className:"h-6 w-6 text-white"})}),t.jsx("button",{onClick:()=>{i(e=>e<l.length-1?e+1:0)},className:"absolute right-4 top-1/2 transform -translate-y-1/2 bg-black/50 hover:bg-black/70 rounded-full p-2 transition-colors",children:t.jsx(od,{className:"h-6 w-6 text-white"})})]}),t.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-3",children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{className:"text-sm text-slate-400",children:[g.name,t.jsx("br",{}),g.dimensions," • ",g.size]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"h-2 w-2 bg-green-500 rounded-full"}),t.jsx("span",{className:"text-sm text-slate-300",children:"Image suitable for tracking"})]})]})})]}),l.length>1&&t.jsx("div",{className:"mb-6 flex gap-2 overflow-x-auto max-w-2xl w-full pb-2",children:l.map((e,a)=>t.jsxs("button",{onClick:()=>i(a),className:"flex-shrink-0 relative "+(a===s?"ring-2 ring-blue-500 rounded-lg":"hover:ring-2 hover:ring-blue-400/50 rounded-lg"),children:[t.jsx("img",{src:e.url||d[a]||"",alt:e.name,className:"w-16 h-16 object-cover rounded-lg",onError:t=>{console.error("Thumbnail failed to load:",e.url||d[a]),t.target.style.backgroundColor="#374151",t.target.style.display="flex",t.target.style.alignItems="center",t.target.style.justifyContent="center",t.target.innerHTML="?"}}),t.jsx("div",{className:"absolute -top-1 -right-1 bg-blue-600 text-white text-xs rounded-full w-4 h-4 flex items-center justify-center font-medium",children:a+1})]},a))}),t.jsxs("div",{className:"bg-slate-800/80 rounded-lg p-4 w-full max-w-2xl mb-8",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[t.jsx(nd,{className:"text-blue-400 h-5 w-5"}),t.jsx("h3",{className:"font-medium text-blue-300",children:"Image Analysis"})]}),t.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"text-green-400 font-bold text-2xl mb-1",children:[v.contrast,"%"]}),t.jsx("div",{className:"text-slate-400 text-sm",children:"Contrast"})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"text-blue-400 font-bold text-2xl mb-1",children:[v.details,"%"]}),t.jsx("div",{className:"text-slate-400 text-sm",children:"Details"})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"text-amber-400 font-bold text-2xl mb-1",children:[v.recognizability,"%"]}),t.jsx("div",{className:"text-slate-400 text-sm",children:"Recognizability"})]})]})]}),t.jsxs("div",{className:"flex gap-4",children:[t.jsxs(eu,{onClick:()=>{n("/multiple-image-tracking")},className:"bg-red-600 hover:bg-red-700 px-8 py-2 flex items-center gap-2",children:[t.jsx(Zd,{className:"h-5 w-5"}),"No"]}),t.jsxs(eu,{onClick:()=>{const e={mindFileData:r,mindFileBuffer:o,originalImages:l,originalFiles:c,fileUrls:d,compiledImageData:u,trackingData:p,compilationTimestamp:m,targetImage:{name:g.name,size:g.size,dimensions:g.dimensions,preview:g.preview},analysisResults:v,uploadedImage:g.preview,isMultipleImages:!0,totalImages:l.length,allImages:l.map((e,t)=>({name:e.name,size:`${(e.size/1048576).toFixed(1)} MB`,dimensions:"1200 x 800 px",preview:e.url||d[t]||""}))};n("/multiple-image-create",{state:e})},className:"bg-amber-700 hover:bg-amber-800 px-8 py-2 flex items-center gap-2",children:[t.jsx(sd,{className:"h-5 w-5"}),"Yes"]})]})]}),t.jsx("div",{className:"container mx-auto px-6 mt-auto",children:t.jsxs(eu,{onClick:()=>n("/multiple-image-tracking"),variant:"outline",className:"flex items-center gap-2 bg-transparent border-slate-700 text-slate-300",children:[t.jsx(Xc,{className:"h-4 w-4"}),"Back"]})}),t.jsx("footer",{className:"p-6 text-center text-slate-500 text-sm mt-auto",children:"© 2023 PACKAR - Create your AR experience"})]}):t.jsx("div",{className:"min-h-screen bg-slate-900 text-white flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("h2",{className:"text-2xl font-bold mb-4",children:"No Images Found"}),t.jsx("p",{className:"text-slate-400 mb-6",children:"Please upload images first."}),t.jsx(eu,{onClick:()=>n("/multiple-image-tracking"),children:"Go Back to Upload"})]})})},Nv=()=>{const a=Qa(),n=Xa(),{toast:s}=Xp(),i=e.useRef(null),{mindFileData:r,mindFileBuffer:o,originalImages:l=[],fileUrls:c=[],isMultipleImages:d,totalImages:u,allImages:p=[]}=a?.state||{},[m,h]=e.useState(),[f,g]=e.useState(!1),[x,v]=e.useState("translate"),[b,y]=e.useState(),[w,j]=e.useState(),[k,N]=e.useState(0),[E,C]=e.useState({position:{x:0,y:0,z:1},rotation:{x:0,y:0,z:0},scale:{x:1,y:1,z:1},sceneObjects:[]}),[S,R]=e.useState([]),A=useFormState({resolver:Pp(Sl),defaultValues:{title:"",description:"",markerImage:"",contentConfig:{position:{x:0,y:0,z:1},rotation:{x:0,y:0,z:0},scale:{x:1,y:1,z:1},sceneObjects:[]}}});e.useEffect(()=>{if(l.length>0&&c.length>0){const e=l.map((e,t)=>({id:`target-${t}`,name:e.name,imageUrl:c[t]||"",imageData:e,sceneConfig:{position:{x:0,y:0,z:1},rotation:{x:0,y:0,z:0},scale:{x:1,y:1,z:1},sceneObjects:[]}}));R(e),y("multiple-targets.mind"),c[0]&&(h(c[0]),A.setValue("markerImage",c[0]))}},[l,c,A]),e.useEffect(()=>{r&&o&&fetch(r).then(e=>e.blob()).then(e=>{const t=new File([e],"multiple-targets.mind",{type:"application/octet-stream"});i.current=t}).catch(e=>{console.error("Error processing mind file data:",e)})},[r,o]),e.useEffect(()=>{if(S[k]){const e=S[k];C(e.sceneConfig),h(e.imageUrl),A.setValue("markerImage",e.imageUrl)}},[k,S,A]),e.useEffect(()=>{S[k]&&R(e=>e.map((e,t)=>t===k?{...e,sceneConfig:E}:e))},[E,k]);const _=ia({mutationFn:async e=>{const t=new FormData;t.append("title",e.title),t.append("description",e.description),t.append("markerImage",e.markerImage),t.append("contentConfig",JSON.stringify(e.contentConfig)),t.append("isMultipleTargets","true");const a=S.map((e,t)=>({id:e.id,name:e.name,imageUrl:e.imageUrl,imageData:e.imageData,sceneObjects:e.sceneConfig.sceneObjects.map(e=>({id:e.id,type:e.content.type,url:e.content.url,content:"text"===e.content.type?"Sample Text":void 0,position:e.position,rotation:e.rotation,scale:e.scale,color:e.content.color,size:1}))}));if(t.append("targetsConfig",JSON.stringify(a)),!i.current)throw new Error("Mind file is required but not found");t.append("mindFile",i.current);const n=await fetch("/api/multiple-image-experiences",{method:"POST",body:t});if(!n.ok){const e=await n.json();throw new Error(e.message||"Failed to create multiple image experience")}return n.json()},onSuccess:e=>{s({title:"Multiple image experience created successfully"}),j(e.experienceUrl)},onError:e=>{s({title:"Error creating multiple image experience",description:e instanceof Error?e.message:"Please try again",variant:"destructive"})}}),T=async e=>{if(!i.current)return void s({title:"Please upload a .mind file",variant:"destructive"});if(0===S.reduce((e,t)=>e+t.sceneConfig.sceneObjects.length,0))return void s({title:"Please add at least one object to any target",variant:"destructive"});if(!e.markerImage)return void s({title:"Please select a marker image",variant:"destructive"});const t={...e,contentConfig:E};_.mutate(t)};return l.length?t.jsxs("div",{className:"flex flex-col bg-slate-800 h-screen",children:[t.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-700",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs(eu,{variant:"ghost",onClick:()=>n("/multiple-image-tracking"),className:"text-white hover:bg-slate-700",children:[t.jsx(Xc,{className:"h-4 w-4 mr-2"}),"Back to Upload"]}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-xl font-bold text-white",children:"Create Multi-Target AR Experience"}),t.jsxs("p",{className:"text-sm text-slate-400",children:["Target ",k+1," of ",S.length," -"," ",S.reduce((e,t)=>e+t.sceneConfig.sceneObjects.length,0)," ","total objects"]})]})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs(eu,{variant:"outline",size:"sm",onClick:()=>{b?g(!0):s({title:"Please upload a mind file first",variant:"destructive"})},className:"text-white border-slate-600 hover:bg-slate-700",children:[t.jsx(hd,{className:"h-4 w-4 mr-2"}),"Preview AR"]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Ud,{className:"h-5 w-5 text-blue-400"}),t.jsx("span",{className:"text-sm text-white",children:"Multi-Target Mode"})]})]})]}),t.jsx("div",{className:"border-b border-slate-700 p-4 bg-slate-800",children:t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(wd,{className:"h-4 w-4 text-slate-400"}),t.jsx("span",{className:"text-sm text-slate-400 font-medium",children:"Editing Target:"})]}),t.jsx("div",{className:"flex gap-2 overflow-x-auto",children:S.map((e,a)=>t.jsx(Uc,{className:"p-3 cursor-pointer transition-all min-w-max "+(k===a?"bg-blue-500/20 border-blue-500":"bg-slate-700 border-slate-600 hover:border-slate-500"),onClick:()=>{var e;(e=a)!==k&&(R(e=>e.map((e,t)=>t===k?{...e,sceneConfig:E}:e)),N(e))},children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("img",{src:e.imageUrl,alt:e.name,className:"w-8 h-8 rounded object-cover"}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-sm font-medium text-white",children:e.name}),t.jsxs("p",{className:"text-xs text-slate-400",children:[e.sceneConfig.sceneObjects.length," objects"]})]}),k===a&&t.jsx(jx,{variant:"secondary",className:"bg-blue-500/20 text-blue-400 ml-2",children:"Active"})]})},e.id))})]})}),t.jsx(em,{...A,children:t.jsx("form",{onSubmit:e=>{e.preventDefault(),e.stopPropagation()},className:"h-full flex flex-col",children:t.jsx(Qh,{markerImage:m,config:E,onChange:C,onMindFileUpload:async e=>{y(e.name),i.current=e},onMarkerImageUpload:e=>{h(e),A.setValue("markerImage",e)},transformMode:x,uploadedMindFile:b,form:A})})}),t.jsx("div",{className:"fixed bottom-6 right-6 z-50",children:t.jsx(eu,{type:"button",onClick:e=>{e.preventDefault(),e.stopPropagation(),A.handleSubmit(T)()},disabled:_.isPending,className:"h-14 px-8 text-lg font-semibold bg-blue-600 hover:bg-blue-700 shadow-2xl border-2 border-blue-500 transition-all duration-200 hover:scale-105",children:_.isPending?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-3"}),"Creating..."]}):t.jsxs(t.Fragment,{children:[t.jsx(Md,{className:"h-5 w-5 mr-2"}),"Create Multi-Target Experience"]})})}),t.jsx(Yf,{open:!!w,onOpenChange:()=>j(void 0),children:t.jsxs(tg,{children:[t.jsxs(ag,{children:[t.jsx(ng,{children:"Multi-Target Experience Created Successfully!"}),t.jsxs(sg,{children:["Your multi-target AR experience is now ready. Users can point their camera at any of the ",S.length," target images to see different AR content."]})]}),t.jsxs("div",{className:"flex flex-col gap-4",children:[t.jsx("div",{className:"p-4 bg-muted rounded-lg break-all",children:t.jsx("code",{children:window.location.origin+w})}),t.jsxs("div",{className:"flex justify-end gap-2",children:[t.jsx(eu,{variant:"outline",onClick:()=>{navigator.clipboard.writeText(window.location.origin+w),s({title:"Link copied to clipboard"})},children:"Copy Link"}),t.jsx(eu,{onClick:()=>window.open(window.location.origin+w,"_blank"),children:"Open Experience"})]})]})]})}),f&&b&&t.jsx(Wf,{mindFile:b,contentConfig:E,onClose:()=>g(!1)})]}):t.jsx("div",{className:"min-h-screen bg-slate-900 text-white flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("h2",{className:"text-2xl font-bold mb-4",children:"No Images Found"}),t.jsx("p",{className:"text-slate-400 mb-6",children:"Please upload images first."}),t.jsx(eu,{onClick:()=>n("/multiple-image-tracking"),children:"Go Back to Upload"})]})})};function Ev(){return t.jsxs(Jt,{client:Gn,children:[t.jsx("main",{className:"min-h-screen bg-slate-900 text-white",children:t.jsx(Dn,{children:t.jsxs(hn,{children:[t.jsx(pn,{path:"/login",element:t.jsx(Bp,{})}),t.jsx(pn,{path:"/register",element:t.jsx(Jp,{})}),t.jsx(pn,{path:"/share/:link",element:t.jsx(rg,{})}),t.jsx(pn,{path:"/",element:t.jsx(_l,{restrictAdmin:!0,children:t.jsx(tu,{})})}),t.jsx(pn,{path:"/experiences",element:t.jsx(_l,{children:t.jsx(kx,{})})}),t.jsx(pn,{path:"/experience/:id",element:t.jsx(_l,{restrictAdmin:!0,children:t.jsx(Nx,{})})}),t.jsx(pn,{path:"/edit-experience/:id",element:t.jsx(_l,{children:t.jsx(wv,{})})}),t.jsx(pn,{path:"/create",element:t.jsx(_l,{children:t.jsx(ig,{})})}),t.jsx(pn,{path:"/image-to-ar",element:t.jsx(_l,{restrictAdmin:!0,children:t.jsx(yx,{})})}),t.jsx(pn,{path:"/image-tracking",element:t.jsx(_l,{restrictAdmin:!0,children:t.jsx(Ex,{})})}),t.jsx(pn,{path:"/multiple-image-tracking",element:t.jsx(_l,{restrictAdmin:!0,children:t.jsx(jv,{})})}),t.jsx(pn,{path:"/multiple-image-confirmation",element:t.jsx(_l,{restrictAdmin:!0,children:t.jsx(kv,{})})}),t.jsx(pn,{path:"/confirm-image",element:t.jsx(_l,{restrictAdmin:!0,children:t.jsx(Cx,{})})}),t.jsx(pn,{path:"/multiple-image-create",element:t.jsx(_l,{restrictAdmin:!0,children:t.jsx(Nv,{})})}),t.jsx(pn,{path:"/ar-success",element:t.jsx(_l,{restrictAdmin:!0,children:t.jsx(pv,{})})}),t.jsx(pn,{path:"/admin",element:t.jsx(_l,{requireAdmin:!0,children:t.jsx(yv,{})})}),t.jsx(pn,{path:"*",element:t.jsx(Qd,{})})]})})}),t.jsx(xs,{})]})}Ce.createRoot(document.getElementById("root")).render(t.jsx(e.StrictMode,{children:t.jsxs(Jt,{client:Gn,children:[t.jsx(Ev,{}),t.jsx(oa,{initialIsOpen:!1})]})}));
